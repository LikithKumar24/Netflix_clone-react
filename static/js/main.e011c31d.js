/*! For license information please see main.e011c31d.js.LICENSE.txt */
(()=>{"use strict";var e={110:(e,t,n)=>{var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{l(t,y,v)}catch(w){}}}}return t}},746:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},309:(e,t,n)=>{e.exports=n(746)},463:(e,t,n)=>{var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Se||null!==Ie)&&(Ne(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,It,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Ot.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Wn(t,Hn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Ir={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Sr[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),c(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(xr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=yn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Oe(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Kn(a))if(Jn)g=or;else{g=ir;var y=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Oe(n,s))&&o.unshift(Wr(n,c,a)):i||null!=(c=Oe(n,s))&&o.push(Wr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ii(e){return{current:e}}function Ti(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ci={},xi=Ii(Ci),Ni=Ii(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ni),Ti(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Es(e){var t=ys.current;Ti(ys),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Oi(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Oi(t)?Ai:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function $s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case E:return(t=jl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Gs(r,s,o),c.return=r,r=c)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jl(o,r.mode,c)).return=r,r=s}return a(r);case O:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Ys=$s(!0),Js=$s(!1),Xs={},Zs=Ii(Xs),eo=Ii(Xs),to=Ii(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ii(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:$o,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:$o,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Gc=r),da(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dc,Rc),Rc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Rc),Rc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Oi(n)?Ai:xi.current;return s=Pi(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Pi(t,l=Oi(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ks(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),c=t.memoizedState),(a=As||Bs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Pi(t,c=Oi(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ks(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(l=As||Bs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,Ra,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Ha(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Ra(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in ve(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Es(t.type._context),Ha(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ga(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ga(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $a(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(d);continue}}null!==p?(p.return=f,Za=p):Ec(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),vc(e),4&r&&mc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=Ya;var l=Ja;if(Ya=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sc(i):null!==c?(c.return=o,Za=c):Sc(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,Ya=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Ic,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Nc=0,Ac=null,Pc=null,Oc=0,Rc=0,Dc=Ii(0),Lc=0,Mc=null,Fc=0,Uc=0,jc=0,Vc=null,zc=null,Bc=0,qc=1/0,Kc=null,Wc=!1,Gc=null,Hc=null,Qc=!1,$c=null,Yc=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Oc?Oc&-Oc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));yt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(Uc|=n),4===Lc&&cl(e,Oc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=Je()+500,ji&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Oc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Oc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Oc===t||(Kc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Nc=i,null!==Pc?t=0:(Ac=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,zc,Kc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Bc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,zc,Kc),t);break}El(e,zc,Kc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,zc,Kc),r);break}El(e,zc,Kc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=zc,zc=n,null!==t&&al(t)),e}function al(e){null===zc?zc=e:zc.push.apply(zc,e)}function cl(e,t){for(t&=~jc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));Sl();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,zc,Kc),il(e,Je()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=Je()+500,ji&&Bi())}}function hl(e){null!==$c&&0===$c.tag&&0===(6&Nc)&&Sl();var t=Nc;Nc|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Nc=t))&&Bi()}}function dl(){Rc=Dc.current,Ti(Dc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Pc=e=Dl(e.current,null),Oc=Rc=t,Lc=0,Mc=null,jc=Uc=Fc=0,zc=Vc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Pc;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Pc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Oc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&Uc)||cl(Ac,Oc)}function yl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Oc===t||(Kc=null,fl(e,t));;)try{vl();break}catch(i){pl(e,i)}if(_s(),Nc=n,kc.current=r,null!==Pc)throw Error(s(261));return Ac=null,Oc=0,Lc}function vl(){for(;null!==Pc;)bl(Pc)}function wl(){for(;null!==Pc&&!$e();)bl(Pc)}function bl(e){var t=Ic(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?_l(e):Pc=t,Cc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Rc)))return void(Pc=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function El(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{Sl()}while(null!==$c);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Pc=Ac=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),yc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),Ye(),Nc=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,$c=e,Yc=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=Gc,Gc=null,e;0!==(1&Yc)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function Sl(){if(null!==$c){var e=bt(Yc),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===$c)var r=!1;else{if(e=$c,$c=null,Yc=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(E){Tl(c,c.return,E)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Nc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Il(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Ds(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Oc&n)===n&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>Je()-Bc?fl(e,0):jc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(yt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Al(e,t){return He(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Pl(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ml(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Ol(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Ol(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ol(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ol(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,s,o,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ol(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=zl(n,r,!0,e,0,s,0,a,c)).context=Bl(null),n=e.current,(s=Rs(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Rs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Ws(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wl(o);a.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wl(c);a.call(e)}}var c=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hl((function(){Kl(t,c,n,r)})),c}(n,t,e,i,r);return Wl(o)}Yl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kl(e,t,null,null)},Yl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Kl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),il(t,Je()),0===(6&Nc)&&(qc=Je()+500,Bi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Hl(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Hl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Hl(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ul]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:(e,t)=>{var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case l:case h:case m:case p:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:(e,t,n)=>{n(459)},374:(e,t,n)=>{var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},117:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{e.exports=n(117)},184:(e,t,n)=>{e.exports=n(374)},813:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,R(E);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?S():(I=!1,T=null)}}else I=!1}if("function"===typeof w)S=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,S=function(){O.postMessage(null)}}else S=function(){y(A,0)};function R(e){T=e,I||(I=!0,S())}function D(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(v(k),k=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{e.exports=n(813)},561:(e,t,n)=>{var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,l(i)&&u({inst:i})}),[e,n,t]),o((function(){return l(i)&&u({inst:i}),e((function(){l(i)&&u({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},595:(e,t,n)=>{var r=n(791),i=n(248);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,a=r.useRef,c=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!c){if(c=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,c=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,i]);var f=o(e,h[0],h[1]);return c((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},248:(e,t,n)=>{e.exports=n(561)},327:(e,t,n)=>{e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".ab353cd6.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="myflix:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Netflix_clone-react/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],c=r[2],l=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)c(n)}for(t&&t(r);l<o.length;l++)s=o[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmyflix=self.webpackChunkmyflix||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Kr,hasStandardBrowserEnv:()=>Wr,hasStandardBrowserWebWorkerEnv:()=>Hr});var t={};n.r(t),n.d(t,{FirebaseError:()=>rs,SDK_VERSION:()=>oo,_DEFAULT_ENTRY_NAME:()=>Qs,_addComponent:()=>Xs,_addOrOverwriteComponent:()=>Zs,_apps:()=>Ys,_clearComponents:()=>ro,_components:()=>Js,_getProvider:()=>to,_registerComponent:()=>eo,_removeServiceInstance:()=>no,deleteApp:()=>uo,getApp:()=>co,getApps:()=>lo,initializeApp:()=>ao,onLog:()=>fo,registerVersion:()=>ho,setLogLevel:()=>po});var r=n(791),i=n.t(r,2),s=n(250),o=n(248),a=n(327),c=n(164),l=n.t(c,2);let u=function(e){e()};const h=()=>u,d=Symbol.for("react-redux-context"),f="undefined"!==typeof globalThis?globalThis:{};function p(){var e;if(!r.createContext)return{};const t=null!=(e=f[d])?e:f[d]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}const m=p();function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return function(){return(0,r.useContext)(e)}}const y=g();let v=()=>{throw new Error("uSES not initialized!")};const w=(e,t)=>e===t;function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?y:g(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:i=w,stabilityCheck:s,noopCheck:o}="function"===typeof n?{equalityFn:n}:n;const{store:a,subscription:c,getServerState:l,stabilityCheck:u,noopCheck:h}=t(),d=((0,r.useRef)(!0),(0,r.useCallback)({[e.name]:t=>e(t)}[e.name],[e,u,s])),f=v(c.addNestedSub,a.getState,l||a.getState,d,i);return(0,r.useDebugValue)(f),f}}const _=b();n(110),n(900);const E={notify(){},get:()=>[]};function S(e,t){let n,r=E,i=0,s=!1;function o(){l.onStateChange&&l.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){const e=h();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function c(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=E)}const l={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,c())},getListeners:()=>r};return l}const I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;let T=null;const k=function(e){let{store:t,context:n,children:i,serverState:s,stabilityCheck:o="once",noopCheck:a="once"}=e;const c=r.useMemo((()=>{const e=S(t);return{store:t,subscription:e,getServerState:s?()=>s:void 0,stabilityCheck:o,noopCheck:a}}),[t,s,o,a]),l=r.useMemo((()=>t.getState()),[t]);I((()=>{const{subscription:e}=c;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,l]);const u=n||m;return r.createElement(u.Provider,{value:c},i)};function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?y:g(e);return function(){const{store:e}=t();return e}}const x=C();function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;const t=e===m?x:C(e);return function(){return t().dispatch}}const A=N();var P;function O(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function R(e){return!!e&&!!e[Ee]}function D(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Se}(e)||Array.isArray(e)||!!e[_e]||!!(null===(t=e.constructor)||void 0===t?void 0:t[_e])||z(e)||B(e))}function L(e,t,n){void 0===n&&(n=!1),0===M(e)?(n?Object.keys:Ie)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function M(e){var t=e[Ee];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:z(e)?2:B(e)?3:0}function F(e,t){return 2===M(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return 2===M(e)?e.get(t):e[t]}function j(e,t,n){var r=M(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function V(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function z(e){return ye&&e instanceof Map}function B(e){return ve&&e instanceof Set}function q(e){return e.o||e.t}function K(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Te(e);delete t[Ee];for(var n=Ie(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function W(e,t){return void 0===t&&(t=!1),H(e)||R(e)||!D(e)||(M(e)>1&&(e.set=e.add=e.clear=e.delete=G),Object.freeze(e),t&&L(e,(function(e,t){return W(t,!0)}),!0)),e}function G(){O(2)}function H(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Q(e){var t=ke[e];return t||O(18,e),t}function $(e,t){ke[e]||(ke[e]=t)}function Y(){return me}function J(e,t){t&&(Q("Patches"),e.u=[],e.s=[],e.v=t)}function X(e){Z(e),e.p.forEach(te),e.p=null}function Z(e){e===me&&(me=e.l)}function ee(e){return me={p:[],l:me,h:e,m:!0,_:0}}function te(e){var t=e[Ee];0===t.i||1===t.i?t.j():t.g=!0}function ne(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Q("ES5").S(t,e,r),r?(n[Ee].P&&(X(t),O(4)),D(e)&&(e=re(t,e),t.l||se(t,e)),t.u&&Q("Patches").M(n[Ee].t,e,t.u,t.s)):e=re(t,n,[]),X(t),t.u&&t.v(t.u,t.s),e!==be?e:void 0}function re(e,t,n){if(H(t))return t;var r=t[Ee];if(!r)return L(t,(function(i,s){return ie(e,r,t,i,s,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return se(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=K(r.k):r.o,s=i,o=!1;3===r.i&&(s=new Set(i),i.clear(),o=!0),L(s,(function(t,s){return ie(e,r,i,t,s,n,o)})),se(e,i,!1),n&&e.u&&Q("Patches").N(r,n,e.u,e.s)}return r.o}function ie(e,t,n,r,i,s,o){if(R(i)){var a=re(e,i,s&&t&&3!==t.i&&!F(t.R,r)?s.concat(r):void 0);if(j(n,r,a),!R(a))return;e.m=!1}else o&&n.add(i);if(D(i)&&!H(i)){if(!e.h.D&&e._<1)return;re(e,i),t&&t.A.l||se(e,i)}}function se(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&W(t,n)}function oe(e,t){var n=e[Ee];return(n?q(n):e)[t]}function ae(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ce(e){e.P||(e.P=!0,e.l&&ce(e.l))}function le(e){e.o||(e.o=K(e.t))}function ue(e,t,n){var r=z(t)?Q("MapSet").F(t,n):B(t)?Q("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Y(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=Ce;n&&(i=[r],s=xe);var o=Proxy.revocable(i,s),a=o.revoke,c=o.proxy;return r.k=c,r.j=a,c}(t,n):Q("ES5").J(t,n);return(n?n.A:Y()).p.push(r),r}function he(e){return R(e)||O(22,e),function e(t){if(!D(t))return t;var n,r=t[Ee],i=M(t);if(r){if(!r.P&&(r.i<4||!Q("ES5").K(r)))return r.t;r.I=!0,n=de(t,i),r.I=!1}else n=de(t,i);return L(n,(function(t,i){r&&U(r.t,t)===i||j(n,t,e(i))})),3===i?new Set(n):n}(e)}function de(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return K(e)}function fe(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Ee];return Ce.get(t,e)},set:function(t){var n=this[Ee];Ce.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Ee];if(!i.P)switch(i.i){case 5:r(i)&&ce(i);break;case 4:n(i)&&ce(i)}}}function n(e){for(var t=e.t,n=e.k,r=Ie(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==Ee){var o=t[s];if(void 0===o&&!F(t,s))return!0;var a=n[s],c=a&&a[Ee];if(c?c.t!==o:!V(a,o))return!0}}var l=!!t[Ee];return r.length!==Ie(t).length+(l?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};$("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=Te(n);delete s[Ee];for(var o=Ie(s),a=0;a<o.length;a++){var c=o[a];s[c]=e(c,t||!!s[c].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:Y(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Ee,{value:s,writable:!0}),i},S:function(e,n,i){i?R(n)&&n[Ee].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Ee];if(n){var i=n.t,s=n.k,o=n.R,a=n.i;if(4===a)L(s,(function(t){t!==Ee&&(void 0!==i[t]||F(i,t)?o[t]||e(s[t]):(o[t]=!0,ce(n)))})),L(i,(function(e){void 0!==s[e]||F(s,e)||(o[e]=!1,ce(n))}));else if(5===a){if(r(n)&&(ce(n),o.length=!0),s.length<i.length)for(var c=s.length;c<i.length;c++)o[c]=!1;else for(var l=i.length;l<s.length;l++)o[l]=!0;for(var u=Math.min(s.length,i.length),h=0;h<u;h++)s.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}(e=>{v=e})(a.useSyncExternalStoreWithSelector),(e=>{T=e})(o.useSyncExternalStore),P=c.unstable_batchedUpdates,u=P;var pe,me,ge="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ye="undefined"!=typeof Map,ve="undefined"!=typeof Set,we="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,be=ge?Symbol.for("immer-nothing"):((pe={})["immer-nothing"]=!0,pe),_e=ge?Symbol.for("immer-draftable"):"__$immer_draftable",Ee=ge?Symbol.for("immer-state"):"__$immer_state",Se=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Ie="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Te=Object.getOwnPropertyDescriptors||function(e){var t={};return Ie(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ke={},Ce={get:function(e,t){if(t===Ee)return e;var n=q(e);if(!F(n,t))return function(e,t,n){var r,i=ae(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!D(r)?r:r===oe(e.t,t)?(le(e),e.o[t]=ue(e.A.h,r,e)):r},has:function(e,t){return t in q(e)},ownKeys:function(e){return Reflect.ownKeys(q(e))},set:function(e,t,n){var r=ae(q(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=oe(q(e),t),s=null==i?void 0:i[Ee];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(V(n,i)&&(void 0!==n||F(e.t,t)))return!0;le(e),ce(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==oe(e.t,t)||t in e.t?(e.R[t]=!1,le(e),ce(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=q(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){O(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){O(12)}},xe={};L(Ce,(function(e,t){xe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),xe.deleteProperty=function(e,t){return xe.set.call(this,e,t,void 0)},xe.set=function(e,t,n){return Ce.set.call(this,e[0],t,n,e[0])};var Ne=function(){function e(e){var t=this;this.O=we,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&O(6),void 0!==r&&"function"!=typeof r&&O(7),D(e)){var a=ee(t),c=ue(t,e,void 0),l=!0;try{o=n(c),l=!1}finally{l?X(a):Z(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return J(a,r),ne(e,a)}),(function(e){throw X(a),e})):(J(a,r),ne(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===be&&(o=void 0),t.D&&W(o,!0),r){var u=[],h=[];Q("Patches").M(e,o,u,h),r(u,h)}return o}O(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,s=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,i]})):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){D(e)||O(8),R(e)&&(e=he(e));var t=ee(this),n=ue(this,e,void 0);return n[Ee].C=!0,Z(t),n},t.finishDraft=function(e,t){var n=(e&&e[Ee]).A;return J(n,t),ne(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!we&&O(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Q("Patches").$;return R(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ae=new Ne,Pe=Ae.produce;Ae.produceWithPatches.bind(Ae),Ae.setAutoFreeze.bind(Ae),Ae.setUseProxies.bind(Ae),Ae.applyPatches.bind(Ae),Ae.createDraft.bind(Ae),Ae.finishDraft.bind(Ae);const Oe=Pe;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function De(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:String(t)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){var r,i,s;r=e,i=t,s=n[t],(i=De(i))in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ue="function"===typeof Symbol&&Symbol.observable||"@@observable",je=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ve={INIT:"@@redux/INIT"+je(),REPLACE:"@@redux/REPLACE"+je(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+je()}};function ze(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Be(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Fe(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Fe(1));return n(Be)(e,t)}if("function"!==typeof e)throw new Error(Fe(2));var i=e,s=t,o=[],a=o,c=!1;function l(){a===o&&(a=o.slice())}function u(){if(c)throw new Error(Fe(3));return s}function h(e){if("function"!==typeof e)throw new Error(Fe(4));if(c)throw new Error(Fe(5));var t=!0;return l(),a.push(e),function(){if(t){if(c)throw new Error(Fe(6));t=!1,l();var n=a.indexOf(e);a.splice(n,1),o=null}}}function d(e){if(!ze(e))throw new Error(Fe(7));if("undefined"===typeof e.type)throw new Error(Fe(8));if(c)throw new Error(Fe(9));try{c=!0,s=i(s,e)}finally{c=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:Ve.INIT}),(r={dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Fe(10));i=e,d({type:Ve.REPLACE})}})[Ue]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Fe(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Ue]=function(){return this},e},r}function qe(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Ve.INIT}))throw new Error(Fe(12));if("undefined"===typeof n(void 0,{type:Ve.PROBE_UNKNOWN_ACTION()}))throw new Error(Fe(13))}))}(n)}catch(a){s=a}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var c=o[a],l=n[c],u=e[c],h=l(u,t);if("undefined"===typeof h){t&&t.type;throw new Error(Fe(14))}i[c]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function We(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Fe(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=Ke.apply(void 0,s)(n.dispatch),Me(Me({},n),{},{dispatch:r})}}}function Ge(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var He=Ge();He.withExtraArgument=Ge;const Qe=He;var $e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Je=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Xe=Object.defineProperty,Ze=Object.defineProperties,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,it=function(e,t,n){return t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},st=function(e,t){for(var n in t||(t={}))nt.call(t,n)&&it(e,n,t[n]);if(tt)for(var r=0,i=tt(t);r<i.length;r++){n=i[r];rt.call(t,n)&&it(e,n,t[n])}return e},ot=function(e,t){return Ze(e,et(t))},at=function(e,t,n){return new Promise((function(r,i){var s=function(e){try{a(n.next(e))}catch(t){i(t)}},o=function(e){try{a(n.throw(e))}catch(t){i(t)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(s,o)};a((n=n.apply(e,t)).next())}))},ct="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Ke:Ke.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function lt(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function ut(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return st(st({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var ht=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return $e(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Je([void 0],e[0].concat(this)))):new(t.bind.apply(t,Je([void 0],e.concat(this))))},t}(Array),dt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return $e(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Je([void 0],e[0].concat(this)))):new(t.bind.apply(t,Je([void 0],e.concat(this))))},t}(Array);function ft(e){return D(e)?Oe(e,(function(){})):e}function pt(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new ht);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Qe.withExtraArgument(n.extraArgument)):r.push(Qe));0;return r}(e)}}function mt(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var gt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},yt=["name","message","stack","code"],vt=function(e,t){this.payload=e,this.meta=t},wt=function(e,t){this.payload=e,this.meta=t},bt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=yt;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},_t=function(){function e(e,t,n){var r=ut(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:ot(st({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=ut(e+"/pending",(function(e,t,n){return{payload:void 0,meta:ot(st({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),s=ut(e+"/rejected",(function(e,t,r,i,s){return{payload:i,error:(n&&n.serializeError||bt)(e||"Rejected"),meta:ot(st({},s||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(a,c,l){var u,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):gt(),d=new o;function f(e){u=e,d.abort()}var p=function(){return at(this,null,(function(){var o,p,m,g,y,v;return Ye(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),g=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:c,extra:l}),null===(b=g)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,g];case 1:g=w.sent(),w.label=2;case 2:if(!1===g||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:u||"Aborted"})}))})),a(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:c,extra:l}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:c,extra:l,requestId:h,signal:d.signal,abort:f,rejectWithValue:function(e,t){return new vt(e,t)},fulfillWithValue:function(e,t){return new wt(e,t)}})).then((function(t){if(t instanceof vt)throw t;return t instanceof wt?r(t.payload,h,e,t.meta):r(t,h,e)}))])];case 3:return m=w.sent(),[3,5];case 4:return v=w.sent(),m=v instanceof vt?s(null,h,e,v.payload,v.meta):s(v,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&s.match(m)&&m.meta.condition||a(m),[2,m]}var b}))}))}();return Object.assign(p,{abort:f,requestId:h,arg:e,unwrap:function(){return p.then(Et)}})}}),{pending:i,rejected:s,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Et(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var St="listenerMiddleware";ut(St+"/add"),ut(St+"/removeAll"),ut(St+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var It,Tt=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Tt(10);fe();const kt=_t("counter/fetchCount",(async e=>{const t=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((t=>setTimeout((()=>t({data:e})),500)))}(e);return t.data})),Ct=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ft(e.initialState),i=e.reducers||{},s=Object.keys(i),o={},a={},c={};function l(){var t="function"===typeof e.extraReducers?mt(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,s=t[1],o=void 0===s?[]:s,c=t[2],l=void 0===c?void 0:c,u=st(st({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,s="function"===typeof t?mt(t):[t,n,r],o=s[0],a=s[1],c=s[2];if(function(e){return"function"===typeof e}(e))i=function(){return ft(e())};else{var l=ft(e);i=function(){return l}}function u(e,t){void 0===e&&(e=i());var n=Je([o[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(R(e))return void 0===(r=n(e,t))?e:r;if(D(e))return Oe(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return u.getInitialState=i,u}(r,(function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}l&&e.addDefaultCase(l)}))}return s.forEach((function(e){var n,r,s=i[e],l=t+"/"+e;"reducer"in s?(n=s.reducer,r=s.prepare):n=s,o[e]=n,a[l]=n,c[e]=r?ut(l,r):ut(l)})),{name:t,reducer:function(e,t){return n||(n=l()),n(e,t)},actions:c,caseReducers:o,getInitialState:function(){return n||(n=l()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:(e,t)=>{e.user=t.payload},logout:e=>{e.user=null}},extraReducers:e=>{e.addCase(kt.pending,(e=>{e.status="loading"})).addCase(kt.fulfilled,((e,t)=>{e.status="idle",e.value+=t.payload}))}}),{login:xt,logout:Nt}=Ct.actions,At=e=>e.user.user,Pt=function(e){var t,n=pt(),r=e||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,c=r.devTools,l=void 0===c||c,u=r.preloadedState,h=void 0===u?void 0:u,d=r.enhancers,f=void 0===d?void 0:d;if("function"===typeof s)t=s;else{if(!lt(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=qe(s)}var p=a;"function"===typeof p&&(p=p(n));var m=We.apply(void 0,p),g=Ke;l&&(g=ct(st({trace:!1},"object"===typeof l&&l)));var y=new dt(m),v=y;return Array.isArray(f)?v=Je([m],f):"function"===typeof f&&(v=f(y)),Be(t,h,g.apply(void 0,v))}({reducer:{user:Ct.reducer}});function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}var Rt;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Rt||(Rt={}));const Dt="popstate";function Lt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Mt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Ft(e,t){return{usr:e.state,key:e.key,idx:t}}function Ut(e,t,n,r){return void 0===n&&(n=null),Ot({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Vt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function jt(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Vt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zt(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Rt.Pop,c=null,l=u();function u(){return(o.state||{idx:null}).idx}function h(){a=Rt.Pop;let e=u(),t=null==e?null:e-l;l=e,c&&c({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:jt(e);return Lt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==l&&(l=0,o.replaceState(Ot({},o.state,{idx:l}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Dt,h),c=e,()=>{i.removeEventListener(Dt,h),c=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Rt.Push;let r=Ut(f.location,e,t);n&&n(r,e),l=u()+1;let h=Ft(r,l),d=f.createHref(r);try{o.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&c&&c({action:a,location:f.location,delta:1})},replace:function(e,t){a=Rt.Replace;let r=Ut(f.location,e,t);n&&n(r,e),l=u();let i=Ft(r,l),h=f.createHref(r);o.replaceState(i,"",h),s&&c&&c({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var Bt;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Bt||(Bt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function qt(e,t,n){void 0===n&&(n="/");let r=rn(("string"===typeof t?Vt(t):t).pathname||"/",n);if(null==r)return null;let i=Kt(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=en(i[o],nn(r));return s}function Kt(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Lt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=ln([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(Lt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Kt(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:Zt(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Wt(e.path))i(e,t,r);else i(e,t)})),t}function Wt(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=Wt(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Gt=/^:[\w-]+$/,Ht=3,Qt=2,$t=1,Yt=10,Jt=-2,Xt=e=>"*"===e;function Zt(e,t){let n=e.split("/"),r=n.length;return n.some(Xt)&&(r+=Jt),t&&(r+=Qt),n.filter((e=>!Xt(e))).reduce(((e,t)=>e+(Gt.test(t)?Ht:""===t?$t:Yt)),r)}function en(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=tn({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:ln([i,l.pathname]),pathnameBase:un(ln([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=ln([i,l.pathnameBase]))}return s}function tn(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Mt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return Mt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function nn(e){try{return decodeURI(e)}catch(t){return Mt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function rn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function sn(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function on(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function an(e,t){let n=on(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function cn(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Vt(e):(i=Ot({},e),Lt(!i.pathname||!i.pathname.includes("?"),sn("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),sn("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),sn("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Vt(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:hn(r),hash:dn(i)}}(i,s),l=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!u||(c.pathname+="/"),c}const ln=e=>e.join("/").replace(/\/\/+/g,"/"),un=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",dn=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function fn(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const pn=["post","put","patch","delete"],mn=(new Set(pn),["get",...pn]);new Set(mn),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gn.apply(this,arguments)}const yn=r.createContext(null);const vn=r.createContext(null);const wn=r.createContext(null);const bn=r.createContext(null);const _n=r.createContext({outlet:null,matches:[],isDataRoute:!1});const En=r.createContext(null);function Sn(){return null!=r.useContext(bn)}function In(){return Sn()||Lt(!1),r.useContext(bn).location}function Tn(e){r.useContext(wn).static||r.useLayoutEffect(e)}function kn(){let{isDataRoute:e}=r.useContext(_n);return e?function(){let{router:e}=Ln(Rn.UseNavigateStable),t=Fn(Dn.UseNavigateStable),n=r.useRef(!1);Tn((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,gn({fromRouteId:t},i)))}),[e,t]);return i}():function(){Sn()||Lt(!1);let e=r.useContext(yn),{basename:t,future:n,navigator:i}=r.useContext(wn),{matches:s}=r.useContext(_n),{pathname:o}=In(),a=JSON.stringify(an(s,n.v7_relativeSplatPath)),c=r.useRef(!1);return Tn((()=>{c.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let s=cn(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:ln([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function Cn(e,t,n,i){Sn()||Lt(!1);let{navigator:s}=r.useContext(wn),{matches:o}=r.useContext(_n),a=o[o.length-1],c=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=In();if(t){var d;let e="string"===typeof t?Vt(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||Lt(!1),u=e}else u=h;let f=u.pathname||"/",p=qt(e,{pathname:"/"===l?f:f.slice(l.length)||"/"});let m=On(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ln([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ln([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,i);return t&&m?r.createElement(bn.Provider,{value:{location:gn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Rt.Pop}},m):m}function xn(){let e=function(){var e;let t=r.useContext(En),n=Mn(Dn.UseRouteError),i=Fn(Dn.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=fn(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const Nn=r.createElement(xn,null);class An extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(_n.Provider,{value:this.props.routeContext},r.createElement(En.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pn(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(yn);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(_n.Provider,{value:t},i)}function On(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||Lt(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||Nn,l&&(u<0&&0===s?(p="route-fallback",!1||Un[p]||(Un[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Pn,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(An,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var Rn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Rn||{}),Dn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dn||{});function Ln(e){let t=r.useContext(yn);return t||Lt(!1),t}function Mn(e){let t=r.useContext(vn);return t||Lt(!1),t}function Fn(e){let t=function(e){let t=r.useContext(_n);return t||Lt(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Lt(!1),n.route.id}const Un={};i.startTransition;function jn(e){Lt(!1)}function Vn(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Rt.Pop,navigator:o,static:a=!1,future:c}=e;Sn()&&Lt(!1);let l=t.replace(/^\/*/,"/"),u=r.useMemo((()=>({basename:l,navigator:o,static:a,future:gn({v7_relativeSplatPath:!1},c)})),[l,c,o,a]);"string"===typeof i&&(i=Vt(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=r.useMemo((()=>{let e=rn(h,l);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}}),[l,h,d,f,p,m,s]);return null==g?null:r.createElement(wn.Provider,{value:u},r.createElement(bn.Provider,{children:n,value:g}))}function zn(e){let{children:t,location:n}=e;return Cn(Bn(t),n)}new Promise((()=>{}));r.Component;function Bn(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Bn(e.props.children,s));e.type!==jn&&Lt(!1),e.props.index&&e.props.children&&Lt(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Bn(e.props.children,s)),n.push(o)})),n}var qn=n(184);const Kn=function(){const[e,t]=(0,r.useState)(!1),n=kn(),i=()=>{window.scrollY>100?t(!0):t(!1)};return(0,r.useEffect)((()=>(window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i))),[]),(0,qn.jsx)("div",{className:"nav ".concat(e&&"nav_Black"),children:(0,qn.jsxs)("div",{className:"nav_contents",children:[(0,qn.jsx)("img",{onClick:()=>n("/"),className:"nav_logo",src:"https://i.ibb.co/12n5SJd/least.png",alt:"net flic logo"}),(0,qn.jsx)("img",{onClick:()=>n("/profile"),className:"nav_avatar",src:"https://avatarfiles.alphacoders.com/320/320993.jpg"})]})})};function Wn(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gn}=Object.prototype,{getPrototypeOf:Hn}=Object,Qn=($n=Object.create(null),e=>{const t=Gn.call(e);return $n[t]||($n[t]=t.slice(8,-1).toLowerCase())});var $n;const Yn=e=>(e=e.toLowerCase(),t=>Qn(t)===e),Jn=e=>t=>typeof t===e,{isArray:Xn}=Array,Zn=Jn("undefined");const er=Yn("ArrayBuffer");const tr=Jn("string"),nr=Jn("function"),rr=Jn("number"),ir=e=>null!==e&&"object"===typeof e,sr=e=>{if("object"!==Qn(e))return!1;const t=Hn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},or=Yn("Date"),ar=Yn("File"),cr=Yn("Blob"),lr=Yn("FileList"),ur=Yn("URLSearchParams");function hr(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Xn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function dr(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const fr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,pr=e=>!Zn(e)&&e!==fr;const mr=(gr="undefined"!==typeof Uint8Array&&Hn(Uint8Array),e=>gr&&e instanceof gr);var gr;const yr=Yn("HTMLFormElement"),vr=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),wr=Yn("RegExp"),br=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};hr(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},_r="abcdefghijklmnopqrstuvwxyz",Er="0123456789",Sr={DIGIT:Er,ALPHA:_r,ALPHA_DIGIT:_r+_r.toUpperCase()+Er};const Ir=Yn("AsyncFunction"),Tr={isArray:Xn,isArrayBuffer:er,isBuffer:function(e){return null!==e&&!Zn(e)&&null!==e.constructor&&!Zn(e.constructor)&&nr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||nr(e.append)&&("formdata"===(t=Qn(e))||"object"===t&&nr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&er(e.buffer),t},isString:tr,isNumber:rr,isBoolean:e=>!0===e||!1===e,isObject:ir,isPlainObject:sr,isUndefined:Zn,isDate:or,isFile:ar,isBlob:cr,isRegExp:wr,isFunction:nr,isStream:e=>ir(e)&&nr(e.pipe),isURLSearchParams:ur,isTypedArray:mr,isFileList:lr,forEach:hr,merge:function e(){const{caseless:t}=pr(this)&&this||{},n={},r=(r,i)=>{const s=t&&dr(n,i)||i;sr(n[s])&&sr(r)?n[s]=e(n[s],r):sr(r)?n[s]=e({},r):Xn(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&hr(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return hr(t,((t,r)=>{n&&nr(t)?e[r]=Wn(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Hn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Qn,kindOfTest:Yn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Xn(e))return e;let t=e.length;if(!rr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:yr,hasOwnProperty:vr,hasOwnProp:vr,reduceDescriptors:br,freezeMethods:e=>{br(e,((t,n)=>{if(nr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];nr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Xn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:dr,global:fr,isContextDefined:pr,ALPHABET:Sr,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&nr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ir(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Xn(e)?[]:{};return hr(e,((e,t)=>{const s=n(e,r+1);!Zn(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Ir,isThenable:e=>e&&(ir(e)||nr(e))&&nr(e.then)&&nr(e.catch)};function kr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Tr.inherits(kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Cr=kr.prototype,xr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{xr[e]={value:e}})),Object.defineProperties(kr,xr),Object.defineProperty(Cr,"isAxiosError",{value:!0}),kr.from=(e,t,n,r,i,s)=>{const o=Object.create(Cr);return Tr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),kr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Nr=kr;function Ar(e){return Tr.isPlainObject(e)||Tr.isArray(e)}function Pr(e){return Tr.endsWith(e,"[]")?e.slice(0,-2):e}function Or(e,t,n){return e?e.concat(t).map((function(e,t){return e=Pr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Rr=Tr.toFlatObject(Tr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Dr=function(e,t,n){if(!Tr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Tr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Tr.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Tr.isSpecCompliantForm(t);if(!Tr.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Tr.isDate(e))return e.toISOString();if(!a&&Tr.isBlob(e))throw new Nr("Blob is not supported. Use a Buffer instead.");return Tr.isArrayBuffer(e)||Tr.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(Tr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Tr.isArray(e)&&function(e){return Tr.isArray(e)&&!e.some(Ar)}(e)||(Tr.isFileList(e)||Tr.endsWith(n,"[]"))&&(a=Tr.toArray(e)))return n=Pr(n),a.forEach((function(e,r){!Tr.isUndefined(e)&&null!==e&&t.append(!0===o?Or([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!Ar(e)||(t.append(Or(i,n,s),c(e)),!1)}const u=[],h=Object.assign(Rr,{defaultVisitor:l,convertValue:c,isVisitable:Ar});if(!Tr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Tr.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Tr.forEach(n,(function(n,s){!0===(!(Tr.isUndefined(n)||null===n)&&i.call(t,n,Tr.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function Lr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Mr(e,t){this._pairs=[],e&&Dr(e,this,t)}const Fr=Mr.prototype;Fr.append=function(e,t){this._pairs.push([e,t])},Fr.toString=function(e){const t=e?function(t){return e.call(this,t,Lr)}:Lr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ur=Mr;function jr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vr(e,t,n){if(!t)return e;const r=n&&n.encode||jr,i=n&&n.serialize;let s;if(s=i?i(t,n):Tr.isURLSearchParams(t)?t.toString():new Ur(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const zr=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Tr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Br={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ur,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Kr="undefined"!==typeof window&&"undefined"!==typeof document,Wr=(Gr="undefined"!==typeof navigator&&navigator.product,Kr&&["ReactNative","NativeScript","NS"].indexOf(Gr)<0);var Gr;const Hr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Qr={...e,...qr};const $r=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&Tr.isArray(r)?r.length:s,a)return Tr.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&Tr.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&Tr.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(Tr.isFormData(e)&&Tr.isFunction(e.entries)){const n={};return Tr.forEachEntry(e,((e,r)=>{t(function(e){return Tr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Yr={transitional:Br,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Tr.isObject(e);i&&Tr.isHTMLForm(e)&&(e=new FormData(e));if(Tr.isFormData(e))return r&&r?JSON.stringify($r(e)):e;if(Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e))return e;if(Tr.isArrayBufferView(e))return e.buffer;if(Tr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Dr(e,new Qr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Qr.isNode&&Tr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Tr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Dr(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Tr.isString(e))try{return(t||JSON.parse)(e),Tr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Yr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Tr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw Nr.from(i,Nr.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qr.classes.FormData,Blob:Qr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tr.forEach(["delete","get","head","post","put","patch"],(e=>{Yr.headers[e]={}}));const Jr=Yr,Xr=Tr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zr=Symbol("internals");function ei(e){return e&&String(e).trim().toLowerCase()}function ti(e){return!1===e||null==e?e:Tr.isArray(e)?e.map(ti):String(e)}function ni(e,t,n,r,i){return Tr.isFunction(r)?r.call(this,t,n):(i&&(t=n),Tr.isString(t)?Tr.isString(r)?-1!==t.indexOf(r):Tr.isRegExp(r)?r.test(t):void 0:void 0)}class ri{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=ei(t);if(!i)throw new Error("header name must be a non-empty string");const s=Tr.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=ti(e))}const s=(e,t)=>Tr.forEach(e,((e,n)=>i(e,n,t)));return Tr.isPlainObject(e)||e instanceof this.constructor?s(e,t):Tr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Xr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=ei(e)){const n=Tr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Tr.isFunction(t))return t.call(this,e,n);if(Tr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ei(e)){const n=Tr.findKey(this,e);return!(!n||void 0===this[n]||t&&!ni(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=ei(e)){const i=Tr.findKey(n,e);!i||t&&!ni(0,n[i],i,t)||(delete n[i],r=!0)}}return Tr.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!ni(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Tr.forEach(this,((r,i)=>{const s=Tr.findKey(n,i);if(s)return t[s]=ti(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ti(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Tr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Tr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Zr]=this[Zr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ei(e);t[r]||(!function(e,t){const n=Tr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Tr.isArray(e)?e.forEach(r):r(e),this}}ri.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Tr.reduceDescriptors(ri.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Tr.freezeMethods(ri);const ii=ri;function si(e,t){const n=this||Jr,r=t||n,i=ii.from(r.headers);let s=r.data;return Tr.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function oi(e){return!(!e||!e.__CANCEL__)}function ai(e,t,n){Nr.call(this,null==e?"canceled":e,Nr.ERR_CANCELED,t,n),this.name="CanceledError"}Tr.inherits(ai,Nr,{__CANCEL__:!0});const ci=ai;const li=Qr.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Tr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Tr.isString(r)&&o.push("path="+r),Tr.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ui(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const hi=Qr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Tr.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const di=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];i||(i=c),n[s]=a,r[s]=c;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}};function fi(e,t){let n=0;const r=di(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const pi={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=ii.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(Tr.isFormData(r))if(Qr.hasStandardBrowserEnv||Qr.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=ui(e.baseURL,e.url);function d(){if(!u)return;const r=ii.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Nr("Request failed with status code "+n.status,[Nr.ERR_BAD_REQUEST,Nr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Vr(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new Nr("Request aborted",Nr.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Nr("Network Error",Nr.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Br;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Nr(t,r.clarifyTimeoutError?Nr.ETIMEDOUT:Nr.ECONNABORTED,e,u)),u=null},Qr.hasStandardBrowserEnv&&(c&&Tr.isFunction(c)&&(c=c(e)),c||!1!==c&&hi(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&li.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&Tr.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Tr.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",fi(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",fi(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new ci(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===Qr.protocols.indexOf(f)?n(new Nr("Unsupported protocol "+f+":",Nr.ERR_BAD_REQUEST,e)):u.send(r||null)}))}};Tr.forEach(pi,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const mi=e=>"- ".concat(e),gi=e=>Tr.isFunction(e)||null===e||!1===e,yi=e=>{e=Tr.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!gi(n)&&(r=pi[(t=String(n)).toLowerCase()],void 0===r))throw new Nr("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(mi).join("\n"):" "+mi(e[0]):"as no adapter specified";throw new Nr("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function vi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ci(null,e)}function wi(e){vi(e),e.headers=ii.from(e.headers),e.data=si.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return yi(e.adapter||Jr.adapter)(e).then((function(t){return vi(e),t.data=si.call(e,e.transformResponse,t),t.headers=ii.from(t.headers),t}),(function(t){return oi(t)||(vi(e),t&&t.response&&(t.response.data=si.call(e,e.transformResponse,t.response),t.response.headers=ii.from(t.response.headers))),Promise.reject(t)}))}const bi=e=>e instanceof ii?e.toJSON():e;function _i(e,t){t=t||{};const n={};function r(e,t,n){return Tr.isPlainObject(e)&&Tr.isPlainObject(t)?Tr.merge.call({caseless:n},e,t):Tr.isPlainObject(t)?Tr.merge({},t):Tr.isArray(t)?t.slice():t}function i(e,t,n){return Tr.isUndefined(t)?Tr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!Tr.isUndefined(t))return r(void 0,t)}function o(e,t){return Tr.isUndefined(t)?Tr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(bi(e),bi(t),!0)};return Tr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);Tr.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Ei="1.6.5",Si={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Si[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ii={};Si.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Nr(r(i," has been removed"+(t?" in "+t:"")),Nr.ERR_DEPRECATED);return t&&!Ii[i]&&(Ii[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const Ti={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Nr("options must be an object",Nr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Nr("option "+s+" must be "+n,Nr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Nr("Unknown option "+s,Nr.ERR_BAD_OPTION)}},validators:Si},ki=Ti.validators;class Ci{constructor(e){this.defaults=e,this.interceptors={request:new zr,response:new zr}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=_i(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Ti.assertOptions(n,{silentJSONParsing:ki.transitional(ki.boolean),forcedJSONParsing:ki.transitional(ki.boolean),clarifyTimeoutError:ki.transitional(ki.boolean)},!1),null!=r&&(Tr.isFunction(r)?t.paramsSerializer={serialize:r}:Ti.assertOptions(r,{encode:ki.function,serialize:ki.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&Tr.merge(i.common,i[t.method]);i&&Tr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=ii.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[wi.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{l=wi.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return Vr(ui((e=_i(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Tr.forEach(["delete","get","head","options"],(function(e){Ci.prototype[e]=function(t,n){return this.request(_i(n||{},{method:e,url:t,data:(n||{}).data}))}})),Tr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(_i(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ci.prototype[e]=t(),Ci.prototype[e+"Form"]=t(!0)}));const xi=Ci;class Ni{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new ci(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new Ni((function(t){e=t}));return{token:t,cancel:e}}}const Ai=Ni;const Pi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pi).forEach((e=>{let[t,n]=e;Pi[n]=t}));const Oi=Pi;const Ri=function e(t){const n=new xi(t),r=Wn(xi.prototype.request,n);return Tr.extend(r,xi.prototype,n,{allOwnKeys:!0}),Tr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(_i(t,n))},r}(Jr);Ri.Axios=xi,Ri.CanceledError=ci,Ri.CancelToken=Ai,Ri.isCancel=oi,Ri.VERSION=Ei,Ri.toFormData=Dr,Ri.AxiosError=Nr,Ri.Cancel=Ri.CanceledError,Ri.all=function(e){return Promise.all(e)},Ri.spread=function(e){return function(t){return e.apply(null,t)}},Ri.isAxiosError=function(e){return Tr.isObject(e)&&!0===e.isAxiosError},Ri.mergeConfig=_i,Ri.AxiosHeaders=ii,Ri.formToJSON=e=>$r(Tr.isHTMLForm(e)?new FormData(e):e),Ri.getAdapter=yi,Ri.HttpStatusCode=Oi,Ri.default=Ri;const Di=Ri.create({baseURL:"https://api.themoviedb.org/3"}),Li="f81980ff410e46f422d64ddf3a56dddd",Mi={fetchTrending:"/trending/all/week?api_key=".concat(Li,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(Li,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(Li,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(Li,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(Li,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(Li,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(Li,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(Li,"&with_genres=99")};const Fi=function(){const[e,t]=(0,r.useState)([]);return(0,r.useEffect)((()=>{!async function(){const e=await Di.get(Mi.fetchNetflixOriginals);t(e.data.results[Math.floor(Math.random()*e.data.results.length-1)])}()}),[]),console.log(e),(0,qn.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===e||void 0===e?void 0:e.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,qn.jsxs)("div",{className:"banner_container",children:[(0,qn.jsx)("h1",{className:"banner_title",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.original_name)}),(0,qn.jsxs)("div",{className:"banner_buttons",children:[(0,qn.jsx)("button",{className:"banner_button",children:"play"}),(0,qn.jsx)("button",{className:"banner_button",children:"My List"})]}),(0,qn.jsx)("h1",{className:"banner__descriptpion",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+".......":e}(null===e||void 0===e?void 0:e.overview,150)})]}),(0,qn.jsx)("div",{className:"banner_fadebutton"})]})};const Ui=function(e){let{title:t,fetchUrl:n,isLargerRow:i=!1}=e;const[s,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{!async function(){const e=await Di.get(n);o(e.data.results)}()}),[n]),(0,qn.jsxs)("div",{className:"row",children:[(0,qn.jsx)("h2",{children:t}),(0,qn.jsx)("div",{className:"row_posters",children:s.map((e=>(i&&e.poster_path||!i&&e.backdrop_path)&&(0,qn.jsx)("img",{className:"row_poster ".concat(i&&"row_posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(i?e.poster_path:e.backdrop_path),alt:e.name},e.id)))})]})};const ji=function(){return(0,qn.jsxs)("div",{className:"homescreen",children:[(0,qn.jsx)(Kn,{}),(0,qn.jsx)(Fi,{}),(0,qn.jsx)(Ui,{title:"NETFLIX ORIGINALS",fetchUrl:Mi.fetchNetflixOriginals,isLargerRow:!0}),(0,qn.jsx)(Ui,{title:"Trending Now",fetchUrl:Mi.fetchTrending}),(0,qn.jsx)(Ui,{title:"Top Rated",fetchUrl:Mi.fetchTopRated}),(0,qn.jsx)(Ui,{title:"Action Movies",fetchUrl:Mi.fetchActionMovies}),(0,qn.jsx)(Ui,{title:"Comedy Movies",fetchUrl:Mi.fetchComedyMovies}),(0,qn.jsx)(Ui,{title:"Horror Movies",fetchUrl:Mi.fetchHorrorMovies}),(0,qn.jsx)(Ui,{title:"Romance Movies",fetchUrl:Mi.fetchRomanceMovies}),(0,qn.jsx)(Ui,{title:"Documentaries",fetchUrl:Mi.fetchDocumentaries})]})},Vi=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},zi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vi(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Bi;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Bi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qi=function(e){return function(e){const t=Vi(e);return zi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ki=function(e){try{return zi.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Wi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Wi(e[n],t[n]));return e}const Gi=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Hi=()=>{try{return Gi()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Netflix_clone-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ki(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Qi=()=>{var e;return null===(e=Hi())||void 0===e?void 0:e.config};class $i{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Yi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ji(){var e;const t=null===(e=Hi())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Xi(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Zi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function es(){const e=Yi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ts(){return!Ji()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ns(){try{return"object"===typeof indexedDB}catch(e){return!1}}class rs extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,is.prototype.create)}}class is{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ss,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new rs(n,s,t)}}const ss=/\{\$([^}]+)}/g;function os(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function as(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(cs(n)&&cs(s)){if(!as(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function cs(e){return null!==e&&"object"===typeof e}function ls(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function us(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function hs(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ds(e,t){const n=new fs(e,t);return n.subscribe.bind(n)}class fs{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ps),void 0===r.error&&(r.error=ps),void 0===r.complete&&(r.complete=ps);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ps(){}function ms(e){return e&&e._delegate?e._delegate:e}class gs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ys="[DEFAULT]";class vs{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new $i;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ys?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys;return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ws{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vs(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const bs=[];var _s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_s||(_s={}));const Es={debug:_s.DEBUG,verbose:_s.VERBOSE,info:_s.INFO,warn:_s.WARN,error:_s.ERROR,silent:_s.SILENT},Ss=_s.INFO,Is={[_s.DEBUG]:"log",[_s.VERBOSE]:"log",[_s.INFO]:"info",[_s.WARN]:"warn",[_s.ERROR]:"error"},Ts=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Is[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ks{constructor(e){this.name=e,this._logLevel=Ss,this._logHandler=Ts,this._userLogHandler=null,bs.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Es[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_s.DEBUG,...t),this._logHandler(this,_s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_s.VERBOSE,...t),this._logHandler(this,_s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_s.INFO,...t),this._logHandler(this,_s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_s.WARN,...t),this._logHandler(this,_s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_s.ERROR,...t),this._logHandler(this,_s.ERROR,...t)}}const Cs=(e,t)=>t.some((t=>e instanceof t));let xs,Ns;const As=new WeakMap,Ps=new WeakMap,Os=new WeakMap,Rs=new WeakMap,Ds=new WeakMap;let Ls={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ps.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Os.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Us(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ms(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ns||(Ns=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(js(this),n),Us(As.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Us(e.apply(js(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(js(this),t,...r);return Os.set(s,t.sort?t.sort():[t]),Us(s)}}function Fs(e){return"function"===typeof e?Ms(e):(e instanceof IDBTransaction&&function(e){if(Ps.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ps.set(e,t)}(e),Cs(e,xs||(xs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ls):e)}function Us(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Us(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&As.set(t,e)})).catch((()=>{})),Ds.set(t,e),t}(e);if(Rs.has(e))return Rs.get(e);const t=Fs(e);return t!==e&&(Rs.set(e,t),Ds.set(t,e)),t}const js=e=>Ds.get(e);const Vs=["get","getKey","getAll","getAllKeys","count"],zs=["put","add","delete","clear"],Bs=new Map;function qs(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Bs.get(t))return Bs.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=zs.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vs.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Bs.set(t,s),s}Ls=(e=>({...e,get:(t,n,r)=>qs(t,n)||e.get(t,n,r),has:(t,n)=>!!qs(t,n)||e.has(t,n)}))(Ls);class Ks{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ws="@firebase/app",Gs="0.9.26",Hs=new ks("@firebase/app"),Qs="[DEFAULT]",$s={[Ws]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ys=new Map,Js=new Map;function Xs(e,t){try{e.container.addComponent(t)}catch(n){Hs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Zs(e,t){e.container.addOrOverwriteComponent(t)}function eo(e){const t=e.name;if(Js.has(t))return Hs.debug("There were multiple attempts to register component ".concat(t,".")),!1;Js.set(t,e);for(const n of Ys.values())Xs(n,e);return!0}function to(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function no(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qs;to(e,t).clearInstance(n)}function ro(){Js.clear()}const io=new is("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class so{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gs("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}const oo="10.7.2";function ao(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Qs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw io.create("bad-app-name",{appName:String(i)});if(n||(n=Qi()),!n)throw io.create("no-options");const s=Ys.get(i);if(s){if(as(n,s.options)&&as(r,s.config))return s;throw io.create("duplicate-app",{appName:i})}const o=new ws(i);for(const c of Js.values())o.addComponent(c);const a=new so(n,r,o);return Ys.set(i,a),a}function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qs;const t=Ys.get(e);if(!t&&e===Qs&&Qi())return ao();if(!t)throw io.create("no-app",{appName:e});return t}function lo(){return Array.from(Ys.values())}async function uo(e){const t=e.name;Ys.has(t)&&(Ys.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ho(e,t,n){var r;let i=null!==(r=$s[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Hs.warn(e.join(" "))}eo(new gs("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function fo(e,t){if(null!==e&&"function"!==typeof e)throw io.create("invalid-log-argument");!function(e,t){for(const n of bs){let r=null;t&&t.level&&(r=Es[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:_s[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function po(e){var t;t=e,bs.forEach((e=>{e.setLogLevel(t)}))}const mo="firebase-heartbeat-database",go=1,yo="firebase-heartbeat-store";let vo=null;function wo(){return vo||(vo=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Us(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Us(o.result),e.oldVersion,e.newVersion,Us(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(mo,go,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(yo)}catch(n){console.warn(n)}}}).catch((e=>{throw io.create("idb-open",{originalErrorMessage:e.message})}))),vo}async function bo(e,t){try{const n=(await wo()).transaction(yo,"readwrite"),r=n.objectStore(yo);await r.put(t,_o(e)),await n.done}catch(n){if(n instanceof rs)Hs.warn(n.message);else{const e=io.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Hs.warn(e.message)}}}function _o(e){return"".concat(e.name,"!").concat(e.options.appId)}class Eo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Io(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=So();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=So(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),To(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),To(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=qi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function So(){return(new Date).toISOString().substring(0,10)}class Io{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ns()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await wo();return await t.transaction(yo).objectStore(yo).get(_o(e))}catch(t){if(t instanceof rs)Hs.warn(t.message);else{const e=io.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Hs.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bo(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function To(e){return qi(JSON.stringify({version:2,heartbeats:e})).length}var ko;ko="",eo(new gs("platform-logger",(e=>new Ks(e)),"PRIVATE")),eo(new gs("heartbeat",(e=>new Eo(e)),"PRIVATE")),ho(Ws,Gs,ko),ho(Ws,Gs,"esm2017"),ho("fire-js","");class Co{constructor(e,t){this._delegate=e,this.firebase=t,Xs(e,new gs("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),uo(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qs;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Xs(this._delegate,e)}_addOrOverwriteComponent(e){Zs(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xo=new is("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const No=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=ao(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(os(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:ho,setLogLevel:po,onLog:fo,apps:null,SDK_VERSION:oo,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(eo(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw xo.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&Wi(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!os(n,e=e||Qs))throw xo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(Co);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Wi(n,e)},createSubscribe:ds,ErrorFactory:is,deepExtend:Wi}),n}(),Ao=new ks("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ao.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ao.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Po=No;!function(e){ho("@firebase/app-compat","0.2.26",e)}();Po.registerVersion("firebase","10.7.2","app-compat");function Oo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ro={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Do="EMAIL_SIGNIN",Lo="PASSWORD_RESET",Mo="RECOVER_EMAIL",Fo="REVERT_SECOND_FACTOR_ADDITION",Uo="VERIFY_AND_CHANGE_EMAIL",jo="VERIFY_EMAIL";function Vo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Bo=Vo,qo=new is("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ko=new ks("@firebase/auth");function Wo(e){if(Ko.logLevel<=_s.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ko.error("Auth (".concat(oo,"): ").concat(e),...n)}}function Go(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Yo(e,...n)}function Ho(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Yo(e,...n)}function Qo(e,t,n){const r=Object.assign(Object.assign({},Bo()),{[t]:n});return new is("auth","Firebase",r).create(t,{appName:e.name})}function $o(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Go(e,"argument-error"),Qo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qo.create(e,...n)}function Jo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Yo(t,...r)}}function Xo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wo(t),new Error(t)}function Zo(e,t){e||Xo(t)}function ea(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ta(){return"http:"===na()||"https:"===na()}function na(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ra{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zo(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yi())||Zi()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ta()||Xi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ia(e,t){Zo(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class sa{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oa={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},aa=new ra(3e4,6e4);function ca(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function la(e,t,n,r){return ua(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ls(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),sa.fetch()(da(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ua(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},oa),t);try{const t=new pa(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ma(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ma(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ma(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ma(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qo(e,a,o);Go(e,a)}}catch(i){if(i instanceof rs)throw i;Go(e,"network-request-failed",{message:String(i)})}}async function ha(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await la(e,t,n,r,i);return"mfaPendingCredential"in s&&Go(e,"multi-factor-auth-required",{_serverResponse:s}),s}function da(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ia(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function fa(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pa{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ho(this.auth,"network-request-failed"))),aa.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ma(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ho(e,t,r);return i.customData._tokenResponse=n,i}function ga(e){return void 0!==e&&void 0!==e.getResponse}function ya(e){return void 0!==e&&void 0!==e.enterprise}class va{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fa(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function wa(e,t){return la(e,"GET","/v2/recaptchaConfig",ca(e,t))}function ba(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function _a(e){return 1e3*Number(e)}function Ea(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Wo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ki(n);return e?JSON.parse(e):(Wo("Failed to decode base64 JWT payload"),null)}catch(i){return Wo("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Sa(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof rs&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ia{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ta{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ka(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Sa(e,async function(e,t){return la(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Jo(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Oo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),c=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ta(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jo(e.idToken,"internal-error"),Jo("undefined"!==typeof e.idToken,"internal-error"),Jo("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ea(e);return Jo(t,"internal-error"),Jo("undefined"!==typeof t.exp,"internal-error"),Jo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Jo(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ua(e,{},(async()=>{const n=ls({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=da(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",sa.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ca;return n&&(Jo("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Jo("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Jo("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return Xo("not implemented")}}function xa(e,t){Jo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Na{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Oo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ia(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ta(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Sa(this,this.stsTokenManager.getToken(this.auth,e));return Jo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ms(e),r=await n.getIdToken(t),i=Ea(r);Jo(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ba(_a(i.auth_time)),issuedAtTime:ba(_a(i.iat)),expirationTime:ba(_a(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ms(e);await ka(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Jo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Na(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Jo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ka(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Sa(this,async function(e,t){return la(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Jo(v&&E,e,"internal-error");const S=Ca.fromJSON(this.name,E);Jo("string"===typeof v,e,"internal-error"),xa(u,e.name),xa(h,e.name),Jo("boolean"===typeof w,e,"internal-error"),Jo("boolean"===typeof b,e,"internal-error"),xa(d,e.name),xa(f,e.name),xa(p,e.name),xa(m,e.name),xa(g,e.name),xa(y,e.name);const I=new Na({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ca;r.updateFromServerResponse(t);const i=new Na({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ka(i),i}}const Aa=new Map;function Pa(e){Zo(e instanceof Function,"Expected a class definition");let t=Aa.get(e);return t?(Zo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Aa.set(e,t),t)}class Oa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Oa.type="NONE";const Ra=Oa;function Da(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class La{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Da(this.userKey,r.apiKey,i),this.fullPersistenceKey=Da("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Na._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new La(Pa(Ra),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Pa(Ra);const s=Da(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Na._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new La(i,e,n)):new La(i,e,n)}}function Ma(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Va(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ba(t))return"Blackberry";if(qa(t))return"Webos";if(Ua(t))return"Safari";if((t.includes("chrome/")||ja(t))&&!t.includes("edge/"))return"Chrome";if(za(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/firefox\//i.test(e)}function Ua(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ja(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/crios\//i.test(e)}function Va(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/iemobile/i.test(e)}function za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/android/i.test(e)}function Ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/blackberry/i.test(e)}function qa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/webos/i.test(e)}function Ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return Ka(e)||za(e)||qa(e)||Ba(e)||/windows phone/i.test(e)||Va(e)}function Ga(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ma(Yi());break;case"Worker":t="".concat(Ma(Yi()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(oo,"/").concat(r)}class Ha{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(Y){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Qa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class $a{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ja(this),this.idTokenSubscription=new Ja(this),this.beforeStateQueue=new Ha(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pa(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Jo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ka(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ms(e):null;return t&&Jo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Jo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Pa(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return la(e,"GET","/v2/passwordPolicy",ca(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Qa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new is("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return la(e,"POST","/v2/accounts:revokeToken",ca(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pa(e)||this._popupRedirectResolver;Jo(t,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Pa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jo(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ga(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ko.logLevel<=_s.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ko.warn("Auth (".concat(oo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ya(e){return ms(e)}class Ja{constructor(e){this.auth=e,this.observer=null,this.addObserver=ds((e=>this.observer=e))}get next(){return Jo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xa(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ho("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Za(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ec{constructor(e){this.type="recaptcha-enterprise",this.auth=Ya(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ya(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{wa(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new va(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ya(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Xa("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function tc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ec(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nc(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await tc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await tc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function rc(e,t,n){const r=Ya(e);Jo(r._canInitEmulator,r,"emulator-config-failed"),Jo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ic(t),{host:o,port:a}=function(e){const t=ic(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:sc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:sc(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ic(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class oc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xo("not implemented")}_getIdTokenResponse(e){return Xo("not implemented")}_linkToIdToken(e,t){return Xo("not implemented")}_getReauthenticationResolver(e){return Xo("not implemented")}}async function ac(e,t){return la(e,"POST","/v1/accounts:resetPassword",ca(e,t))}async function cc(e,t){return la(e,"POST","/v1/accounts:signUp",t)}async function lc(e,t){return ha(e,"POST","/v1/accounts:signInWithPassword",ca(e,t))}async function uc(e,t){return la(e,"POST","/v1/accounts:sendOobCode",ca(e,t))}async function hc(e,t){return uc(e,t)}async function dc(e,t){return uc(e,t)}class fc extends oc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new fc(e,t,"password")}static _fromEmailAndCode(e,t){return new fc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return nc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",lc);case"emailLink":return async function(e,t){return ha(e,"POST","/v1/accounts:signInWithEmailLink",ca(e,t))}(e,{email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cc);case"emailLink":return async function(e,t){return ha(e,"POST","/v1/accounts:signInWithEmailLink",ca(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pc(e,t){return ha(e,"POST","/v1/accounts:signInWithIdp",ca(e,t))}class mc extends oc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Go("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Oo(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new mc(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return pc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ls(t)}return e}}const gc={USER_NOT_FOUND:"user-not-found"};class yc extends oc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new yc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new yc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ha(e,"POST","/v1/accounts:signInWithPhoneNumber",ca(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ha(e,"POST","/v1/accounts:signInWithPhoneNumber",ca(e,t));if(n.temporaryProof)throw ma(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ha(e,"POST","/v1/accounts:signInWithPhoneNumber",ca(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),gc)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new yc({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vc{constructor(e){var t,n,r,i,s,o;const a=us(hs(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Jo(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=us(hs(e)).link,n=t?us(hs(t)).deep_link_id:null,r=us(hs(e)).deep_link_id;return(r?us(hs(r)).link:null)||r||n||t||e}(e);try{return new vc(t)}catch(n){return null}}}class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,t){return fc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vc.parseLink(t);return Jo(n,"argument-error"),fc._fromEmailAndCode(e,n.code,n.tenantId)}}wc.PROVIDER_ID="password",wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _c extends bc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ec extends _c{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Jo("providerId"in t&&"signInMethod"in t,"argument-error"),mc._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Jo(e.idToken||e.accessToken,"argument-error"),mc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ec.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ec.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Ec(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class Sc extends _c{constructor(){super("facebook.com")}static credential(e){return mc._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Sc.credential(t.oauthAccessToken)}catch(n){return null}}}Sc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sc.PROVIDER_ID="facebook.com";class Ic extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mc._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ic.credential(n,r)}catch(i){return null}}}Ic.GOOGLE_SIGN_IN_METHOD="google.com",Ic.PROVIDER_ID="google.com";class Tc extends _c{constructor(){super("github.com")}static credential(e){return mc._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Tc.credential(t.oauthAccessToken)}catch(n){return null}}}Tc.GITHUB_SIGN_IN_METHOD="github.com",Tc.PROVIDER_ID="github.com";class kc extends oc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return pc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pc(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new kc(n,i):null}static _create(e,t){return new kc(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cc extends bc{constructor(e){Jo(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Cc.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cc.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=kc.fromJSON(e);return Jo(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return kc._create(r,n)}catch(i){return null}}}class xc extends _c{constructor(){super("twitter.com")}static credential(e,t){return mc._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xc.credentialFromTaggedObject(e)}static credentialFromError(e){return xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xc.credential(n,r)}catch(i){return null}}}async function Nc(e,t){return ha(e,"POST","/v1/accounts:signUp",ca(e,t))}xc.TWITTER_SIGN_IN_METHOD="twitter.com",xc.PROVIDER_ID="twitter.com";class Ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Na._fromIdTokenResponse(e,n,r),s=Pc(n);return new Ac({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Pc(n);return new Ac({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Pc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Oc extends rs{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Oc(e,t,n,r)}}function Rc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Oc._fromErrorAndOperation(e,n,t,r);throw n}))}function Dc(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Lc(e,t){const n=ms(e);await Fc(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return la(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Dc(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Sa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ac._forOperation(e,"link",r)}async function Fc(e,t,n){await ka(t);const r=!1===e?"provider-already-linked":"no-such-provider";Jo(Dc(t.providerData).has(n)===e,t.auth,r)}async function Uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Sa(e,Rc(r,i,t,e),n);Jo(s.idToken,r,"internal-error");const o=Ea(s.idToken);Jo(o,r,"internal-error");const{sub:a}=o;return Jo(e.uid===a,r,"user-mismatch"),Ac._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Go(r,"user-mismatch"),s}}async function jc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Rc(e,r,t),s=await Ac._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Vc(e,t){return jc(Ya(e),t)}async function zc(e,t){const n=ms(e);return await Fc(!1,n,t.providerId),Mc(n,t)}async function Bc(e,t){return Uc(ms(e),t)}async function qc(e,t){const n=Ya(e),r=await async function(e,t){return ha(e,"POST","/v1/accounts:signInWithCustomToken",ca(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ac._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Kc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Wc._fromServerResponse(e,t):"totpInfo"in t?Gc._fromServerResponse(e,t):Go(e,"internal-error")}}class Wc extends Kc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Wc(t)}}class Gc extends Kc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Gc(t)}}function Hc(e,t,n){var r;Jo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Jo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Jo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Jo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Qc(e){const t=Ya(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function $c(e,t){await async function(e,t){return la(e,"POST","/v1/accounts:update",ca(e,t))}(ms(e),{oobCode:t})}async function Yc(e,t){const n=ms(e),r=await ac(n,{oobCode:t}),i=r.requestType;switch(Jo(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Jo(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Jo(r.mfaInfo,n,"internal-error");default:Jo(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Kc._fromServerResponse(Ya(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Jc(e,t){const n={identifier:t,continueUri:ta()?ea():"http://localhost"},{signinMethods:r}=await async function(e,t){return la(e,"POST","/v1/accounts:createAuthUri",ca(e,t))}(ms(e),n);return r||[]}async function Xc(e,t){const n=ms(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Hc(n.auth,r,t);const{email:i}=await async function(e,t){return uc(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Zc(e,t,n){const r=ms(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Hc(r.auth,i,n);const{email:s}=await async function(e,t){return uc(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function el(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ms(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Sa(i,async function(e,t){return la(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function tl(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Sa(e,async function(e,t){return la(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class rl extends nl{constructor(e,t,n,r){super(e,t,n),this.username=r}}class il extends nl{constructor(e,t){super(e,"facebook.com",t)}}class sl extends rl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class ol extends nl{constructor(e,t){super(e,"google.com",t)}}class al extends rl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function cl(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ea(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new nl(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new il(s,i);case"github.com":return new sl(s,i);case"google.com":return new ol(s,i);case"twitter.com":return new al(s,i,e.screenName||null);case"custom":case"anonymous":return new nl(s,null);default:return new nl(s,r,i)}}(n)}class ll{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new ll("enroll",e,t)}static _fromMfaPendingCredential(e){return new ll("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return ll._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return ll._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ul{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ya(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Kc._fromServerResponse(n,e)));Jo(r.mfaPendingCredential,n,"internal-error");const s=ll._fromMfaPendingCredential(r.mfaPendingCredential);return new ul(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ac._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Jo(t.user,n,"internal-error"),Ac._forOperation(t.user,t.operationType,o);default:Go(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class hl{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Kc._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new hl(e)}async getSession(){return ll._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Sa(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Sa(this.user,function(e,t){return la(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ca(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const dl=new WeakMap;const fl="__sak";class pl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fl,"1"),this.storage.removeItem(fl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ml extends pl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Yi();return Ua(e)||Ka(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Wa(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);es()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ml.type="LOCAL";const gl=ml;class yl extends pl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yl.type="SESSION";const vl=yl;class wl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wl.receivers=[];class _l{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=bl("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function El(){return window}function Sl(){return"undefined"!==typeof El().WorkerGlobalScope&&"function"===typeof El().importScripts}const Il="firebaseLocalStorageDb",Tl="firebaseLocalStorage",kl="fbase_key";class Cl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function xl(e,t){return e.transaction([Tl],t?"readwrite":"readonly").objectStore(Tl)}function Nl(){const e=indexedDB.open(Il,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Tl,{keyPath:kl})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Tl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Il);return new Cl(e).toPromise()}(),t(await Nl()))}))}))}async function Al(e,t,n){const r=xl(e,!0).put({[kl]:t,value:n});return new Cl(r).toPromise()}function Pl(e,t){const n=xl(e,!0).delete(t);return new Cl(n).toPromise()}class Ol{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Nl()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wl._getInstance(Sl()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _l(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nl();return await Al(e,fl,"1"),await Pl(e,fl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Al(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=xl(e,!1).get(t),r=await new Cl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pl(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=xl(e,!1).getAll();return new Cl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ol.type="LOCAL";const Rl=Ol;const Dl=1e12;class Ll{constructor(e){this.auth=e,this.counter=Dl,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ml(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Dl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Dl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Dl;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ml{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Jo(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fl=Za("rcb"),Ul=new ra(3e4,6e4);class jl{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=El().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Jo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ga(El().grecaptcha)?Promise.resolve(El().grecaptcha):new Promise(((n,r)=>{const i=El().setTimeout((()=>{r(Ho(e,"network-request-failed"))}),Ul.get());El()[Fl]=()=>{El().clearTimeout(i),delete El()[Fl];const s=El().grecaptcha;if(!s||!ga(s))return void r(Ho(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Xa("".concat("https://www.google.com/recaptcha/api.js?","?").concat(ls({onload:Fl,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ho(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=El().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Vl{async load(e){return new Ll(e)}clearedOneInstance(){}}const zl="recaptcha",Bl={theme:"light",type:"image"};class ql{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Bl);this.parameters=n,this.type=zl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ya(e),this.isInvisible="invisible"===this.parameters.size,Jo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Jo(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vl:new jl,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Jo(!this.parameters.sitekey,this.auth,"argument-error"),Jo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Jo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=El()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Jo(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Jo(ta()&&!Sl(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await la(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Jo(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Jo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kl{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=yc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Wl(e,t,n){var r;const i=await n.verify();try{let s;if(Jo("string"===typeof i,e,"argument-error"),Jo(n.type===zl,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Jo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return la(e,"POST","/v2/accounts/mfaEnrollment:start",ca(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Jo("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Jo(n,e,"missing-multi-factor-info");const o=await function(e,t){return la(e,"POST","/v2/accounts/mfaSignIn:start",ca(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return la(e,"POST","/v1/accounts:sendVerificationCode",ca(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Gl{constructor(e){this.providerId=Gl.PROVIDER_ID,this.auth=Ya(e)}verifyPhoneNumber(e,t){return Wl(this.auth,e,ms(t))}static credential(e,t){return yc._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Gl.credentialFromTaggedObject(t)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?yc._fromTokenResponse(n,r):null}}function Hl(e,t){return t?Pa(t):(Jo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Gl.PROVIDER_ID="phone",Gl.PHONE_SIGN_IN_METHOD="phone";class Ql extends oc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $l(e){return jc(e.auth,new Ql(e),e.bypassAuthState)}function Yl(e){const{auth:t,user:n}=e;return Jo(n,t,"internal-error"),Uc(n,new Ql(e),e.bypassAuthState)}async function Jl(e){const{auth:t,user:n}=e;return Jo(n,t,"internal-error"),Mc(n,new Ql(e),e.bypassAuthState)}class Xl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $l;case"linkViaPopup":case"linkViaRedirect":return Jl;case"reauthViaPopup":case"reauthViaRedirect":return Yl;default:Go(this.auth,"internal-error")}}resolve(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zl=new ra(2e3,1e4);class eu extends Xl{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,eu.currentPopupAction&&eu.currentPopupAction.cancel(),eu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jo(e,this.auth,"internal-error"),e}async onExecution(){Zo(1===this.filter.length,"Popup operations only handle one event");const e=bl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ho(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ho(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Zl.get())};e()}}eu.currentPopupAction=null;const tu="pendingRedirect",nu=new Map;class ru extends Xl{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=nu.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=au(t),r=ou(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}nu.set(this.auth._key(),e)}return this.bypassAuthState||nu.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function iu(e,t){return ou(e)._set(au(t),"true")}function su(e,t){nu.set(e._key(),t)}function ou(e){return Pa(e._redirectPersistence)}function au(e){return Da(tu,e.config.apiKey,e.name)}function cu(e,t,n){return async function(e,t,n){const r=Ya(e);$o(e,t,bc),await r._initializationPromise;const i=Hl(r,n);return await iu(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function lu(e,t,n){return async function(e,t,n){const r=ms(e);$o(r.auth,t,bc),await r.auth._initializationPromise;const i=Hl(r.auth,n);await iu(i,r.auth);const s=await du(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function uu(e,t,n){return async function(e,t,n){const r=ms(e);$o(r.auth,t,bc),await r.auth._initializationPromise;const i=Hl(r.auth,n);await Fc(!1,r,t.providerId),await iu(i,r.auth);const s=await du(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function hu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Ya(e),i=Hl(r,t),s=new ru(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function du(e){const t=bl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class fu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!mu(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ho(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pu(e))}saveEventToCache(e){this.cachedEventUids.add(pu(e)),this.lastProcessedEventTime=Date.now()}}function pu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function mu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function gu(e){return la(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const yu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vu=/^https?/;function wu(e){const t=ea(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!vu.test(n))return!1;if(yu.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bu=new ra(3e4,6e4);function _u(){const e=El().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Eu=null;function Su(e){return Eu=Eu||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){_u(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_u(),n(Ho(e,"network-request-failed"))},timeout:bu.get()})}if(null===(i=null===(r=El().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=El().gapi)||void 0===s?void 0:s.load)){const t=Za("iframefcb");return El()[t]=()=>{gapi.load?o():n(Ho(e,"network-request-failed"))},Xa("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Eu=null,e}))}(e),Eu}const Iu=new ra(5e3,15e3),Tu="__/auth/iframe",ku="emulator/auth/iframe",Cu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nu(e){const t=e.config;Jo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ia(t,ku):"https://".concat(e.config.authDomain,"/").concat(Tu),r={apiKey:t.apiKey,appName:e.name,v:oo},i=xu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(ls(r).slice(1))}const Au={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ou(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Au),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Yi().toLowerCase();n&&(a=ja(l)?"_blank":n),Fa(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ka(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Pu(null);const h=window.open(t||"",a,u);Jo(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Pu(h)}const Ru="__/auth/handler",Du="emulator/auth/handler",Lu=encodeURIComponent("fac");async function Mu(e,t,n,r,i,s){Jo(e.config.authDomain,e,"auth-domain-config-required"),Jo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:oo,eventId:i};if(t instanceof bc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof _c){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Lu,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ru);return ia(t,Du)}(e),"?").concat(ls(a).slice(1)).concat(l)}const Fu="webStorageSupport";const Uu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vl,this._completeRedirectFn=hu,this._overrideRedirectResult=su}async _openPopup(e,t,n,r){var i;Zo(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ou(e,await Mu(e,t,n,ea(),r),bl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){El().location.href=e}(await Mu(e,t,n,ea(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zo(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Su(e),n=El().gapi;return Jo(n,e,"internal-error"),t.open({where:document.body,url:Nu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cu,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ho(e,"network-request-failed"),s=El().setTimeout((()=>{r(i)}),Iu.get());function o(){El().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new fu(e);return t.register("authEvent",(t=>{Jo(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fu,{type:Fu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Fu];void 0!==i&&t(!!i),Go(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await gu(e);for(const r of t)try{if(wu(r))return}catch(n){}Go(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wa()||Ua()||Ka()}};class ju{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Xo("unexpected MultiFactorSessionType")}}}class Vu extends ju{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Vu(e)}_finalizeEnroll(e,t,n){return function(e,t){return la(e,"POST","/v2/accounts/mfaEnrollment:finalize",ca(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return la(e,"POST","/v2/accounts/mfaSignIn:finalize",ca(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zu{constructor(){}static assertion(e){return Vu._fromCredential(e)}}zu.FACTOR_ID="phone";var Bu="@firebase/auth",qu="1.5.1";class Ku{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Jo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Hi())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Wu;function Gu(){return window}Wu="Browser",eo(new gs("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Jo(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:Wu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ga(Wu)},l=new $a(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pa);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),eo(new gs("auth-internal",(e=>(e=>new Ku(e))(Ya(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ho(Bu,qu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Wu)),ho(Bu,qu,"esm2017");async function Hu(e,t,n){var r;const{BuildInfo:i}=Gu();Zo(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Zo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ka()?o.ibi=i.packageName:za()?o.apn=i.packageName:Go(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Mu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Qu(e){const{cordova:t}=Gu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const $u=20;class Yu extends fu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ju(e){const t=await eh()._get(th(e));return t&&await eh()._remove(th(e)),t}function Xu(e,t){var n,r;const i=function(e){const t=nh(e),n=t.link?decodeURIComponent(t.link):void 0,r=nh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return nh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=nh(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ho(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Zu(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$u;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function eh(){return Pa(gl)}function th(e){return Da("authEvent",e.config.apiKey,e.name)}function nh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return us(n.join("?"))}const rh=class{constructor(){this._redirectPersistence=vl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hu,this._overrideRedirectResult=su}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Yu(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Go(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=Gu();Jo("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Jo("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Jo("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jo("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Jo("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),nu.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Zu(),postBody:null,tenantId:e.tenantId,error:Ho(e,"no-auth-event")}}(e,n,r);await function(e,t){return eh()._set(th(e),t)}(e,s);const o=await Hu(e,s,t);return async function(e,t,n){const{cordova:r}=Gu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Ho(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),za()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Qu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Gu(),n={};Ka()?n.iosBundleId=t.packageName:za()?n.androidPackageName=t.packageName:Go(e,"operation-not-supported-in-this-environment"),await gu(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Gu(),s=setTimeout((async()=>{await Ju(e),t.onEvent(ih())}),500),o=async n=>{clearTimeout(s);const r=await Ju(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Xu(r,n.url)),t.onEvent(i||ih())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");Gu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function ih(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ho("no-auth-event")}}function sh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return!("file:"!==sh()&&"ionic:"!==sh()&&"capacitor:"!==sh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ah(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return es()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yi();return/Edge\/\d+/.test(e)}(e)}function ch(){try{const e=self.localStorage,t=bl();if(e)return e.setItem(t,"1"),e.removeItem(t),!ah()||ns()}catch(e){return lh()&&ns()}return!1}function lh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function uh(){return("http:"===sh()||"https:"===sh()||Xi()||oh())&&!(Zi()||Ji())&&ch()&&!lh()}function hh(){return oh()&&"undefined"!==typeof document}const dh={LOCAL:"local",NONE:"none",SESSION:"session"},fh=Jo,ph="persistence";async function mh(e){await e._initializationPromise;const t=gh(),n=Da(ph,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function gh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const yh=Jo;class vh{constructor(){this.browserResolver=Pa(Uu),this.cordovaResolver=Pa(rh),this.underlyingResolver=null,this._redirectPersistence=vl,this._completeRedirectFn=hu,this._overrideRedirectResult=su}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return hh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yh(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!hh()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function wh(e){return e.unwrap()}function bh(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ih(e,function(e,t){var n;const r=ms(e),i=t;return Jo(t.customData.operationType,r,"argument-error"),Jo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ul._fromError(r,i)}(e,t))}else if(r){const e=_h(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function _h(e){const{_tokenResponse:t}=e instanceof rs?e.customData:e;if(!t)return null;if(!(e instanceof rs)&&"temporaryProof"in t&&"phoneNumber"in t)return Gl.credentialFromResult(e);const n=t.providerId;if(!n||n===Ro.PASSWORD)return null;let r;switch(n){case Ro.GOOGLE:r=Ic;break;case Ro.FACEBOOK:r=Sc;break;case Ro.GITHUB:r=Tc;break;case Ro.TWITTER:r=xc;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?kc._create(n,o):mc._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ec(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof rs?r.credentialFromError(e):r.credentialFromResult(e)}function Eh(e,t){return t.catch((t=>{throw t instanceof rs&&bh(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,_h(r)),additionalUserInfo:cl(e),user:Th.getOrCreate(n)};var r}))}async function Sh(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Eh(e,n.confirm(t))}}class Ih{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Eh(wh(this.auth),this.resolver.resolveSignIn(e))}}class Th{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=ms(e);return dl.has(t)||dl.set(t,hl._fromUser(t)),dl.get(t)}(e)}static getOrCreate(e){return Th.USER_MAP.has(e)||Th.USER_MAP.set(e,new Th(e)),Th.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Eh(this.auth,zc(this._delegate,e))}async linkWithPhoneNumber(e,t){return Sh(this.auth,async function(e,t,n){const r=ms(e);await Fc(!1,r,"phone");const i=await Wl(r.auth,t,ms(n));return new Kl(i,(e=>zc(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Eh(this.auth,async function(e,t,n){const r=ms(e);$o(r.auth,t,bc);const i=Hl(r.auth,n);return new eu(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vh))}async linkWithRedirect(e){return await mh(Ya(this.auth)),uu(this._delegate,e,vh)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Eh(this.auth,Bc(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Sh(this.auth,async function(e,t,n){const r=ms(e),i=await Wl(r.auth,t,ms(n));return new Kl(i,(e=>Bc(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Eh(this.auth,async function(e,t,n){const r=ms(e);$o(r.auth,t,bc);const i=Hl(r.auth,n);return new eu(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vh))}async reauthenticateWithRedirect(e){return await mh(Ya(this.auth)),lu(this._delegate,e,vh)}sendEmailVerification(e){return Xc(this._delegate,e)}async unlink(e){return await Lc(this._delegate,e),this}updateEmail(e){return function(e,t){return tl(ms(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return tl(ms(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Mc(ms(e),t)}(this._delegate,e)}updateProfile(e){return el(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Zc(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Th.USER_MAP=new WeakMap;const kh=Jo;class Ch{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;kh(n,"invalid-api-key",{appName:e.name}),kh(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?vh:void 0;this._delegate=t.initialize({options:{persistence:Nh(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(zo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Th.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){rc(this._delegate,e,t)}applyActionCode(e){return $c(this._delegate,e)}checkActionCode(e){return Yc(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ac(ms(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qc(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Eh(this._delegate,async function(e,t,n){const r=Ya(e),i=nc(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nc),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qc(e),t})),o=await Ac._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Jc(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=vc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){kh(uh(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ya(e)._initializationPromise,hu(e,t,!1)}(this._delegate,vh);return e?Eh(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ya(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=xh(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=xh(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ya(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Jo(t.handleCodeInApp,r,"argument-error"),t&&Hc(r,e,t)}(i,n),await nc(r,i,"getOobCode",dc)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ya(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Hc(r,i,n),await nc(r,i,"getOobCode",hc)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){fh(Object.values(dh).includes(t),e,"invalid-persistence-type"),Zi()?fh(t!==dh.SESSION,e,"unsupported-persistence-type"):Ji()?fh(t===dh.NONE,e,"unsupported-persistence-type"):lh()?fh(t===dh.NONE||t===dh.LOCAL&&ns(),e,"unsupported-persistence-type"):fh(t===dh.NONE||ch(),e,"unsupported-persistence-type")}(this._delegate,e),e){case dh.SESSION:t=vl;break;case dh.LOCAL:t=await Pa(Rl)._isAvailable()?Rl:gl;break;case dh.NONE:t=Ra;break;default:return Go("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Eh(this._delegate,async function(e){var t;const n=Ya(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ac({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Nc(n,{returnSecureToken:!0}),i=await Ac._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Eh(this._delegate,Vc(this._delegate,e))}signInWithCustomToken(e){return Eh(this._delegate,qc(this._delegate,e))}signInWithEmailAndPassword(e,t){return Eh(this._delegate,function(e,t,n){return Vc(ms(e),wc.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qc(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Eh(this._delegate,async function(e,t,n){const r=ms(e),i=wc.credentialWithLink(t,n||ea());return Jo(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vc(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Sh(this._delegate,async function(e,t,n){const r=Ya(e),i=await Wl(r,t,ms(n));return new Kl(i,(e=>Vc(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return kh(uh(),this._delegate,"operation-not-supported-in-this-environment"),Eh(this._delegate,async function(e,t,n){const r=Ya(e);$o(e,t,bc);const i=Hl(r,n);return new eu(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,vh))}async signInWithRedirect(e){return kh(uh(),this._delegate,"operation-not-supported-in-this-environment"),await mh(this._delegate),cu(this._delegate,e,vh)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Yc(ms(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function xh(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Th.getOrCreate(e)),error:t,complete:n}}function Nh(e,t){const n=function(e,t){const n=gh();if(!n)return[];const r=Da(ph,e,t);switch(n.getItem(r)){case dh.NONE:return[Ra];case dh.LOCAL:return[Rl,vl];case dh.SESSION:return[vl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Rl)||n.push(Rl),"undefined"!==typeof window)for(const r of[gl,vl])n.includes(r)||n.push(r);return n.includes(Ra)||n.push(Ra),n}Ch.Persistence=dh;class Ah{constructor(){this.providerId="phone",this._delegate=new Gl(wh(Po.auth()))}static credential(e,t){return Gl.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Ah.PHONE_SIGN_IN_METHOD=Gl.PHONE_SIGN_IN_METHOD,Ah.PROVIDER_ID=Gl.PROVIDER_ID;const Ph=Jo;class Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Po.app();var r;Ph(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ql(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new gs("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ch(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Do,PASSWORD_RESET:Lo,RECOVER_EMAIL:Mo,REVERT_SECOND_FACTOR_ADDITION:Fo,VERIFY_AND_CHANGE_EMAIL:Uo,VERIFY_EMAIL:jo}},EmailAuthProvider:wc,FacebookAuthProvider:Sc,GithubAuthProvider:Tc,GoogleAuthProvider:Ic,OAuthProvider:Ec,SAMLAuthProvider:Cc,PhoneAuthProvider:Ah,PhoneMultiFactorGenerator:zu,RecaptchaVerifier:Oh,TwitterAuthProvider:xc,Auth:Ch,AuthCredential:oc,Error:rs}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.1")}(Po);var Rh,Dh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Lh={},Mh=Mh||{},Fh=Dh||self;function Uh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function jh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vh="closure_uid_"+(1e9*Math.random()>>>0),zh=0;function Bh(e,t,n){return e.call.apply(e.bind,arguments)}function qh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Kh(e,t,n){return(Kh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bh:qh).apply(null,arguments)}function Wh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Hh(){this.s=this.s,this.o=this.o}Hh.prototype.s=!1,Hh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Vh)&&e[Vh]||(e[Vh]=++zh)}(this)},Hh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function $h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Yh(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Uh(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Jh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jh.prototype.h=function(){this.defaultPrevented=!0};var Xh=function(){if(!Fh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Fh.addEventListener("test",e,t),Fh.removeEventListener("test",e,t)}catch(V){}return e}();function Zh(e){return/^[\s\xa0]*$/.test(e)}function ed(){var e=Fh.navigator;return e&&(e=e.userAgent)?e:""}function td(e){return-1!=ed().indexOf(e)}function nd(e){return nd[" "](e),e}nd[" "]=function(){};var rd,id,sd=td("Opera"),od=td("Trident")||td("MSIE"),ad=td("Edge"),cd=ad||od,ld=td("Gecko")&&!(-1!=ed().toLowerCase().indexOf("webkit")&&!td("Edge"))&&!(td("Trident")||td("MSIE"))&&!td("Edge"),ud=-1!=ed().toLowerCase().indexOf("webkit")&&!td("Edge");function hd(){var e=Fh.document;return e?e.documentMode:void 0}e:{var dd="",fd=function(){var e=ed();return ld?/rv:([^\);]+)(\)|;)/.exec(e):ad?/Edge\/([\d\.]+)/.exec(e):od?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ud?/WebKit\/(\S+)/.exec(e):sd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fd&&(dd=fd?fd[1]:""),od){var pd=hd();if(null!=pd&&pd>parseFloat(dd)){rd=String(pd);break e}}rd=dd}if(Fh.document&&od){var md=hd();id=md||(parseInt(rd,10)||void 0)}else id=void 0;var gd=id;function yd(e,t){if(Jh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ld){e:{try{nd(t.nodeName);var i=!0;break e}catch(j){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yd.$.h.call(this)}}Gh(yd,Jh);var vd={2:"touch",3:"pen",4:"mouse"};yd.prototype.h=function(){yd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var wd="closure_listenable_"+(1e6*Math.random()|0),bd=0;function _d(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++bd,this.fa=this.ia=!1}function Ed(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Sd(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Id(e){const t={};for(const n in e)t[n]=e[n];return t}const Td="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kd(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Td.length;t++)n=Td[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cd(e){this.src=e,this.g={},this.h=0}function xd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Qh(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ed(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Nd(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Cd.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Nd(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new _d(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Ad="closure_lm_"+(1e6*Math.random()|0),Pd={};function Od(e,t,n,r,i){if(r&&r.once)return Dd(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Od(e,t[s],n,r,i);return null}return n=zd(n),e&&e[wd]?e.O(t,n,jh(r)?!!r.capture:!!r,i):Rd(e,t,n,!1,r,i)}function Rd(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=jh(i)?!!i.capture:!!i,a=jd(e);if(a||(e[Ad]=a=new Cd(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Ud;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Fd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Dd(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Dd(e,t[s],n,r,i);return null}return n=zd(n),e&&e[wd]?e.P(t,n,jh(r)?!!r.capture:!!r,i):Rd(e,t,n,!0,r,i)}function Ld(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ld(e,t[s],n,r,i);else r=jh(r)?!!r.capture:!!r,n=zd(n),e&&e[wd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Nd(s=e.g[t],n,r,i))&&(Ed(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=jd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Nd(t,n,r,i)),(n=-1<e?t[e]:null)&&Md(n))}function Md(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[wd])xd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Fd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jd(t))?(xd(n,e),0==n.h&&(n.src=null,t[Ad]=null)):Ed(e)}}}function Fd(e){return e in Pd?Pd[e]:Pd[e]="on"+e}function Ud(e,t){if(e.fa)e=!0;else{t=new yd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Md(e),e=n.call(r,t)}return e}function jd(e){return(e=e[Ad])instanceof Cd?e:null}var Vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function zd(e){return"function"===typeof e?e:(e[Vd]||(e[Vd]=function(t){return e.handleEvent(t)}),e[Vd])}function Bd(){Hh.call(this),this.i=new Cd(this),this.S=this,this.J=null}function qd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Jh(t,e);else if(t instanceof Jh)t.target=t.target||e;else{var i=t;kd(t=new Jh(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Kd(o,r,!0,t)&&i}if(i=Kd(o=t.g=e,r,!0,t)&&i,i=Kd(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Kd(o=t.g=n[s],r,!1,t)&&i}function Kd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&xd(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Gh(Bd,Hh),Bd.prototype[wd]=!0,Bd.prototype.removeEventListener=function(e,t,n,r){Ld(this,e,t,n,r)},Bd.prototype.N=function(){if(Bd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ed(n[r]);delete t.g[e],t.h--}}this.J=null},Bd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Wd=Fh.JSON.stringify;function Gd(){var e=Zd;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Hd=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Qd),(e=>e.reset()));class Qd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $d(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Yd(e){Fh.setTimeout((()=>{throw e}),0)}let Jd,Xd=!1,Zd=new class{constructor(){this.h=this.g=null}add(e,t){const n=Hd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ef=()=>{const e=Fh.Promise.resolve(void 0);Jd=()=>{e.then(tf)}};var tf=()=>{for(var e;e=Gd();){try{e.h.call(e.g)}catch(V){Yd(V)}var t=Hd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xd=!1};function nf(e,t){Bd.call(this),this.h=e||1,this.g=t||Fh,this.j=Kh(this.qb,this),this.l=Date.now()}function rf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function sf(e,t,n){if("function"===typeof e)n&&(e=Kh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Kh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Fh.setTimeout(e,t||0)}function of(e){e.g=sf((()=>{e.g=null,e.i&&(e.i=!1,of(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Gh(nf,Bd),(Rh=nf.prototype).ga=!1,Rh.T=null,Rh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qd(this,"tick"),this.ga&&(rf(this),this.start()))}},Rh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rh.N=function(){nf.$.N.call(this),rf(this),delete this.g};class af extends Hh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:of(this)}N(){super.N(),this.g&&(Fh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cf(e){Hh.call(this),this.h=e,this.g={}}Gh(cf,Hh);var lf=[];function uf(e,t,n,r){Array.isArray(n)||(n&&(lf[0]=n.toString()),n=lf);for(var i=0;i<n.length;i++){var s=Od(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function hf(e){Sd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Md(e)}),e),e.g={}}function df(){this.g=!0}function ff(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Wd(n)}catch(O){return t}}(e,n)+(r?" "+r:"")}))}cf.prototype.N=function(){cf.$.N.call(this),hf(this)},cf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},df.prototype.Ea=function(){this.g=!1},df.prototype.info=function(){};var pf={},mf=null;function gf(){return mf=mf||new Bd}function yf(e){Jh.call(this,pf.Ta,e)}function vf(e){const t=gf();qd(t,new yf(t))}function wf(e,t){Jh.call(this,pf.STAT_EVENT,e),this.stat=t}function bf(e){const t=gf();qd(t,new wf(t,e))}function _f(e,t){Jh.call(this,pf.Ua,e),this.size=t}function Ef(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Fh.setTimeout((function(){e()}),t)}pf.Ta="serverreachability",Gh(yf,Jh),pf.STAT_EVENT="statevent",Gh(wf,Jh),pf.Ua="timingevent",Gh(_f,Jh);var Sf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},If={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Tf(){}function kf(e){return e.h||(e.h=e.i())}function Cf(){}Tf.prototype.h=null;var xf,Nf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Af(){Jh.call(this,"d")}function Pf(){Jh.call(this,"c")}function Of(){}function Rf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new cf(this),this.P=Lf,e=cd?125:void 0,this.V=new nf(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}Gh(Af,Jh),Gh(Pf,Jh),Gh(Of,Tf),Of.prototype.g=function(){return new XMLHttpRequest},Of.prototype.i=function(){return{}},xf=new Of;var Lf=45e3,Mf={},Ff={};function Uf(e,t,n){e.L=1,e.A=rp(Xf(t)),e.u=n,e.S=!0,jf(e,null)}function jf(e,t){e.G=Date.now(),qf(e),e.B=Xf(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),gp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Df,e.g=gm(e.l,n?t:null,!e.u),0<e.O&&(e.M=new af(Kh(e.Pa,e,e.g),e.O)),uf(e.U,e.g,"readystatechange",e.nb),t=e.I?Id(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),vf(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Vf(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function zf(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Bf(e,n),r==Ff){4==t&&(e.s=4,bf(14),i=!1),ff(e.j,e.m,null,"[Incomplete Response]");break}if(r==Mf){e.s=4,bf(15),ff(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ff(e.j,e.m,r,null),Qf(e,r)}Vf(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,bf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),cm(t),t.M=!0,bf(11))):(ff(e.j,e.m,n,"[Invalid Chunked Response]"),Hf(e),Gf(e))}function Bf(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Ff:(n=Number(t.substring(n,r)),isNaN(n)?Mf:(r+=1)+n>t.length?Ff:(t=t.slice(r,r+n),e.o=r+n,t))}function qf(e){e.Y=Date.now()+e.P,Kf(e,e.P)}function Kf(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ef(Kh(e.lb,e),t)}function Wf(e){e.C&&(Fh.clearTimeout(e.C),e.C=null)}function Gf(e){0==e.l.H||e.J||hm(e.l,e)}function Hf(e){Wf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,rf(e.V),hf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Qf(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Sp(n.i,e)))if(!e.K&&Sp(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch($){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;um(n),em(n)}am(n),bf(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ef(Kh(n.ib,n),6e3));if(1>=Ep(n.i)&&n.oa){try{n.oa()}catch($){}n.oa=void 0}}else fm(n,11)}else if((e.K||n.g==e)&&um(n),!Zh(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ip(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,np(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=mm(r,r.J?r.pa:null,r.Y),o.K){Tp(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Wf(a),qf(a)),r.g=o}else om(r);0<n.j.length&&nm(n)}else"stop"!=l[0]&&"close"!=l[0]||fm(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?fm(n,7):Zp(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}vf()}catch($){}}function $f(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Uh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Uh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Uh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Rh=Rf.prototype).setTimeout=function(e){this.P=e},Rh.nb=function(e){e=e.target;const t=this.M;t&&3==Hp(e)?t.l():this.Pa(e)},Rh.Pa=function(e){try{if(e==this.g)e:{const u=Hp(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||cd||this.g&&(this.h.h||this.g.ja()||Qp(this.g)))){this.J||4!=u||7==t||vf(),Wf(this);var n=this.g.da();this.ca=n;t:if(Vf(this)){var r=Qp(this.g);e="";var i=r.length,s=4==Hp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Hf(this),Gf(this);var o="";break t}this.h.i=new Fh.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zh(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,bf(12),Hf(this),Gf(this);break e}ff(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qf(this,n)}this.S?(zf(this,u,o),cd&&this.i&&3==u&&(uf(this.U,this.V,"tick",this.mb),this.V.start())):(ff(this.j,this.m,o,null),Qf(this,o)),4==u&&Hf(this),this.i&&!this.J&&(4==u?hm(this.l,this):(this.i=!1,qf(this)))}else(function(e){const t={};e=(e.g&&2<=Hp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Zh(e[r]))continue;var n=$d(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,bf(12)):(this.s=0,bf(13)),Hf(this),Gf(this)}}}catch(F){}},Rh.mb=function(){if(this.g){var e=Hp(this.g),t=this.g.ja();this.o<t.length&&(Wf(this),zf(this,e,t),this.i&&4!=e&&qf(this))}},Rh.cancel=function(){this.J=!0,Hf(this)},Rh.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(vf(),bf(17)),Hf(this),this.s=2,Gf(this)):Kf(this,this.Y-e)};var Yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jf(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Jf){this.h=e.h,Zf(this,e.j),this.s=e.s,this.g=e.g,ep(this,e.m),this.l=e.l;var t=e.i,n=new dp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),tp(this,n),this.o=e.o}else e&&(t=String(e).match(Yf))?(this.h=!1,Zf(this,t[1]||"",!0),this.s=ip(t[2]||""),this.g=ip(t[3]||"",!0),ep(this,t[4]),this.l=ip(t[5]||"",!0),tp(this,t[6]||"",!0),this.o=ip(t[7]||"")):(this.h=!1,this.i=new dp(null,this.h))}function Xf(e){return new Jf(e)}function Zf(e,t,n){e.j=n?ip(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ep(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tp(e,t,n){t instanceof dp?(e.i=t,function(e,t){t&&!e.j&&(fp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(pp(this,t),gp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=sp(t,up)),e.i=new dp(t,e.h))}function np(e,t,n){e.i.set(t,n)}function rp(e){return np(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ip(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,op),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function op(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Jf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sp(t,ap,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(sp(t,ap,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(sp(n,"/"==n.charAt(0)?lp:cp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sp(n,hp)),e.join("")};var ap=/[#\/\?@]/g,cp=/[#\?:]/g,lp=/[#\?]/g,up=/[#\?@]/g,hp=/#/g;function dp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function pp(e,t){fp(e),t=yp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function mp(e,t){return fp(e),t=yp(e,t),e.g.has(t)}function gp(e,t,n){pp(e,t),0<n.length&&(e.i=null,e.g.set(yp(e,t),$h(n)),e.h+=n.length)}function yp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Rh=dp.prototype).add=function(e,t){fp(this),this.i=null,e=yp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Rh.forEach=function(e,t){fp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Rh.ta=function(){fp(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Rh.Z=function(e){fp(this);let t=[];if("string"===typeof e)mp(this,e)&&(t=t.concat(this.g.get(yp(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Rh.set=function(e,t){return fp(this),this.i=null,mp(this,e=yp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Rh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Rh.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var vp=class{constructor(e,t){this.g=e,this.map=t}};function wp(e){this.l=e||bp,Fh.PerformanceNavigationTiming?e=0<(e=Fh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Fh.g&&Fh.g.Ka&&Fh.g.Ka()&&Fh.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bp=10;function _p(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ep(e){return e.h?1:e.g?e.g.size:0}function Sp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ip(e,t){e.g?e.g.add(t):e.h=t}function Tp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function kp(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return $h(e.i)}wp.prototype.cancel=function(){if(this.i=kp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Cp=class{stringify(e){return Fh.JSON.stringify(e,void 0)}parse(e){return Fh.JSON.parse(e,void 0)}};function xp(){this.g=new Cp}function Np(e,t,n){const r=n||"";try{$f(e,(function(e,n){let i=e;jh(e)&&(i=Wd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ap(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(j){}}function Pp(e){this.l=e.ec||null,this.j=e.ob||!1}function Op(e,t){Bd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Rp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gh(Pp,Tf),Pp.prototype.g=function(){return new Op(this.l,this.j)},Pp.prototype.i=function(e){return function(){return e}}({}),Gh(Op,Bd);var Rp=0;function Dp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Lp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mp(e)}function Mp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Rh=Op.prototype).open=function(e,t){if(this.readyState!=Rp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mp(this)},Rh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Fh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Rh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lp(this)),this.readyState=Rp},Rh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mp(this)),this.g&&(this.readyState=3,Mp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Fh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Rh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lp(this):Mp(this),3==this.readyState&&Dp(this)}},Rh.Za=function(e){this.g&&(this.response=this.responseText=e,Lp(this))},Rh.Ya=function(e){this.g&&(this.response=e,Lp(this))},Rh.ka=function(){this.g&&Lp(this)},Rh.setRequestHeader=function(e,t){this.v.append(e,t)},Rh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Rh.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Op.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fp=Fh.JSON.parse;function Up(e){Bd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jp,this.L=this.M=!1}Gh(Up,Bd);var jp="",Vp=/^https?$/i,zp=["POST","PUT"];function Bp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qp(e),Wp(e)}function qp(e){e.F||(e.F=!0,qd(e,"complete"),qd(e,"error"))}function Kp(e){if(e.h&&"undefined"!=typeof Mh&&(!e.C[1]||4!=Hp(e)||2!=e.da()))if(e.v&&4==Hp(e))sf(e.La,0,e);else if(qd(e,"readystatechange"),4==Hp(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Yf)[1]||null;!i&&Fh.self&&Fh.self.location&&(i=Fh.self.location.protocol.slice(0,-1)),r=!Vp.test(i?i.toLowerCase():"")}n=r}if(n)qd(e,"complete"),qd(e,"success");else{e.m=6;try{var s=2<Hp(e)?e.g.statusText:""}catch(O){s=""}e.j=s+" ["+e.da()+"]",qp(e)}}finally{Wp(e)}}}function Wp(e,t){if(e.g){Gp(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||qd(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Gp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Fh.clearTimeout(e.A),e.A=null)}function Hp(e){return e.g?e.g.readyState:0}function Qp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case jp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Q){return null}}function $p(e){let t="";return Sd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Yp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$p(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):np(e,t,n))}function Jp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xp(e){this.Ga=0,this.j=[],this.l=new df,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jp("baseRetryDelayMs",5e3,e),this.hb=Jp("retryDelaySeedMs",1e4,e),this.eb=Jp("forwardChannelMaxRetries",2,e),this.xa=Jp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new wp(e&&e.concurrentRequestLimit),this.Ja=new xp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zp(e){if(tm(e),3==e.H){var t=e.W++,n=Xf(e.I);if(np(n,"SID",e.K),np(n,"RID",t),np(n,"TYPE","terminate"),im(e,n),(t=new Rf(e,e.l,t)).L=2,t.A=rp(Xf(n)),n=!1,Fh.navigator&&Fh.navigator.sendBeacon)try{n=Fh.navigator.sendBeacon(t.A.toString(),"")}catch(W){}!n&&Fh.Image&&((new Image).src=t.A,n=!0),n||(t.g=gm(t.l,null),t.g.ha(t.A)),t.G=Date.now(),qf(t)}pm(e)}function em(e){e.g&&(cm(e),e.g.cancel(),e.g=null)}function tm(e){em(e),e.u&&(Fh.clearTimeout(e.u),e.u=null),um(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Fh.clearTimeout(e.m),e.m=null)}function nm(e){if(!_p(e.i)&&!e.m){e.m=!0;var t=e.Na;Jd||ef(),Xd||(Jd(),Xd=!0),Zd.add(t,e),e.C=0}}function rm(e,t){var n;n=t?t.m:e.W++;const r=Xf(e.I);np(r,"SID",e.K),np(r,"RID",n),np(r,"AID",e.V),im(e,r),e.o&&e.s&&Yp(r,e.o,e.s),n=new Rf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=sm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ip(e.i,n),Uf(n,r,t)}function im(e,t){e.na&&Sd(e.na,(function(e,n){np(t,n,e)})),e.h&&$f({},(function(e,n){np(t,n,e)}))}function sm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Kh(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Np(a,e,"req"+n+"_")}catch(_e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function om(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Jd||ef(),Xd||(Jd(),Xd=!0),Zd.add(t,e),e.A=0}}function am(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ef(Kh(e.Ma,e),dm(e,e.A)),e.A++,!0)}function cm(e){null!=e.B&&(Fh.clearTimeout(e.B),e.B=null)}function lm(e){e.g=new Rf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Xf(e.wa);np(t,"RID","rpc"),np(t,"SID",e.K),np(t,"AID",e.V),np(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&np(t,"TO",e.qa),np(t,"TYPE","xmlhttp"),im(e,t),e.o&&e.s&&Yp(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=rp(Xf(t)),n.u=null,n.S=!0,jf(n,e)}function um(e){null!=e.v&&(Fh.clearTimeout(e.v),e.v=null)}function hm(e,t){var n=null;if(e.g==t){um(e),cm(e),e.g=null;var r=2}else{if(!Sp(e.i,t))return;n=t.F,Tp(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;qd(r=gf(),new _f(r,n)),nm(e)}else om(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ep(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ef(Kh(e.Na,e,t),dm(e,e.C)),e.C++,!0))}(e,t)||2==r&&am(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:fm(e,5);break;case 4:fm(e,10);break;case 3:fm(e,6);break;default:fm(e,2)}}function dm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function fm(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Kh(e.pb,e);n||(n=new Jf("//www.google.com/images/cleardot.gif"),Fh.location&&"http"==Fh.location.protocol||Zf(n,"https"),rp(n)),function(e,t){const n=new df;if(Fh.Image){const r=new Image;r.onload=Wh(Ap,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Wh(Ap,n,r,"TestLoadImage: error",!1,t),r.onabort=Wh(Ap,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Wh(Ap,n,r,"TestLoadImage: timeout",!1,t),Fh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else bf(2);e.H=0,e.h&&e.h.za(t),pm(e),tm(e)}function pm(e){if(e.H=0,e.ma=[],e.h){const t=kp(e.i);0==t.length&&0==e.j.length||(Yh(e.ma,t),Yh(e.ma,e.j),e.i.i.length=0,$h(e.j),e.j.length=0),e.h.ya()}}function mm(e,t,n){var r=n instanceof Jf?Xf(n):new Jf(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ep(r,r.m);else{var i=Fh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Jf(null);r&&Zf(s,r),t&&(s.g=t),i&&ep(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&np(r,n,t),np(r,"VER",e.ra),im(e,r),r}function gm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Up(new Pp({ob:n})):new Up(e.va)).Oa(e.J),t}function ym(){}function vm(){if(od&&!(10<=Number(gd)))throw Error("Environmental error: no available transport.")}function wm(e,t){Bd.call(this),this.g=new Xp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Zh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Em(this)}function bm(e){Af.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _m(){Pf.call(this),this.status=1}function Em(e){this.g=e}function Sm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Im(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Tm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Rh=Up.prototype).Oa=function(e){this.M=e},Rh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xf.g(),this.C=this.u?kf(this.u):kf(xf),this.g.onreadystatechange=Kh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(j){return void Bp(this,j)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Fh.FormData&&e instanceof Fh.FormData,!(0<=Qh(zp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gp(this),0<this.B&&((this.L=function(e){return od&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kh(this.ua,this)):this.A=sf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(j){Bp(this,j)}},Rh.ua=function(){"undefined"!=typeof Mh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qd(this,"timeout"),this.abort(8))},Rh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,qd(this,"complete"),qd(this,"abort"),Wp(this))},Rh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wp(this,!0)),Up.$.N.call(this)},Rh.La=function(){this.s||(this.G||this.v||this.l?Kp(this):this.kb())},Rh.kb=function(){Kp(this)},Rh.isActive=function(){return!!this.g},Rh.da=function(){try{return 2<Hp(this)?this.g.status:-1}catch(U){return-1}},Rh.ja=function(){try{return this.g?this.g.responseText:""}catch(U){return""}},Rh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fp(t)}},Rh.Ia=function(){return this.m},Rh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Rh=Xp.prototype).ra=8,Rh.H=1,Rh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Rf(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Id(s),kd(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sm(this,i,t),np(n=Xf(this.I),"RID",e),np(n,"CVER",22),this.F&&np(n,"X-HTTP-Session-Id",this.F),im(this,n),s&&(this.O?t="headers="+encodeURIComponent(String($p(s)))+"&"+t:this.o&&Yp(n,this.o,s)),Ip(this.i,i),this.bb&&np(n,"TYPE","init"),this.P?(np(n,"$req",t),np(n,"SID","null"),i.aa=!0,Uf(i,n,null)):Uf(i,n,t),this.H=2}}else 3==this.H&&(e?rm(this,e):0==this.j.length||_p(this.i)||rm(this))},Rh.Ma=function(){if(this.u=null,lm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ef(Kh(this.jb,this),e)}},Rh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,bf(10),em(this),lm(this))},Rh.ib=function(){null!=this.v&&(this.v=null,em(this),am(this),bf(19))},Rh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),bf(2)):(this.l.info("Failed to ping google.com"),bf(1))},Rh.isActive=function(){return!!this.h&&this.h.isActive(this)},(Rh=ym.prototype).Ba=function(){},Rh.Aa=function(){},Rh.za=function(){},Rh.ya=function(){},Rh.isActive=function(){return!0},Rh.Va=function(){},vm.prototype.g=function(e,t){return new wm(e,t)},Gh(wm,Bd),wm.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;bf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=mm(e,null,e.Y),nm(e)},wm.prototype.close=function(){Zp(this.g)},wm.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Wd(e),e=n);t.j.push(new vp(t.fb++,e)),3==t.H&&nm(t)},wm.prototype.N=function(){this.g.h=null,delete this.j,Zp(this.g),delete this.g,wm.$.N.call(this)},Gh(bm,Af),Gh(_m,Pf),Gh(Em,ym),Em.prototype.Ba=function(){qd(this.g,"a")},Em.prototype.Aa=function(e){qd(this.g,new bm(e))},Em.prototype.za=function(e){qd(this.g,new _m)},Em.prototype.ya=function(){qd(this.g,"b")},Gh(Sm,(function(){this.blockSize=-1})),Sm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Im(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Im(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Im(this,r),i=0;break}}this.h=i,this.i+=t},Sm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var km={};function Cm(e){return-128<=e&&128>e?function(e,t){var n=km;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Tm([0|e],0>e?-1:0)})):new Tm([0|e],0>e?-1:0)}function xm(e){if(isNaN(e)||!isFinite(e))return Am;if(0>e)return Lm(xm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Nm;return new Tm(t,0)}var Nm=4294967296,Am=Cm(0),Pm=Cm(1),Om=Cm(16777216);function Rm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Dm(e){return-1==e.h}function Lm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Tm(n,~e.h).add(Pm)}function Mm(e,t){return e.add(Lm(t))}function Fm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Um(e,t){this.g=e,this.h=t}function jm(e,t){if(Rm(t))throw Error("division by zero");if(Rm(e))return new Um(Am,Am);if(Dm(e))return t=jm(Lm(e),t),new Um(Lm(t.g),Lm(t.h));if(Dm(t))return t=jm(e,Lm(t)),new Um(Lm(t.g),t.h);if(30<e.g.length){if(Dm(e)||Dm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pm,r=t;0>=r.X(e);)n=Vm(n),r=Vm(r);var i=zm(n,1),s=zm(r,1);for(r=zm(r,2),n=zm(n,2);!Rm(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=zm(r,1),n=zm(n,1)}return t=Mm(e,i.R(t)),new Um(i,t)}for(i=Am;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=xm(n)).R(t);Dm(o)||0<o.X(e);)o=(s=xm(n-=r)).R(t);Rm(s)&&(s=Pm),i=i.add(s),e=Mm(e,o)}return new Um(i,e)}function Vm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Tm(n,e.h)}function zm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Tm(i,e.h)}(Rh=Tm.prototype).ea=function(){if(Dm(this))return-Lm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Nm+r)*t,t*=Nm}return e},Rh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Rm(this))return"0";if(Dm(this))return"-"+Lm(this).toString(e);for(var t=xm(Math.pow(e,6)),n=this,r="";;){var i=jm(n,t).g,s=((0<(n=Mm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Rm(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Rh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Rh.X=function(e){return Dm(e=Mm(this,e))?-1:Rm(e)?0:1},Rh.abs=function(){return Dm(this)?Lm(this):this},Rh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Tm(n,-2147483648&n[n.length-1]?-1:0)},Rh.R=function(e){if(Rm(this)||Rm(e))return Am;if(Dm(this))return Dm(e)?Lm(this).R(Lm(e)):Lm(Lm(this).R(e));if(Dm(e))return Lm(this.R(Lm(e)));if(0>this.X(Om)&&0>e.X(Om))return xm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Fm(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Fm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Fm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Fm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Tm(n,0)},Rh.gb=function(e){return jm(this,e).h},Rh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Tm(n,this.h&e.h)},Rh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Tm(n,this.h|e.h)},Rh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Tm(n,this.h^e.h)},vm.prototype.createWebChannel=vm.prototype.g,wm.prototype.send=wm.prototype.u,wm.prototype.open=wm.prototype.m,wm.prototype.close=wm.prototype.close,Sf.NO_ERROR=0,Sf.TIMEOUT=8,Sf.HTTP_ERROR=6,If.COMPLETE="complete",Cf.EventType=Nf,Nf.OPEN="a",Nf.CLOSE="b",Nf.ERROR="c",Nf.MESSAGE="d",Bd.prototype.listen=Bd.prototype.O,Up.prototype.listenOnce=Up.prototype.P,Up.prototype.getLastError=Up.prototype.Sa,Up.prototype.getLastErrorCode=Up.prototype.Ia,Up.prototype.getStatus=Up.prototype.da,Up.prototype.getResponseJson=Up.prototype.Wa,Up.prototype.getResponseText=Up.prototype.ja,Up.prototype.send=Up.prototype.ha,Up.prototype.setWithCredentials=Up.prototype.Oa,Sm.prototype.digest=Sm.prototype.l,Sm.prototype.reset=Sm.prototype.reset,Sm.prototype.update=Sm.prototype.j,Tm.prototype.add=Tm.prototype.add,Tm.prototype.multiply=Tm.prototype.R,Tm.prototype.modulo=Tm.prototype.gb,Tm.prototype.compare=Tm.prototype.X,Tm.prototype.toNumber=Tm.prototype.ea,Tm.prototype.toString=Tm.prototype.toString,Tm.prototype.getBits=Tm.prototype.D,Tm.fromNumber=xm,Tm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Lm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=xm(Math.pow(n,8)),i=Am,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=xm(Math.pow(n,o)),i=i.R(o).add(xm(a))):i=(i=i.R(r)).add(xm(a))}return i};var Bm=Lh.createWebChannelTransport=function(){return new vm},qm=Lh.getStatEventTarget=function(){return gf()},Km=Lh.ErrorCode=Sf,Wm=Lh.EventType=If,Gm=Lh.Event=pf,Hm=Lh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qm=(Lh.FetchXmlHttpFactory=Pp,Lh.WebChannel=Cf),$m=Lh.XhrIo=Up,Ym=Lh.Md5=Sm,Jm=Lh.Integer=Tm;const Xm="@firebase/firestore";class Zm{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zm.UNAUTHENTICATED=new Zm(null),Zm.GOOGLE_CREDENTIALS=new Zm("google-credentials-uid"),Zm.FIRST_PARTY=new Zm("first-party-uid"),Zm.MOCK_USER=new Zm("mock-user");let eg="10.7.2";const tg=new ks("@firebase/firestore");function ng(){return tg.logLevel}function rg(e){if(tg.logLevel<=_s.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(og);tg.debug("Firestore (".concat(eg,"): ").concat(e),...i)}}function ig(e){if(tg.logLevel<=_s.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(og);tg.error("Firestore (".concat(eg,"): ").concat(e),...i)}}function sg(e){if(tg.logLevel<=_s.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(og);tg.warn("Firestore (".concat(eg,"): ").concat(e),...i)}}function og(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(D){return e}}function ag(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(eg,") INTERNAL ASSERTION FAILED: ")+e;throw ig(t),new Error(t)}function cg(e,t){e||ag()}function lg(e,t){return e}const ug={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hg extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class dg{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class fg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class pg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zm.UNAUTHENTICATED)))}shutdown(){}}class mg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gg{constructor(e){this.t=e,this.currentUser=Zm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new dg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dg,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{rg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(rg("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dg)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(rg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cg("string"==typeof t.accessToken),new fg(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return cg(null===e||"string"==typeof e),new Zm(e)}}class yg{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Zm.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vg{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new yg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Zm.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bg{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&rg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,rg("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{rg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):rg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(cg("string"==typeof e.token),this.R=e.token,new wg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _g(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=_g(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Sg(e,t){return e<t?-1:e>t?1:0}function Ig(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Tg(e){return e+"\0"}class kg{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hg(ug.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hg(ug.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hg(ug.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hg(ug.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kg.fromMillis(Date.now())}static fromDate(e){return kg.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new kg(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sg(this.nanoseconds,e.nanoseconds):Sg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Cg{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Cg(e)}static min(){return new Cg(new kg(0,0))}static max(){return new Cg(new kg(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xg{constructor(e,t,n){void 0===t?t=0:t>e.length&&ag(),void 0===n?n=e.length-t:n>e.length-t&&ag(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===xg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xg?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ng extends xg{construct(e,t,n){return new Ng(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new hg(ug.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ng(e)}static emptyPath(){return new Ng([])}}const Ag=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pg extends xg{construct(e,t,n){return new Pg(e,t,n)}static isValidIdentifier(e){return Ag.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pg.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new hg(ug.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new hg(ug.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hg(ug.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new hg(ug.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pg(t)}static emptyPath(){return new Pg([])}}class Og{constructor(e){this.path=e}static fromPath(e){return new Og(Ng.fromString(e))}static fromName(e){return new Og(Ng.fromString(e).popFirst(5))}static empty(){return new Og(Ng.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ng.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ng.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Og(new Ng(e.slice()))}}class Rg{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Dg(e){return e.fields.find((e=>2===e.kind))}function Lg(e){return e.fields.filter((e=>2!==e.kind))}Rg.UNKNOWN_ID=-1;class Mg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fg(0,Vg.min())}}function Ug(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Cg.fromTimestamp(1e9===r?new kg(n+1,0):new kg(n,r));return new Vg(i,Og.empty(),t)}function jg(e){return new Vg(e.readTime,e.key,-1)}class Vg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vg(Cg.min(),Og.empty(),-1)}static max(){return new Vg(Cg.max(),Og.empty(),-1)}}function zg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Og.comparator(e.documentKey,t.documentKey),0!==n?n:Sg(e.largestBatchId,t.largestBatchId))}const Bg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Kg(e){if(e.code!==ug.FAILED_PRECONDITION||e.message!==Bg)throw e;rg("LocalStore","Unexpectedly lost primary lease")}class Wg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ag(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Wg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Wg?t:Wg.resolve(t)}catch(e){return Wg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Wg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Wg.reject(t)}static resolve(e){return new Wg(((t,n)=>{t(e)}))}static reject(e){return new Wg(((t,n)=>{n(e)}))}static waitFor(e){return new Wg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Wg.resolve(!1);for(const n of e)t=t.next((e=>e?Wg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Wg(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Wg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Gg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new dg,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new $g(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=ey(t.target.error);this.V.reject(new $g(e,n))}}static open(e,t,n,r){try{return new Gg(t,e.transaction(r,n))}catch(e){throw new $g(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(rg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jg(t)}}class Hg{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Hg.S(Yi())&&ig("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rg("SimpleDb","Removing database:",e),Xg(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ns())return!1;if(Hg.C())return!0;const e=Yi(),t=Hg.S(e),n=0<t&&t<10,r=Hg.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(rg("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new $g(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new hg(ug.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new hg(ug.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new $g(e,r))},r.onupgradeneeded=e=>{rg("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{rg("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Gg.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Wg.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(rg("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Qg{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xg(this.k.delete())}}class $g extends hg{constructor(e,t){super(ug.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Yg(e){return"IndexedDbTransactionError"===e.name}class Jg{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(rg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xg(n)}add(e){return rg("SimpleDb","ADD",this.store.name,e,e),Xg(this.store.add(e))}get(e){return Xg(this.store.get(e)).next((t=>(void 0===t&&(t=null),rg("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return rg("SimpleDb","DELETE",this.store.name,e),Xg(this.store.delete(e))}count(){return rg("SimpleDb","COUNT",this.store.name),Xg(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Wg(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Wg(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){rg("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Wg(((n,r)=>{t.onerror=e=>{const t=ey(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Wg(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Qg(i),o=t(i.primaryKey,i.value,s);if(o instanceof Wg){const e=o.catch((e=>(s.done(),Wg.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Wg.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xg(e){return new Wg(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ey(e.target.error);n(t)}}))}let Zg=!1;function ey(e){const t=Hg.S(Yi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new hg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Zg||(Zg=!0,setTimeout((()=>{throw e}),0)),e}}return e}class ty{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){rg("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{rg("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Yg(e)?rg("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Kg(e)}await this.ee(6e4)}))}}class ny{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Wg.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return rg("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(rg("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=jg(t);zg(r,n)>0&&(n=r)})),new Vg(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ry{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function iy(e){return null==e}function sy(e){return 0===e&&1/e==-1/0}function oy(e){return"number"==typeof e&&Number.isInteger(e)&&!sy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ay(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ly(t)),t=cy(e.get(n),t);return ly(t)}function cy(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ly(e){return e+"\x01\x01"}function uy(e){const t=e.length;if(cg(t>=2),2===t)return cg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ng.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&ag(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:ag()}s=t+2}return new Ng(r)}ry._e=-1;const hy=["userId","batchId"];function dy(e,t){return[e,ay(t)]}function fy(e,t,n){return[e,ay(t),n]}const py={},my=["prefixPath","collectionGroup","readTime","documentId"],gy=["prefixPath","collectionGroup","documentId"],yy=["collectionGroup","readTime","prefixPath","documentId"],vy=["canonicalId","targetId"],wy=["targetId","path"],by=["path","targetId"],_y=["collectionId","parent"],Ey=["indexId","uid"],Sy=["uid","sequenceNumber"],Iy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ty=["indexId","uid","orderedDocumentKey"],ky=["userId","collectionPath","documentId"],Cy=["userId","collectionPath","largestBatchId"],xy=["userId","collectionGroup","largestBatchId"],Ny=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ay=[...Ny,"documentOverlays"],Py=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oy=Py,Ry=[...Oy,"indexConfiguration","indexState","indexEntries"];class Dy extends qg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Ly(e,t){const n=lg(e);return Hg.M(n.ae,t)}function My(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fy(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class jy{constructor(e,t){this.comparator=e,this.root=t||zy.EMPTY}insert(e,t){return new jy(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zy.BLACK,null,null))}remove(e){return new jy(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vy(this.root,e,this.comparator,!0)}}class Vy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:zy.RED,this.left=null!=r?r:zy.EMPTY,this.right=null!=i?i:zy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new zy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return zy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ag();if(this.right.isRed())throw ag();const e=this.left.check();if(e!==this.right.check())throw ag();return e+(this.isRed()?0:1)}}zy.EMPTY=null,zy.RED=!0,zy.BLACK=!1,zy.EMPTY=new class{constructor(){this.size=0}get key(){throw ag()}get value(){throw ag()}get color(){throw ag()}get left(){throw ag()}get right(){throw ag()}copy(e,t,n,r,i){return this}insert(e,t,n){return new zy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class By{constructor(e){this.comparator=e,this.data=new jy(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof By))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new By(this.comparator);return t.data=e,t}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ky(e){return e.hasNext()?e.getNext():void 0}class Wy{constructor(e){this.fields=e,e.sort(Pg.comparator)}static empty(){return new Wy([])}unionWith(e){let t=new By(Pg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Wy(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ig(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gy("Invalid base64 string: "+e):e}}(e);return new Hy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hy.EMPTY_BYTE_STRING=new Hy("");const Qy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $y(e){if(cg(!!e),"string"==typeof e){let t=0;const n=Qy.exec(e);if(cg(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yy(e.seconds),nanos:Yy(e.nanos)}}function Yy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jy(e){return"string"==typeof e?Hy.fromBase64String(e):Hy.fromUint8Array(e)}function Xy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zy(e){const t=e.mapValue.fields.__previous_value__;return Xy(t)?Zy(t):t}function ev(e){const t=$y(e.mapValue.fields.__local_write_time__.timestampValue);return new kg(t.seconds,t.nanos)}class tv{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class nv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nv("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nv&&e.projectId===this.projectId&&e.database===this.database}}const rv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iv={nullValue:"NULL_VALUE"};function sv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xy(e)?4:wv(e)?9007199254740991:10:ag()}function ov(e,t){if(e===t)return!0;const n=sv(e);if(n!==sv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ev(e).isEqual(ev(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=$y(e.timestampValue),r=$y(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jy(e.bytesValue).isEqual(Jy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yy(e.geoPointValue.latitude)===Yy(t.geoPointValue.latitude)&&Yy(e.geoPointValue.longitude)===Yy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yy(e.integerValue)===Yy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yy(e.doubleValue),r=Yy(t.doubleValue);return n===r?sy(n)===sy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ig(e.arrayValue.values||[],t.arrayValue.values||[],ov);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(My(n)!==My(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ov(n[i],r[i])))return!1;return!0}(e,t);default:return ag()}}function av(e,t){return void 0!==(e.values||[]).find((e=>ov(e,t)))}function cv(e,t){if(e===t)return 0;const n=sv(e),r=sv(t);if(n!==r)return Sg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yy(e.integerValue||e.doubleValue),r=Yy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lv(e.timestampValue,t.timestampValue);case 4:return lv(ev(e),ev(t));case 5:return Sg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jy(e),r=Jy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sg(n[i],r[i]);if(0!==e)return e}return Sg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sg(Yy(e.latitude),Yy(t.latitude));return 0!==n?n:Sg(Yy(e.longitude),Yy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cv(n[i],r[i]);if(e)return e}return Sg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===rv.mapValue&&t===rv.mapValue)return 0;if(e===rv.mapValue)return 1;if(t===rv.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Sg(r[o],s[o]);if(0!==e)return e;const t=cv(n[r[o]],i[s[o]]);if(0!==t)return t}return Sg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ag()}}function lv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sg(e,t);const n=$y(e),r=$y(t),i=Sg(n.seconds,r.seconds);return 0!==i?i:Sg(n.nanos,r.nanos)}function uv(e){return hv(e)}function hv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=$y(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Jy(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Og.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(hv(e.fields[i]));return n+"}"}(e.mapValue):ag()}function dv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fv(e){return!!e&&"integerValue"in e}function pv(e){return!!e&&"arrayValue"in e}function mv(e){return!!e&&"nullValue"in e}function gv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yv(e){return!!e&&"mapValue"in e}function vv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fy(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bv(e){return"nullValue"in e?iv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?dv(nv.empty(),Og.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ag()}function _v(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?dv(nv.empty(),Og.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?rv:ag()}function Ev(e,t){const n=cv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sv(e,t){const n=cv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Iv{constructor(e){this.value=e}static empty(){return new Iv({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vv(t)}setAll(e){let t=Pg.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ov(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fy(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Iv(vv(this.value))}}function Tv(e){const t=[];return Fy(e.fields,((e,n)=>{const r=new Pg([e]);if(yv(n)){const e=Tv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Wy(t)}class kv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new kv(e,0,Cg.min(),Cg.min(),Cg.min(),Iv.empty(),0)}static newFoundDocument(e,t,n,r){return new kv(e,1,t,Cg.min(),n,r,0)}static newNoDocument(e,t){return new kv(e,2,t,Cg.min(),Cg.min(),Iv.empty(),0)}static newUnknownDocument(e,t){return new kv(e,3,t,Cg.min(),Cg.min(),Iv.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Cg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Iv.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Iv.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Cv{constructor(e,t){this.position=e,this.inclusive=t}}function xv(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Og.comparator(Og.fromName(o.referenceValue),n.key):cv(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Nv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ov(e.position[n],t.position[n]))return!1;return!0}class Av{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Pv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ov{}class Rv extends Ov{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qv(e,t,n):"array-contains"===t?new Hv(e,n):"in"===t?new Qv(e,n):"not-in"===t?new $v(e,n):"array-contains-any"===t?new Yv(e,n):new Rv(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Kv(e,n):new Wv(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cv(t,this.value)):null!==t&&sv(this.value)===sv(t)&&this.matchesComparison(cv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ag()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dv extends Ov{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Dv(e,t)}matches(e){return Lv(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Lv(e){return"and"===e.op}function Mv(e){return"or"===e.op}function Fv(e){return Uv(e)&&Lv(e)}function Uv(e){for(const t of e.filters)if(t instanceof Dv)return!1;return!0}function jv(e){if(e instanceof Rv)return e.field.canonicalString()+e.op.toString()+uv(e.value);if(Fv(e))return e.filters.map((e=>jv(e))).join(",");{const t=e.filters.map((e=>jv(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vv(e,t){return e instanceof Rv?function(e,t){return t instanceof Rv&&e.op===t.op&&e.field.isEqual(t.field)&&ov(e.value,t.value)}(e,t):e instanceof Dv?function(e,t){return t instanceof Dv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Vv(n,t.filters[r])),!0)}(e,t):void ag()}function zv(e,t){const n=e.filters.concat(t);return Dv.create(n,e.op)}function Bv(e){return e instanceof Rv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(uv(e.value))}(e):e instanceof Dv?function(e){return e.op.toString()+" {"+e.getFilters().map(Bv).join(" ,")+"}"}(e):"Filter"}class qv extends Rv{constructor(e,t,n){super(e,t,n),this.key=Og.fromName(n.referenceValue)}matches(e){const t=Og.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kv extends Rv{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wv extends Rv{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Og.fromName(e.referenceValue)))}class Hv extends Rv{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pv(t)&&av(t.arrayValue,this.value)}}class Qv extends Rv{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&av(this.value.arrayValue,t)}}class $v extends Rv{constructor(e,t){super(e,"not-in",t)}matches(e){if(av(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!av(this.value.arrayValue,t)}}class Yv extends Rv{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>av(this.value.arrayValue,e)))}}class Jv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Xv(e){return new Jv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Zv(e){const t=lg(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>jv(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),iy(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>uv(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>uv(e))).join(",")),t.ce=e}return t.ce}function ew(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Pv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nv(e.startAt,t.startAt)&&Nv(e.endAt,t.endAt)}function tw(e){return Og.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nw(e,t){return e.filters.filter((e=>e instanceof Rv&&e.field.isEqual(t)))}function rw(e,t,n){let r=iv,i=!0;for(const s of nw(e,t)){let e=iv,t=!0;switch(s.op){case"<":case"<=":e=bv(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=iv}Ev({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ev({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function iw(e,t,n){let r=rv,i=!0;for(const s of nw(e,t)){let e=rv,t=!0;switch(s.op){case">=":case">":e=_v(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=rv}Sv({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Sv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class sw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ow(e,t,n,r,i,s,o,a){return new sw(e,t,n,r,i,s,o,a)}function aw(e){return new sw(e)}function cw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lw(e){return null!==e.collectionGroup}function uw(e){const t=lg(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new By(Pg.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Av(r,n))})),e.has(Pg.keyField().canonicalString())||t.le.push(new Av(Pg.keyField(),n))}return t.le}function hw(e){const t=lg(e);return t.he||(t.he=dw(t,uw(e))),t.he}function dw(e,t){if("F"===e.limitType)return Xv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Av(e.field,t)}));const n=e.endAt?new Cv(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cv(e.startAt.position,e.startAt.inclusive):null;return Xv(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fw(e,t){const n=e.filters.concat([t]);return new sw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pw(e,t,n){return new sw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function mw(e,t){return ew(hw(e),hw(t))&&e.limitType===t.limitType}function gw(e){return"".concat(Zv(hw(e)),"|lt:").concat(e.limitType)}function yw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Bv(e))).join(", "),"]")),iy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>uv(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>uv(e))).join(",")),"Target(".concat(t,")")}(hw(e)),"; limitType=").concat(e.limitType,")")}function vw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Og.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of uw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uw(e),t))&&!(e.endAt&&!function(e,t,n){const r=xv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uw(e),t))}(e,t)}function ww(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bw(e){return(t,n)=>{let r=!1;for(const i of uw(e)){const e=_w(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function _w(e,t,n){const r=e.field.isKeyField()?Og.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cv(r,i):ag()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ag()}}class Ew{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fy(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Uy(this.inner)}size(){return this.innerSize}}const Sw=new jy(Og.comparator);function Iw(){return Sw}const Tw=new jy(Og.comparator);function kw(){let e=Tw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Cw(e){let t=Tw;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xw(){return Aw()}function Nw(){return Aw()}function Aw(){return new Ew((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pw=new jy(Og.comparator),Ow=new By(Og.comparator);function Rw(){let e=Ow;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Dw=new By(Sg);function Lw(){return Dw}function Mw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sy(t)?"-0":t}}function Fw(e){return{integerValue:""+e}}function Uw(e,t){return oy(t)?Fw(t):Mw(e,t)}class jw{constructor(){this._=void 0}}function Vw(e,t,n){return e instanceof qw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xy(t)&&(t=Zy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Kw?Ww(e,t):e instanceof Gw?Hw(e,t):function(e,t){const n=Bw(e,t),r=$w(n)+$w(e.Ie);return fv(n)&&fv(e.Ie)?Fw(r):Mw(e.serializer,r)}(e,t)}function zw(e,t,n){return e instanceof Kw?Ww(e,t):e instanceof Gw?Hw(e,t):n}function Bw(e,t){return e instanceof Qw?function(e){return fv(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class qw extends jw{}class Kw extends jw{constructor(e){super(),this.elements=e}}function Ww(e,t){const n=Yw(t);for(const r of e.elements)n.some((e=>ov(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Gw extends jw{constructor(e){super(),this.elements=e}}function Hw(e,t){let n=Yw(t);for(const r of e.elements)n=n.filter((e=>!ov(e,r)));return{arrayValue:{values:n}}}class Qw extends jw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function $w(e){return Yy(e.integerValue||e.doubleValue)}function Yw(e){return pv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Jw{constructor(e,t){this.field=e,this.transform=t}}class Xw{constructor(e,t){this.version=e,this.transformResults=t}}class Zw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zw}static exists(e){return new Zw(void 0,e)}static updateTime(e){return new Zw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class tb{}function nb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new db(e.key,Zw.none()):new ab(e.key,e.data,Zw.none());{const n=e.data,r=Iv.empty();let i=new By(Pg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new cb(e.key,r,new Wy(i.toArray()),Zw.none())}}function rb(e,t,n){e instanceof ab?function(e,t,n){const r=e.value.clone(),i=ub(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cb?function(e,t,n){if(!eb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ub(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ib(e,t,n,r){return e instanceof ab?function(e,t,n,r){if(!eb(e.precondition,t))return n;const i=e.value.clone(),s=hb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cb?function(e,t,n,r){if(!eb(e.precondition,t))return n;const i=hb(e.fieldTransforms,r,t),s=t.data;return s.setAll(lb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return eb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function sb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Bw(r.transform,e||null);null!=i&&(null===n&&(n=Iv.empty()),n.set(r.field,i))}return n||null}function ob(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ig(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Kw&&t instanceof Kw||e instanceof Gw&&t instanceof Gw?Ig(e.elements,t.elements,ov):e instanceof Qw&&t instanceof Qw?ov(e.Ie,t.Ie):e instanceof qw&&t instanceof qw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ab extends tb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cb extends tb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ub(e,t,n){const r=new Map;cg(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,zw(o,a,n[i]))}return r}function hb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Vw(e,s,t))}return r}class db extends tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fb extends tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&rb(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ib(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ib(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nw();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=nb(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Cg.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Rw())}isEqual(e){return this.batchId===e.batchId&&Ig(this.mutations,e.mutations,((e,t)=>ob(e,t)))&&Ig(this.baseMutations,e.baseMutations,((e,t)=>ob(e,t)))}}class mb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cg(e.mutations.length===n.length);let r=Pw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new mb(e,t,n,r)}}class gb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class yb{constructor(e,t){this.count=e,this.unchangedNames=t}}var vb,wb;function bb(e){switch(e){default:return ag();case ug.CANCELLED:case ug.UNKNOWN:case ug.DEADLINE_EXCEEDED:case ug.RESOURCE_EXHAUSTED:case ug.INTERNAL:case ug.UNAVAILABLE:case ug.UNAUTHENTICATED:return!1;case ug.INVALID_ARGUMENT:case ug.NOT_FOUND:case ug.ALREADY_EXISTS:case ug.PERMISSION_DENIED:case ug.FAILED_PRECONDITION:case ug.ABORTED:case ug.OUT_OF_RANGE:case ug.UNIMPLEMENTED:case ug.DATA_LOSS:return!0}}function _b(e){if(void 0===e)return ig("GRPC error has no .code"),ug.UNKNOWN;switch(e){case vb.OK:return ug.OK;case vb.CANCELLED:return ug.CANCELLED;case vb.UNKNOWN:return ug.UNKNOWN;case vb.DEADLINE_EXCEEDED:return ug.DEADLINE_EXCEEDED;case vb.RESOURCE_EXHAUSTED:return ug.RESOURCE_EXHAUSTED;case vb.INTERNAL:return ug.INTERNAL;case vb.UNAVAILABLE:return ug.UNAVAILABLE;case vb.UNAUTHENTICATED:return ug.UNAUTHENTICATED;case vb.INVALID_ARGUMENT:return ug.INVALID_ARGUMENT;case vb.NOT_FOUND:return ug.NOT_FOUND;case vb.ALREADY_EXISTS:return ug.ALREADY_EXISTS;case vb.PERMISSION_DENIED:return ug.PERMISSION_DENIED;case vb.FAILED_PRECONDITION:return ug.FAILED_PRECONDITION;case vb.ABORTED:return ug.ABORTED;case vb.OUT_OF_RANGE:return ug.OUT_OF_RANGE;case vb.UNIMPLEMENTED:return ug.UNIMPLEMENTED;case vb.DATA_LOSS:return ug.DATA_LOSS;default:return ag()}}(wb=vb||(vb={}))[wb.OK=0]="OK",wb[wb.CANCELLED=1]="CANCELLED",wb[wb.UNKNOWN=2]="UNKNOWN",wb[wb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wb[wb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wb[wb.NOT_FOUND=5]="NOT_FOUND",wb[wb.ALREADY_EXISTS=6]="ALREADY_EXISTS",wb[wb.PERMISSION_DENIED=7]="PERMISSION_DENIED",wb[wb.UNAUTHENTICATED=16]="UNAUTHENTICATED",wb[wb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wb[wb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wb[wb.ABORTED=10]="ABORTED",wb[wb.OUT_OF_RANGE=11]="OUT_OF_RANGE",wb[wb.UNIMPLEMENTED=12]="UNIMPLEMENTED",wb[wb.INTERNAL=13]="INTERNAL",wb[wb.UNAVAILABLE=14]="UNAVAILABLE",wb[wb.DATA_LOSS=15]="DATA_LOSS";let Eb=null;function Sb(){return new TextEncoder}const Ib=new Jm([4294967295,4294967295],0);function Tb(e){const t=Sb().encode(e),n=new Ym;return n.update(t),new Uint8Array(n.digest())}function kb(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Jm([n,r],0),new Jm([i,s],0)]}class Cb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xb("Invalid padding: ".concat(t));if(n<0)throw new xb("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new xb("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new xb("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Jm.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Jm.fromNumber(n)));return 1===r.compare(Ib)&&(r=new Jm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Tb(e),[n,r]=kb(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Cb(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Tb(e),[n,r]=kb(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ab.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Nb(Cg.min(),r,new jy(Sg),Iw(),Rw())}}class Ab{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ab(n,t,Rw(),Rw(),Rw())}}class Pb{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Ob{constructor(e,t){this.targetId=e,this.fe=t}}class Rb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hy.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Db{constructor(){this.ge=0,this.pe=Fb(),this.ye=Hy.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Rw(),t=Rw(),n=Rw();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ag()}})),new Ab(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Fb()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,cg(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Lb{constructor(e){this.Le=e,this.ke=new Map,this.qe=Iw(),this.Qe=Mb(),this.Ke=new jy(Sg)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:ag()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(tw(i))if(0===n){const e=new Og(i.path);this.We(t,e,kv.newNoDocument(e,Cg.min()))}else cg(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Eb||Eb.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Jy(n).toUint8Array()}catch(e){if(e instanceof Gy)return sg("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Cb(s,r,i)}catch(e){return sg(e instanceof xb?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&tw(i.target)){const t=new Og(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,kv.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Rw();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Nb(e,t,this.Ke,this.qe,n);return this.qe=Iw(),this.Qe=Mb(),this.Ke=new jy(Sg),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Db,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new By(Sg),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||rg("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Db),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Mb(){return new jy(Og.comparator)}function Fb(){return new jy(Og.comparator)}const Ub={asc:"ASCENDING",desc:"DESCENDING"},jb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vb={and:"AND",or:"OR"};class zb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bb(e,t){return e.useProto3Json||iy(t)?t:{value:t}}function qb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wb(e,t){return qb(e,t.toTimestamp())}function Gb(e){return cg(!!e),Cg.fromTimestamp(function(e){const t=$y(e);return new kg(t.seconds,t.nanos)}(e))}function Hb(e,t){return Qb(e,t).canonicalString()}function Qb(e,t){const n=function(e){return new Ng(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function $b(e){const t=Ng.fromString(e);return cg(y_(t)),t}function Yb(e,t){return Hb(e.databaseId,t.path)}function Jb(e,t){const n=$b(t);if(n.get(1)!==e.databaseId.projectId)throw new hg(ug.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hg(ug.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Og(t_(n))}function Xb(e,t){return Hb(e.databaseId,t)}function Zb(e){const t=$b(e);return 4===t.length?Ng.emptyPath():t_(t)}function e_(e){return new Ng(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function t_(e){return cg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function n_(e,t,n){return{name:Yb(e,t),fields:n.value.mapValue.fields}}function r_(e,t,n){const r=Jb(e,t.name),i=Gb(t.updateTime),s=t.createTime?Gb(t.createTime):Cg.min(),o=new Iv({mapValue:{fields:t.fields}}),a=kv.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function i_(e,t){let n;if(t instanceof ab)n={update:n_(e,t.key,t.value)};else if(t instanceof db)n={delete:Yb(e,t.key)};else if(t instanceof cb)n={update:n_(e,t.key,t.data),updateMask:g_(t.fieldMask)};else{if(!(t instanceof fb))return ag();n={verify:Yb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof qw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Kw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qw)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw ag()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ag()}(e,t.precondition)),n}function s_(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Zw.updateTime(Gb(e.updateTime)):void 0!==e.exists?Zw.exists(e.exists):Zw.none()}(t.currentDocument):Zw.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)cg("REQUEST_TIME"===t.setToServerValue),n=new qw;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Kw(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Gw(e)}else"increment"in t?n=new Qw(e,t.increment):ag();const r=Pg.fromServerFormat(t.fieldPath);return new Jw(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Jb(e,t.update.name),s=new Iv({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Wy(t.map((e=>Pg.fromServerFormat(e))))}(t.updateMask);return new cb(i,s,e,n,r)}return new ab(i,s,n,r)}if(t.delete){const r=Jb(e,t.delete);return new db(r,n)}if(t.verify){const r=Jb(e,t.verify);return new fb(r,n)}return ag()}function o_(e,t){return{documents:[Xb(e,t.path)]}}function a_(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xb(e,i);const s=function(e){if(0!==e.length)return m_(Dv.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:f_(e.field),direction:u_(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bb(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function c_(e){let t=Zb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){cg(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=l_(e);return t instanceof Dv&&Fv(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Av(p_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,iy(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Cv(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Cv(n,t)}(n.endAt)),ow(t,i,o,s,a,"F",c,l)}function l_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=p_(e.unaryFilter.field);return Rv.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=p_(e.unaryFilter.field);return Rv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=p_(e.unaryFilter.field);return Rv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=p_(e.unaryFilter.field);return Rv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ag()}}(e):void 0!==e.fieldFilter?function(e){return Rv.create(p_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ag()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dv.create(e.compositeFilter.filters.map((e=>l_(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ag()}}(e.compositeFilter.op))}(e):ag()}function u_(e){return Ub[e]}function h_(e){return jb[e]}function d_(e){return Vb[e]}function f_(e){return{fieldPath:e.canonicalString()}}function p_(e){return Pg.fromServerFormat(e.fieldPath)}function m_(e){return e instanceof Rv?function(e){if("=="===e.op){if(gv(e.value))return{unaryFilter:{field:f_(e.field),op:"IS_NAN"}};if(mv(e.value))return{unaryFilter:{field:f_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gv(e.value))return{unaryFilter:{field:f_(e.field),op:"IS_NOT_NAN"}};if(mv(e.value))return{unaryFilter:{field:f_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:f_(e.field),op:h_(e.op),value:e.value}}}(e):e instanceof Dv?function(e){const t=e.getFilters().map((e=>m_(e)));return 1===t.length?t[0]:{compositeFilter:{op:d_(e.op),filters:t}}}(e):ag()}function g_(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function y_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class v_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cg.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cg.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hy.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new v_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new v_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new v_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new v_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class w_{constructor(e){this.ct=e}}function b_(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:__(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Yb(e,t.key),fields:t.data.value.mapValue.fields,updateTime:qb(e,t.version.toTimestamp()),createTime:qb(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:E_(t.version)};else{if(!t.isUnknownDocument())return ag();r.unknownDocument={path:n.path.toArray(),version:E_(t.version)}}return r}function __(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function E_(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function S_(e){const t=new kg(e.seconds,e.nanoseconds);return Cg.fromTimestamp(t)}function I_(e,t){const n=(t.baseMutations||[]).map((t=>s_(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>s_(e.ct,t))),i=kg.fromMillis(t.localWriteTimeMs);return new pb(t.batchId,i,n,r)}function T_(e){const t=S_(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?S_(e.lastLimboFreeSnapshotVersion):Cg.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return cg(1===e.documents.length),hw(aw(Zb(e.documents[0])))}(e.query):function(e){return hw(c_(e))}(e.query),new v_(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Hy.fromBase64String(e.resumeToken))}function k_(e,t){const n=E_(t.snapshotVersion),r=E_(t.lastLimboFreeSnapshotVersion);let i;i=tw(t.target)?o_(e.ct,t.target):a_(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Zv(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function C_(e){const t=c_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pw(t,t.limit,"L"):t}function x_(e,t){return new gb(t.largestBatchId,s_(e.ct,t.overlayMutation))}function N_(e,t){const n=t.path.lastSegment();return[e,ay(t.path.popLast()),n]}function A_(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:E_(r.readTime),documentKey:ay(r.documentKey.path),largestBatchId:r.largestBatchId}}class P_{getBundleMetadata(e,t){return O_(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:S_(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return O_(e).put(function(e){return{bundleId:e.id,createTime:E_(Gb(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return R_(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:C_(e.bundledQuery),readTime:S_(e.readTime)}}(e)}))}saveNamedQuery(e,t){return R_(e).put(function(e){return{name:e.name,readTime:E_(Gb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function O_(e){return Ly(e,"bundles")}function R_(e){return Ly(e,"namedQueries")}class D_{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new D_(e,n)}getOverlay(e,t){return L_(e).get(N_(this.userId,t)).next((e=>e?x_(this.serializer,e):null))}getOverlays(e,t){const n=xw();return Wg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new gb(t,i);r.push(this.ht(e,s))})),Wg.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(ay(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(L_(e).H("collectionPathOverlayIndex",r))})),Wg.waitFor(i)}getOverlaysForCollection(e,t,n){const r=xw(),i=ay(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return L_(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=x_(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=xw();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return L_(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=x_(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return L_(e).put(function(e,t,n){const[r,i,s]=N_(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:i_(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function L_(e){return Ly(e,"documentOverlays")}class M_{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Yy(e.integerValue));else if("doubleValue"in e){const n=Yy(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),sy(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Jy(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?wv(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ag()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Og.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function F_(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function U_(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=F_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}M_.bt=new M_;class j_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=U_(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=U_(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class V_{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class z_{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class B_{constructor(){this.Gt=new j_,this.zt=new V_(this.Gt),this.jt=new z_(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class q_{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new q_(this.indexId,this.documentKey,this.arrayValue,n)}}function K_(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=W_(e.arrayValue,t.arrayValue),0!==n?n:(n=W_(e.directionalValue,t.directionalValue),0!==n?n:Og.comparator(e.documentKey,t.documentKey)))}function W_(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class G_{constructor(e){this.Yt=new By(((e,t)=>Pg.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(cg(e.collectionGroup===this.collectionId),this.en)return!1;const t=Dg(e);if(void 0!==t&&!this.nn(t))return!1;const n=Lg(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new By(Pg.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Mg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Mg(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Mg(n.field,"asc"===n.dir?0:1)));return new Rg(Rg.UNKNOWN_ID,this.collectionId,t,Fg.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function H_(e){var t,n;if(cg(e instanceof Rv||e instanceof Dv),e instanceof Rv){if(e instanceof Qv){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Rv.create(e.field,"==",t))))||[];return Dv.create(r,"or")}return e}const r=e.filters.map((e=>H_(e)));return Dv.create(r,e.op)}function Q_(e){if(0===e.getFilters().length)return[];const t=X_(H_(e));return cg(J_(t)),$_(t)||Y_(t)?[t]:t.getFilters()}function $_(e){return e instanceof Rv}function Y_(e){return e instanceof Dv&&Fv(e)}function J_(e){return $_(e)||Y_(e)||function(e){if(e instanceof Dv&&Mv(e)){for(const t of e.getFilters())if(!$_(t)&&!Y_(t))return!1;return!0}return!1}(e)}function X_(e){if(cg(e instanceof Rv||e instanceof Dv),e instanceof Rv)return e;if(1===e.filters.length)return X_(e.filters[0]);const t=e.filters.map((e=>X_(e)));let n=Dv.create(t,e.op);return n=tE(n),J_(n)?n:(cg(n instanceof Dv),cg(Lv(n)),cg(n.filters.length>1),n.filters.reduce(((e,t)=>Z_(e,t))))}function Z_(e,t){let n;return cg(e instanceof Rv||e instanceof Dv),cg(t instanceof Rv||t instanceof Dv),n=e instanceof Rv?t instanceof Rv?function(e,t){return Dv.create([e,t],"and")}(e,t):eE(e,t):t instanceof Rv?eE(t,e):function(e,t){if(cg(e.filters.length>0&&t.filters.length>0),Lv(e)&&Lv(t))return zv(e,t.getFilters());const n=Mv(e)?e:t,r=Mv(e)?t:e,i=n.filters.map((e=>Z_(e,r)));return Dv.create(i,"or")}(e,t),tE(n)}function eE(e,t){if(Lv(t))return zv(t,e.getFilters());{const n=t.filters.map((t=>Z_(e,t)));return Dv.create(n,"or")}}function tE(e){if(cg(e instanceof Rv||e instanceof Dv),e instanceof Rv)return e;const t=e.getFilters();if(1===t.length)return tE(t[0]);if(Uv(e))return e;const n=t.map((e=>tE(e))),r=[];return n.forEach((t=>{t instanceof Rv?r.push(t):t instanceof Dv&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Dv.create(r,e.op)}class nE{constructor(){this._n=new rE}addToCollectionParentIndex(e,t){return this._n.add(t),Wg.resolve()}getCollectionParents(e,t){return Wg.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Wg.resolve()}deleteFieldIndex(e,t){return Wg.resolve()}deleteAllFieldIndexes(e){return Wg.resolve()}createTargetIndexes(e,t){return Wg.resolve()}getDocumentsMatchingTarget(e,t){return Wg.resolve(null)}getIndexType(e,t){return Wg.resolve(0)}getFieldIndexes(e,t){return Wg.resolve([])}getNextCollectionGroupToUpdate(e){return Wg.resolve(null)}getMinOffset(e,t){return Wg.resolve(Vg.min())}getMinOffsetFromCollectionGroup(e,t){return Wg.resolve(Vg.min())}updateCollectionGroup(e,t,n){return Wg.resolve()}updateIndexEntries(e,t){return Wg.resolve()}}class rE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new By(Ng.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new By(Ng.comparator)).toArray()}}const iE=new Uint8Array(0);class sE{constructor(e,t){this.databaseId=t,this.an=new rE,this.un=new Ew((e=>Zv(e)),((e,t)=>ew(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:ay(r)};return oE(e).put(i)}return Wg.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Tg(t),""],!1,!0);return oE(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(uy(r.parent))}return n}))}addFieldIndex(e,t){const n=cE(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=lE(e);return i.next((e=>{n.put(A_(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=cE(e),r=lE(e),i=aE(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=cE(e),n=aE(e),r=lE(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Wg.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new G_(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=aE(e);let r=!0;const i=new Map;return Wg.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Rw();const r=[];return Wg.forEach(i,((i,s)=>{rg("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Zv(t)));const o=function(e,t){const n=Dg(t);if(void 0===n)return null;for(const r of nw(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Lg(t))for(const t of nw(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Lg(t)){const t=0===i.kind?rw(e,i.fieldPath,e.startAt):iw(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Cv(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Lg(t)){const t=0===i.kind?iw(e,i.fieldPath,e.endAt):rw(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Cv(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return Wg.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Og.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Wg.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Q_(Dv.create(e.filters,"and")).map((t=>Xv(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):iE,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new q_(e,Og.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new q_(e,Og.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new G_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Wg.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new By(Pg.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new B_;for(const r of Lg(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);M_.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new B_;return M_.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new B_;return M_.bt.Pt(dv(this.databaseId,t),n.Ht(function(e){const t=Lg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new B_);let i=0;for(const s of Lg(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&pv(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);M_.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new B_;n.seed(e.Wt()),M_.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Rv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=cE(e),r=lE(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Wg.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Fg(t.sequenceNumber,new Vg(S_(t.readTime),new Og(uy(t.documentKey)),t.largestBatchId)):Fg.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Mg(Pg.fromServerFormat(t),n)}));return new Rg(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Sg(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=cE(e),i=lE(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Wg.forEach(t,(t=>i.put(A_(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Wg.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Wg.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Wg.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Wg.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return aE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return aE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=aE(e);let i=new By(K_);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new q_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new By(K_);const r=this.An(t,e);if(null==r)return n;const i=Dg(t);if(null!=i){const s=e.data.field(i.fieldPath);if(pv(s))for(const i of s.arrayValue.values||[])n=n.add(new q_(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new q_(t.indexId,e.key,iE,r));return n}wn(e,t,n,r,i){rg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Ky(s),c=Ky(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Ky(o)):t?(i(a),a=Ky(s)):(a=Ky(s),c=Ky(o))}}(r,i,K_,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Wg.waitFor(s)}gn(e){let t=1;return lE(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>K_(e,t))).filter(((e,t,n)=>!t||0!==K_(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=K_(s,e),i=K_(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,iE,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,iE,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return K_(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uE)}getMinOffset(e,t){return Wg.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||ag())))).next(uE)}}function oE(e){return Ly(e,"collectionParents")}function aE(e){return Ly(e,"indexEntries")}function cE(e){return Ly(e,"indexConfiguration")}function lE(e){return Ly(e,"indexState")}function uE(e){cg(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;zg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vg(t.readTime,t.documentKey,n)}const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dE{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dE(e,dE.DEFAULT_COLLECTION_PERCENTILE,dE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fE(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{cg(1===a)})));const l=[];for(const u of n.mutations){const e=fy(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return Wg.waitFor(s).next((()=>l))}function pE(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ag();t=e.noDocument}return JSON.stringify(t).length}dE.DEFAULT_COLLECTION_PERCENTILE=10,dE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dE.DEFAULT=new dE(41943040,dE.DEFAULT_COLLECTION_PERCENTILE,dE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dE.DISABLED=new dE(-1,0,0);class mE{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){cg(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new mE(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yE(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=vE(e),s=yE(e);return s.add({}).next((o=>{cg("number"==typeof o);const a=new pb(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>i_(e.ct,t))),i=n.mutations.map((t=>i_(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new By(((e,t)=>Sg(e.canonicalString(),t.canonicalString())));for(const e of r){const t=fy(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,py))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Wg.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return yE(e).get(t).next((e=>e?(cg(e.userId===this.userId),I_(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Wg.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return yE(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(cg(t.batchId>=n),i=I_(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return yE(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yE(e).W("userMutationsIndex",t).next((e=>e.map((e=>I_(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=dy(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return vE(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=uy(a);if(o===this.userId&&t.path.isEqual(l))return yE(e).get(c).next((e=>{if(!e)throw ag();cg(e.userId===this.userId),i.push(I_(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new By(Sg);const r=[];return t.forEach((t=>{const i=dy(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=vE(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=uy(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),Wg.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=dy(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new By(Sg);return vE(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=uy(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(yE(e).get(t).next((e=>{if(null===e)throw ag();cg(e.userId===this.userId),n.push(I_(this.serializer,e))})))})),Wg.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return fE(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Wg.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Wg.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return vE(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=uy(e[1]);r.push(t)}else n.done()})).next((()=>{cg(0===r.length)}))}))}containsKey(e,t){return gE(e,this.userId,t)}xn(e){return wE(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function gE(e,t,n){const r=dy(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return vE(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function yE(e){return Ly(e,"mutations")}function vE(e){return Ly(e,"documentMutations")}function wE(e){return Ly(e,"mutationQueues")}class bE{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new bE(0)}static Bn(){return new bE(-1)}}class _E{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new bE(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Cg.fromTimestamp(new kg(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>EE(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(cg(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return EE(e).Y(((s,o)=>{const a=T_(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Wg.waitFor(i))).next((()=>r))}forEachTarget(e,t){return EE(e).Y(((e,n)=>{const r=T_(n);t(r)}))}Ln(e){return SE(e).get("targetGlobalKey").next((e=>(cg(null!==e),e)))}kn(e,t){return SE(e).put("targetGlobalKey",t)}qn(e,t){return EE(e).put(k_(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Zv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return EE(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=T_(n);ew(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=IE(e);return t.forEach((t=>{const s=ay(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Wg.waitFor(r)}removeMatchingKeys(e,t,n){const r=IE(e);return Wg.forEach(t,(t=>{const i=ay(t.path);return Wg.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=IE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=IE(e);let i=Rw();return r.Y({range:n,J:!0},((e,t,n)=>{const r=uy(e[1]),s=new Og(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=ay(t.path),r=IDBKeyRange.bound([n],[Tg(n)],!1,!0);let i=0;return IE(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return EE(e).get(t).next((e=>e?T_(e):null))}}function EE(e){return Ly(e,"targets")}function SE(e){return Ly(e,"targetGlobal")}function IE(e){return Ly(e,"targetDocuments")}function TE(e,t){let[n,r]=e,[i,s]=t;const o=Sg(n,i);return 0===o?Sg(r,s):o}class kE{constructor(e){this.Kn=e,this.buffer=new By(TE),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();TE(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CE{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){rg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Yg(e)?rg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Kg(e)}await this.zn(3e5)}))}}class xE{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Wg.resolve(ry._e);const n=new kE(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rg("LruGarbageCollector","Garbage collection skipped; disabled"),Wg.resolve(hE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(rg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),hE):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(rg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),ng()<=_s.DEBUG&&rg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),Wg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function NE(e,t){return new xE(e,t)}class AE{constructor(e,t){this.db=e,this.garbageCollector=NE(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return PE(e,n)}removeReference(e,t,n){return PE(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return PE(e,t)}er(e,t){return function(e,t){let n=!1;return wE(e).Z((r=>gE(e,r,t).next((e=>(e&&(n=!0),Wg.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Cg.min()),IE(e).delete(function(e){return[0,ay(e.path)]}(s)))))}));r.push(t)}})).next((()=>Wg.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return PE(e,t)}Xn(e,t){const n=IE(e);let r,i=ry._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==ry._e&&t(new Og(uy(r)),i),i=c,r=a):i=ry._e})).next((()=>{i!==ry._e&&t(new Og(uy(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PE(e,t){return IE(e).put(function(e,t){return{targetId:0,path:ay(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class OE{constructor(){this.changes=new Ew((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Wg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RE{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return FE(e).put(n)}removeEntry(e,t,n){return FE(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],__(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=kv.newInvalidDocument(t);return FE(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(UE(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:kv.newInvalidDocument(t)};return FE(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(UE(t))},((e,r)=>{n={document:this.nr(t,r),size:pE(r)}})).next((()=>n))}getEntries(e,t){let n=Iw();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Iw(),r=new jy(Og.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,pE(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Wg.resolve();let r=new By(VE);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(UE(r.first()),UE(r.last())),s=r.getIterator();let o=s.getNext();return FE(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Og.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&VE(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(UE(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),__(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return FE(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Iw();for(const i of e){const e=this.nr(Og.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(vw(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Iw();const s=jE(t,n),o=jE(t,Vg.max());return FE(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Og.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new LE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return ME(e).get("remoteDocumentGlobalKey").next((e=>(cg(!!e),e)))}tr(e,t){return ME(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=r_(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Og.fromSegments(t.noDocument.path),r=S_(t.noDocument.readTime);n=kv.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ag();{const e=Og.fromSegments(t.unknownDocument.path),r=S_(t.unknownDocument.version);n=kv.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new kg(e[0],e[1]);return Cg.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Cg.min()))return e}return kv.newInvalidDocument(e)}}function DE(e){return new RE(e)}class LE extends OE{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ew((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new By(((e,t)=>Sg(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=b_(this.ar.serializer,s);r=r.add(i.path.popLast());const c=pE(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=b_(this.ar.serializer,s.convertToNoDocument(Cg.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Wg.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function ME(e){return Ly(e,"remoteDocumentGlobal")}function FE(e){return Ly(e,"remoteDocumentsV14")}function UE(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jE(e,t){const n=t.documentKey.path.toArray();return[e,__(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function VE(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Sg(n[s],r[s]),i)return i;return i=Sg(n.length,r.length),i||(i=Sg(n[n.length-2],r[r.length-2]),i||Sg(n[n.length-1],r[r.length-1]))}class zE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ib(n.mutation,e,Wy.empty(),kg.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Rw()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rw();const r=xw();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=kw();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xw();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Rw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Iw();const s=Aw(),o=Aw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cb)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ib(o.mutation,t,o.mutation.getFieldMask(),kg.now())):s.set(t.key,Wy.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zE(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Aw();let r=new jy(((e,t)=>e-t)),i=Rw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Wy.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Rw()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Nw();c.forEach((e=>{if(!i.has(e)){const r=nb(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Wg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Og.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Wg.resolve(xw());let o=-1,a=i;return s.next((t=>Wg.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Wg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Rw()))).next((e=>({batchId:o,changes:Cw(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Og(t)).next((e=>{let t=kw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=kw();return this.indexManager.getCollectionParents(e,i).next((o=>Wg.forEach(o,(o=>{const a=function(e,t){return new sw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,kv.newInvalidDocument(r)))}));let n=kw();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&ib(s.mutation,r,Wy.empty(),kg.now()),vw(t,r)&&(n=n.insert(e,r))})),n}))}}class qE{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Wg.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Gb(e.createTime)}}(t)),Wg.resolve()}getNamedQuery(e,t){return Wg.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:C_(e.bundledQuery),readTime:Gb(e.readTime)}}(t)),Wg.resolve()}}class KE{constructor(){this.overlays=new jy(Og.comparator),this.hr=new Map}getOverlay(e,t){return Wg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xw();return Wg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Wg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Wg.resolve()}getOverlaysForCollection(e,t,n){const r=xw(),i=t.length+1,s=new Og(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Wg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new jy(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xw(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=xw(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Wg.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gb(t,n));let i=this.hr.get(t);void 0===i&&(i=Rw(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class WE{constructor(){this.Pr=new By(GE.Ir),this.Tr=new By(GE.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new GE(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new GE(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Og(new Ng([])),n=new GE(t,e),r=new GE(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Og(new Ng([])),n=new GE(t,e),r=new GE(t,e+1);let i=Rw();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new GE(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class GE{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Og.comparator(e.key,t.key)||Sg(e.pr,t.pr)}static Er(e,t){return Sg(e.pr,t.pr)||Og.comparator(e.key,t.key)}}class HE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new By(GE.Ir)}checkEmpty(e){return Wg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pb(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new GE(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Wg.resolve(s)}lookupMutationBatch(e,t){return Wg.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Wg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Wg.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Wg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new GE(t,0),r=new GE(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Wg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new By(Sg);return t.forEach((e=>{const t=new GE(e,0),r=new GE(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Wg.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Og.isDocumentKey(i)||(i=i.child(""));const s=new GE(new Og(i),0);let o=new By(Sg);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Wg.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){cg(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Wg.forEach(t.mutations,(r=>{const i=new GE(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new GE(t,0),r=this.wr.firstAfterOrEqual(n);return Wg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Wg.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QE{constructor(e){this.vr=e,this.docs=new jy(Og.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Wg.resolve(n?n.document.mutableCopy():kv.newInvalidDocument(t))}getEntries(e,t){let n=Iw();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():kv.newInvalidDocument(e))})),Wg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Iw();const s=t.path,o=new Og(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||zg(jg(o),n)<=0||(r.has(o.key)||vw(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Wg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ag()}Fr(e,t){return Wg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new $E(this)}getSize(e){return Wg.resolve(this.size)}}class $E extends OE{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Wg.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class YE{constructor(e){this.persistence=e,this.Mr=new Ew((e=>Zv(e)),ew),this.lastRemoteSnapshotVersion=Cg.min(),this.highestTargetId=0,this.Or=0,this.Nr=new WE,this.targetCount=0,this.Br=bE.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Wg.resolve()}getLastRemoteSnapshotVersion(e){return Wg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Wg.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Wg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Wg.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new bE(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Wg.resolve()}updateTargetData(e,t){return this.qn(t),Wg.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Wg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Wg.waitFor(i).next((()=>r))}getTargetCount(e){return Wg.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Wg.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Wg.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Wg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Wg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Wg.resolve(n)}containsKey(e,t){return Wg.resolve(this.Nr.containsKey(t))}}class JE{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ry(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new YE(this),this.indexManager=new nE,this.remoteDocumentCache=function(e){return new QE(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new w_(t),this.$r=new qE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new HE(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){rg("MemoryPersistence","Starting transaction:",e);const r=new XE(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Wg.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class XE extends qg{constructor(e){super(),this.currentSequenceNumber=e}}class ZE{constructor(e){this.persistence=e,this.zr=new WE,this.jr=null}static Hr(e){return new ZE(e)}get Jr(){if(this.jr)return this.jr;throw ag()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Wg.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Wg.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Wg.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wg.forEach(this.Jr,(n=>{const r=Og.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Cg.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Wg.or([()=>Wg.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class eS{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Gg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0}),e.createObjectStore("documentMutations")}(e),tS(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Wg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tS(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Cg.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hy,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Wg.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ky});t.createIndex("collectionPathOverlayIndex",Cy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xy,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:my});t.createIndex("documentKeyIndex",gy),t.createIndex("collectionGroupIndex",yy)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ey}).createIndex("sequenceNumberIndex",Sy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Iy}).createIndex("documentKeyIndex",Ty,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=pE(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Wg.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Wg.forEach(n,(n=>{cg(n.userId===t.userId);const r=I_(this.serializer,n);return fE(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new Ng(n),o=function(e){return[0,ay(e)]}(s);r.push(t.get(o).next((n=>n?Wg.resolve():(n=>t.put({targetId:0,path:ay(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Wg.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:_y});const n=t.store("collectionParents"),r=new rE,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:ay(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Ng(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=uy(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=T_(n),i=k_(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Og(Ng.fromString(e.document.name).popFirst(5)):e.noDocument?Og.fromSegments(e.noDocument.path):e.unknownDocument?Og.fromSegments(e.unknownDocument.path):ag()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Wg.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=DE(this.serializer),i=new JE(ZE.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Rw();I_(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Wg.forEach(n,((e,n)=>{const s=new Zm(n),o=D_.lt(this.serializer,s),a=i.getIndexManager(s),c=mE.lt(s,this.serializer,a,i.referenceDelegate);return new BE(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Dy(t,ry._e),e).next()}))}))}}function tS(e){e.createObjectStore("targetDocuments",{keyPath:wy}).createIndex("documentTargetsIndex",by,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vy,{unique:!0}),e.createObjectStore("targetGlobal")}const nS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rS{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!rS.D())throw new hg(ug.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AE(this,r),this.Ti=t+"main",this.serializer=new w_(a),this.Ei=new Hg(this.Ti,this.ui,new eS(this.serializer)),this.Qr=new _E(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DE(this.serializer),this.$r=new P_,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&ig("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hg(ug.FAILED_PRECONDITION,nS);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new ry(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>sS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Yg(e))return rg("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return iS(e).get("owner").next((e=>Wg.resolve(this.Si(e))))}bi(e){return sS(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ly(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Wg.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Wg.resolve(!0):iS(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new hg(ug.FAILED_PRECONDITION,nS);return!1}}return!(!this.networkEnabled||!this.inForeground)||sS(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&rg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Dy(e,ry._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>sS(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return mE.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return D_.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){rg("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Ry:14===e?Oy:13===e?Py:12===e?Ay:11===e?Ny:void ag()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Dy(r,this.kr?this.kr.next():ry._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw ig("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new hg(ug.FAILED_PRECONDITION,Bg);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return iS(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new hg(ug.FAILED_PRECONDITION,nS)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iS(e).put("owner",t)}static D(){return Hg.D()}yi(e){const t=iS(e);return t.get("owner").next((e=>this.Si(e)?(rg("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Wg.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ig("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ts()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return rg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ig("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ig("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function iS(e){return Ly(e,"owner")}function sS(e){return Ly(e,"clientMetadata")}function oS(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class aS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Rw(),r=Rw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new aS(e,t.fromCache,n,r)}}class cS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lS{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ts()?8:Hg.v(Yi())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new cS;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ng()<=_s.DEBUG&&rg("QueryEngine","SDK will not create cache indexes for query:",yw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Wg.resolve()):(ng()<=_s.DEBUG&&rg("QueryEngine","Query:",yw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ng()<=_s.DEBUG&&rg("QueryEngine","The SDK decides to create cache indexes for query:",yw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hw(t))):Wg.resolve())}ji(e,t){if(cw(t))return Wg.resolve(null);let n=hw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=pw(t,null,"F"),n=hw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Rw(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,pw(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return cw(t)||r.isEqual(Cg.min())?Wg.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Wg.resolve(null):(ng()<=_s.DEBUG&&rg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yw(t)),this.es(e,s,t,Ug(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new By(bw(e));return t.forEach(((t,r)=>{vw(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ng()<=_s.DEBUG&&rg("QueryEngine","Using full collection scan to execute query:",yw(t)),this.zi.getDocumentsMatchingQuery(e,t,Vg.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class uS{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new jy(Sg),this.rs=new Ew((e=>Zv(e)),ew),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function hS(e,t,n,r){return new uS(e,t,n,r)}async function dS(e,t){const n=lg(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Rw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function fS(e){const t=lg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function pS(e,t,n){let r=Rw(),i=Rw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Iw();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Cg.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):rg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function mS(e,t){const n=lg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function gS(e,t){const n=lg(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Wg.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new v_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function yS(e,t,n){const r=lg(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Yg(e))throw e;rg("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function vS(e,t,n){const r=lg(e);let i=Cg.min(),s=Rw();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=lg(e),i=r.rs.get(n);return void 0!==i?Wg.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,hw(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Cg.min(),n?s:Rw()))).next((e=>(_S(r,ww(t),e),{documents:e,hs:s})))))}function wS(e,t){const n=lg(e),r=lg(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function bS(e,t){const n=lg(e),r=n.ss.get(t)||Cg.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Ug(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(_S(n,t,e),e)))}function _S(e,t,n){let r=e.ss.get(t)||Cg.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function ES(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rw();const r=await gS(e,hw(C_(t.bundledQuery))),i=lg(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Gb(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Hy.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function SS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function IS(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function TS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class kS{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new hg(r.error.code,r.error.message))),s?new kS(e,t,r.state,i):(ig("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CS{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new hg(n.error.code,n.error.message))),i?new CS(e,n.state,r):(ig("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Lw();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=oy(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new xS(e,i):(ig("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class NS{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new NS(t.clientId,t.onlineState):(ig("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class AS{constructor(){this.activeTargetIds=Lw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PS{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new jy(Sg),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=SS(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new AS),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(SS(this.persistenceKey,n));if(e){const t=xS.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(TS(this.persistenceKey,e));if(n){const r=CS.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TS(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rg("SharedClientState","READ",e,t),t}setItem(e,t){rg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(rg("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void ig("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=ry._e;if(null!=e)try{const n=JSON.parse(e);cg("number"==typeof n),t=n}catch(e){ig("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ry._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new kS(this.currentUser,e,t,n),i=IS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=IS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=TS(this.persistenceKey,e),i=new CS(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return xS.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return kS.Es(new Zm(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return CS.Es(r,t)}xs(e){return NS.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);rg("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Lw();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class OS{constructor(){this.no=new AS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new AS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RS{io(e){}shutdown(){}}class DS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){rg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){rg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let LS=null;function MS(){return null===LS?LS=268435456+Math.round(2147483648*Math.random()):LS++,"0x"+LS.toString(16)}const FS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class US{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const jS="WebChannelConnection";class VS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=MS(),o=this.bo(e,t.toUriEncodedString());rg("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(rg("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw sg("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+eg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=FS[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=MS();return new Promise(((s,o)=>{const a=new $m;a.setWithCredentials(!0),a.listenOnce(Wm.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Km.NO_ERROR:const t=a.getResponseJson();rg(jS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Km.TIMEOUT:rg(jS,"RPC '".concat(e,"' ").concat(i," timed out")),o(new hg(ug.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const n=a.getStatus();if(rg(jS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ug).indexOf(t)>=0?t:ug.UNKNOWN}(t.status);o(new hg(e,t.message))}else o(new hg(ug.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hg(ug.UNAVAILABLE,"Connection failed."));break;default:ag()}}finally{rg(jS,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);rg(jS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=MS(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bm(),o=qm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");rg(jS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new US({lo:t=>{d?rg(jS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(rg(jS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),rg(jS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Qm.EventType.OPEN,(()=>{d||rg(jS,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Qm.EventType.CLOSE,(()=>{d||(d=!0,rg(jS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Qm.EventType.ERROR,(t=>{d||(d=!0,sg(jS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new hg(ug.UNAVAILABLE,"The operation could not be completed")))})),p(u,Qm.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];cg(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){rg(jS,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=vb[e];if(void 0!==t)return _b(t)}(t),i=o.message;void 0===n&&(n=ug.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new hg(n,i)),u.close()}else rg(jS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Gm.STAT_EVENT,(t=>{t.stat===Hm.PROXY?rg(jS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Hm.NOPROXY&&rg(jS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function zS(){return"undefined"!=typeof window?window:null}function BS(){return"undefined"!=typeof document?document:null}function qS(e){return new zb(e,!0)}class KS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&rg("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class WS{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new KS(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===ug.RESOURCE_EXHAUSTED?(ig(t.toString()),ig("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===ug.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new hg(ug.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return rg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(rg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GS extends WS{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ag()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(cg(void 0===t||"string"==typeof t),Hy.fromBase64String(t||"")):(cg(void 0===t||t instanceof Uint8Array),Hy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ug.UNKNOWN:_b(e.code);return new hg(t,e.message||"")}(o);n=new Rb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jb(e,r.document.name),s=Gb(r.document.updateTime),o=r.document.createTime?Gb(r.document.createTime):Cg.min(),a=new Iv({mapValue:{fields:r.document.fields}}),c=kv.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Pb(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Jb(e,r.document),s=r.readTime?Gb(r.readTime):Cg.min(),o=kv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Pb([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Jb(e,r.document),s=r.removedTargetIds||[];n=new Pb([],s,i,null)}else{if(!("filter"in t))return ag();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new yb(r,i),o=e.targetId;n=new Ob(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Cg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Cg.min():t.readTime?Gb(t.readTime):Cg.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=e_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=tw(r)?{documents:o_(e,r)}:{query:a_(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Kb(e,t.resumeToken);const r=Bb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Cg.min())>0){n.readTime=qb(e,t.snapshotVersion.toTimestamp());const r=Bb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ag()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=e_(this.serializer),t.removeTarget=e,this.t_(t)}}class HS extends WS{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(cg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(cg(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Gb(e.updateTime):Gb(t);return n.isEqual(Cg.min())&&(n=Gb(t)),new Xw(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Gb(e.commitTime);return this.listener.T_(n,t)}return cg(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=e_(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>i_(this.serializer,e)))};this.t_(t)}}class QS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new hg(ug.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Qb(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ug.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hg(ug.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Qb(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ug.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hg(ug.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class $S{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(ig(t),this.g_=!1):rg("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class YS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{sI(this)&&(rg("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=lg(e);t.v_.add(4),await XS(t),t.x_.set("Unknown"),t.v_.delete(4),await JS(t)}(this))}))})),this.x_=new $S(n,r)}}async function JS(e){if(sI(e))for(const t of e.F_)await t(!0)}async function XS(e){for(const t of e.F_)await t(!1)}function ZS(e,t){const n=lg(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),iI(n)?rI(n):SI(n).Jo()&&tI(n,t))}function eI(e,t){const n=lg(e),r=SI(n);n.C_.delete(t),r.Jo()&&nI(n,t),0===n.C_.size&&(r.Jo()?r.Xo():sI(n)&&n.x_.set("Unknown"))}function tI(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}SI(e).c_(t)}function nI(e,t){e.O_.Oe(t),SI(e).l_(t)}function rI(e){e.O_=new Lb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),SI(e).start(),e.x_.p_()}function iI(e){return sI(e)&&!SI(e).Ho()&&e.C_.size>0}function sI(e){return 0===lg(e).v_.size}function oI(e){e.O_=void 0}async function aI(e){e.C_.forEach(((t,n)=>{tI(e,t)}))}async function cI(e,t){oI(e),iI(e)?(e.x_.S_(t),rI(e)):e.x_.set("Unknown")}async function lI(e,t,n){if(e.x_.set("Online"),t instanceof Rb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){rg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await uI(e,n)}else if(t instanceof Pb?e.O_.$e(t):t instanceof Ob?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Cg.min()))try{const t=await fS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Hy.EMPTY_BYTE_STRING,r.snapshotVersion)),nI(e,t);const i=new v_(r.target,t,n,r.sequenceNumber);tI(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){rg("RemoteStore","Failed to raise snapshot:",t),await uI(e,t)}}async function uI(e,t,n){if(!Yg(t))throw t;e.v_.add(1),await XS(e),e.x_.set("Offline"),n||(n=()=>fS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{rg("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await JS(e)}))}function hI(e,t){return t().catch((n=>uI(e,n,t)))}async function dI(e){const t=lg(e),n=II(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;fI(t);)try{const e=await mS(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,pI(t,e)}catch(e){await uI(t,e)}mI(t)&&gI(t)}function fI(e){return sI(e)&&e.D_.length<10}function pI(e,t){e.D_.push(t);const n=II(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function mI(e){return sI(e)&&!II(e).Ho()&&e.D_.length>0}function gI(e){II(e).start()}async function yI(e){II(e).d_()}async function vI(e){const t=II(e);for(const n of e.D_)t.I_(n.mutations)}async function wI(e,t,n){const r=e.D_.shift(),i=mb.from(r,t,n);await hI(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await dI(e)}async function bI(e,t){t&&II(e).P_&&await async function(e,t){if(function(e){return bb(e)&&e!==ug.ABORTED}(t.code)){const n=e.D_.shift();II(e).Zo(),await hI(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await dI(e)}}(e,t),mI(e)&&gI(e)}async function _I(e,t){const n=lg(e);n.asyncQueue.verifyOperationInProgress(),rg("RemoteStore","RemoteStore received new credentials");const r=sI(n);n.v_.add(3),await XS(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await JS(n)}async function EI(e,t){const n=lg(e);t?(n.v_.delete(2),await JS(n)):t||(n.v_.add(2),await XS(n),n.x_.set("Unknown"))}function SI(e){return e.N_||(e.N_=function(e,t,n){const r=lg(e);return r.R_(),new GS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:aI.bind(null,e),To:cI.bind(null,e),u_:lI.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),iI(e)?rI(e):e.x_.set("Unknown")):(await e.N_.stop(),oI(e))}))),e.N_}function II(e){return e.B_||(e.B_=function(e,t,n){const r=lg(e);return r.R_(),new HS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:yI.bind(null,e),To:bI.bind(null,e),E_:vI.bind(null,e),T_:wI.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await dI(e)):(await e.B_.stop(),e.D_.length>0&&(rg("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class TI{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new TI(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hg(ug.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kI(e,t){if(ig("AsyncQueue","".concat(t,": ").concat(e)),Yg(e))return new hg(ug.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class CI{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Og.comparator(t.key,n.key):(e,t)=>Og.comparator(e.key,t.key),this.keyedMap=kw(),this.sortedSet=new jy(this.comparator)}static emptySet(e){return new CI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof CI))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new CI;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class xI{constructor(){this.L_=new jy(Og.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):ag():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class NI{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new NI(e,t,CI.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class AI{constructor(){this.q_=void 0,this.Q_=[]}}class PI{constructor(){this.queries=new Ew((e=>gw(e)),mw),this.onlineState="Unknown",this.K_=new Set}}async function OI(e,t){const n=lg(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new AI),i)try{s.q_=await n.onListen(r)}catch(e){const n=kI(e,"Initialization of query '".concat(yw(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&MI(n)}async function RI(e,t){const n=lg(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function DI(e,t){const n=lg(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&MI(n)}function LI(e,t,n){const r=lg(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function MI(e){e.K_.forEach((e=>{e.next()}))}class FI{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new NI(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=NI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class UI{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class jI{constructor(e){this.serializer=e}Ps(e){return Jb(this.serializer,e)}Is(e){return e.metadata.exists?r_(this.serializer,e.document,!1):kv.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Gb(e)}}class VI{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zI(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=Ng.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new jI(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Rw()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=lg(e);let s=Rw(),o=Iw();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await gS(i,function(e){return hw(aw(Ng.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>pS(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new jI(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await ES(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function zI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class BI{constructor(e){this.key=e}}class qI{constructor(e){this.key=e}}class KI{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Rw(),this.mutatedKeys=Rw(),this.ua=bw(e),this.ca=new CI(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new xI,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=vw(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ag()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new NI(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new xI,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Rw(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new qI(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new BI(n))})),t}Ra(e){this.oa=e.hs,this.aa=Rw();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return NI.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class WI{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class GI{constructor(e){this.key=e,this.ma=!1}}class HI{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ew((e=>gw(e)),mw),this.pa=new Map,this.ya=new Set,this.wa=new jy(Og.comparator),this.Sa=new Map,this.ba=new WE,this.Da={},this.Ca=new Map,this.va=bE.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function QI(e,t){const n=bT(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await gS(n.localStore,hw(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await $I(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&ZS(n.remoteStore,e)}return i}async function $I(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await vS(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return oT(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await vS(e.localStore,t,!0),o=new KI(t,s.hs),a=o.ha(s.documents),c=Ab.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);oT(e,n,l.da);const u=new WI(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function YI(e,t){const n=lg(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!mw(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await yS(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),eI(n.remoteStore,r.targetId),iT(n,r.targetId)})).catch(Kg)):(iT(n,r.targetId),await yS(n.localStore,r.targetId,!0))}async function JI(e,t){const n=lg(e);try{const e=await function(e,t){const n=lg(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Hy.EMPTY_BYTE_STRING,Cg.min()).withLastLimboFreeSnapshotVersion(Cg.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Iw(),c=Rw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(pS(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(Cg.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Wg.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(cg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?cg(r.ma):e.removedDocuments.size>0&&(cg(r.ma),r.ma=!1))})),await lT(n,e,t)}catch(e){await Kg(e)}}function XI(e,t,n){const r=lg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=lg(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&MI(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZI(e,t,n){const r=lg(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new jy(Og.comparator);e=e.insert(s,kv.newNoDocument(s,Cg.min()));const n=Rw().add(s),i=new Nb(Cg.min(),new Map,new jy(Sg),e,n);await JI(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),cT(r)}else await yS(r.localStore,t,!1).then((()=>iT(r,t,n))).catch(Kg)}async function eT(e,t){const n=lg(e),r=t.batch.batchId;try{const e=await function(e,t){const n=lg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Wg.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);cg(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Rw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);rT(n,r,null),nT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lT(n,e)}catch(e){await Kg(e)}}async function tT(e,t,n){const r=lg(e);try{const e=await function(e,t){const n=lg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(cg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);rT(r,t,n),nT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await lT(r,e)}catch(n){await Kg(n)}}function nT(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function rT(e,t,n){const r=lg(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function iT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||sT(e,t)}))}function sT(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(eI(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),cT(e))}function oT(e,t,n){for(const r of n)r instanceof BI?(e.ba.addReference(r.key,t),aT(e,r)):r instanceof qI?(rg("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||sT(e,r.key)):ag()}function aT(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(rg("SyncEngine","New document in limbo: "+n),e.ya.add(r),cT(e))}function cT(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new Og(Ng.fromString(t)),r=e.va.next();e.Sa.set(r,new GI(n)),e.wa=e.wa.insert(n,r),ZS(e.remoteStore,new v_(hw(aw(n.path)),r,"TargetPurposeLimboResolution",ry._e))}}async function lT(e,t,n){const r=lg(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=aS.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=lg(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Wg.forEach(t,(t=>Wg.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Wg.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Yg(e))throw e;rg("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function uT(e,t){const n=lg(e);if(!n.currentUser.isEqual(t)){rg("SyncEngine","User change. New user:",t.toKey());const e=await dS(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new hg(ug.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await lT(n,e.us)}}function hT(e,t){const n=lg(e),r=n.Sa.get(t);if(r&&r.ma)return Rw().add(r.key);{let e=Rw();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function dT(e,t){const n=lg(e),r=await vS(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&oT(n,t.targetId,i.da),i}async function fT(e,t){const n=lg(e);return bS(n.localStore,t).then((e=>lT(n,e)))}async function pT(e,t,n,r){const i=lg(e),s=await function(e,t){const n=lg(e),r=lg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Wg.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await dI(i.remoteStore):"acknowledged"===n||"rejected"===n?(rT(i,t,r||null),nT(i,t),function(e,t){lg(lg(e).mutationQueue).Mn(t)}(i.localStore,t)):ag(),await lT(i,s)):rg("SyncEngine","Cannot apply mutation batch with id: "+t)}async function mT(e,t,n){const r=lg(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await gS(r.localStore,hw(t[0]));for(const e of t){const t=r.ga.get(e),n=await dT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await wS(r.localStore,o);e=await gS(r.localStore,t),await $I(r,gT(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function gT(e){return ow(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yT(e){return function(e){return lg(lg(e).persistence).Li()}(lg(e).localStore)}async function vT(e,t,n,r){const i=lg(e);if(i.Fa)return void rg("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await bS(i.localStore,ww(s[0])),r=Nb.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Hy.EMPTY_BYTE_STRING);await lT(i,e,r);break}case"rejected":await yS(i.localStore,t,!0),iT(i,t,r);break;default:ag()}}async function wT(e,t,n){const r=bT(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){rg("SyncEngine","Adding an already active target "+e);continue}const t=await wS(r.localStore,e),n=await gS(r.localStore,t);await $I(r,gT(t),n.targetId,!1,n.resumeToken),ZS(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await yS(r.localStore,e,!1).then((()=>{eI(r.remoteStore,e),iT(r,e)})).catch(Kg)}}function bT(e){const t=lg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZI.bind(null,t),t.fa.u_=DI.bind(null,t.eventManager),t.fa.xa=LI.bind(null,t.eventManager),t}function _T(e){const t=lg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tT.bind(null,t),t}class ET{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hS(this.persistence,new lS,e.initialUser,this.serializer)}createPersistence(e){return new JE(ZE.Hr,this.serializer)}createSharedClientState(e){return new OS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ST extends ET{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await _T(this.Na.syncEngine),await dI(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return hS(this.persistence,new lS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new CE(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ny(t,this.persistence);return new ty(e.asyncQueue,n)}createPersistence(e){const t=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?dE.withCacheSize(this.cacheSizeBytes):dE.DEFAULT;return new rS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zS(),BS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new OS}}class IT extends ST{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof PS&&(this.sharedClientState.syncEngine={Zs:pT.bind(null,t),Xs:vT.bind(null,t),eo:wT.bind(null,t),Li:yT.bind(null,t),Ys:fT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=lg(e);if(bT(n),_T(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await mT(n,e.toArray());n.Fa=!0,await EI(n.remoteStore,!0);for(const r of t)ZS(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(iT(n,i),yS(n.localStore,i,!0)))),eI(n.remoteStore,i)})),await t,await mT(n,e),function(e){const t=lg(e);t.Sa.forEach(((e,n)=>{eI(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new jy(Og.comparator)}(n),n.Fa=!1,await EI(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=zS();if(!PS.D(t))throw new hg(ug.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new PS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class TT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>XI(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=uT.bind(null,this.syncEngine),await EI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new PI}createDatastore(e){const t=qS(e.databaseInfo.databaseId),n=function(e){return new VS(e)}(e.databaseInfo);return function(e,t,n,r){return new QS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new YS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>XI(this.syncEngine,e,0)),DS.D()?new DS:new RS)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new HI(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=lg(e);rg("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await XS(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function kT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class CT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ig("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class xT{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new dg,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new UI(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class NT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new hg(ug.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=lg(e),r={documents:t.map((e=>Yb(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Ng.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){cg(!!t.found),t.found.name,t.found.updateTime;const n=Jb(e,t.found.name),r=Gb(t.found.updateTime),i=t.found.createTime?Gb(t.found.createTime):Cg.min(),s=new Iv({mapValue:{fields:t.found.fields}});return kv.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){cg(!!t.missing),cg(!!t.readTime);const n=Jb(e,t.missing),r=Gb(t.readTime);return kv.newNoDocument(n,r)}(e,t):ag()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());cg(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new db(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Og.fromPath(t);this.mutations.push(new fb(n,this.precondition(n)))})),await async function(e,t){const n=lg(e),r={writes:t.map((e=>i_(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Ng.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ag();t=Cg.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new hg(ug.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Cg.min())?Zw.exists(!1):Zw.updateTime(t):Zw.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Cg.min()))throw new hg(ug.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zw.updateTime(t)}return Zw.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class AT{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new KS(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new NT(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!iy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bb(t)}return!1}}class PT{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zm.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{rg("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(rg("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hg(ug.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(D){const n=kI(D,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function OT(e,t){e.asyncQueue.verifyOperationInProgress(),rg("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await dS(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function RT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await LT(e);rg("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>_I(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_I(t.remoteStore,n))),e._onlineComponents=t}function DT(e){return"FirebaseError"===e.name?e.code===ug.FAILED_PRECONDITION||e.code===ug.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function LT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){rg("FirestoreClient","Using user provided OfflineComponentProvider");try{await OT(e,e._uninitializedComponentsProvider._offline)}catch(D){const n=D;if(!DT(n))throw n;sg("Error using user provided cache. Falling back to memory cache: "+n),await OT(e,new ET)}}else rg("FirestoreClient","Using default OfflineComponentProvider"),await OT(e,new ET);return e._offlineComponents}async function MT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(rg("FirestoreClient","Using user provided OnlineComponentProvider"),await RT(e,e._uninitializedComponentsProvider._online)):(rg("FirestoreClient","Using default OnlineComponentProvider"),await RT(e,new TT))),e._onlineComponents}function FT(e){return LT(e).then((e=>e.persistence))}function UT(e){return LT(e).then((e=>e.localStore))}function jT(e){return MT(e).then((e=>e.remoteStore))}function VT(e){return MT(e).then((e=>e.syncEngine))}function zT(e){return MT(e).then((e=>e.datastore))}async function BT(e){const t=await MT(e),n=t.eventManager;return n.onListen=QI.bind(null,t.syncEngine),n.onUnlisten=YI.bind(null,t.syncEngine),n}function qT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new dg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new CT({next:s=>{t.enqueueAndForget((()=>RI(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new hg(ug.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new hg(ug.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new FI(aw(n.path),s,{includeMetadataChanges:!0,Z_:!0});return OI(e,o)}(await BT(e),e.asyncQueue,t,n,r))),r.promise}function KT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new dg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new CT({next:n=>{t.enqueueAndForget((()=>RI(e,o))),n.fromCache&&"server"===r.source?i.reject(new hg(ug.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new FI(n,s,{includeMetadataChanges:!0,Z_:!0});return OI(e,o)}(await BT(e),e.asyncQueue,t,n,r))),r.promise}function WT(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Sb().encode(e):e,function(e,t){return new xT(e,t)}(function(e,t){if(e instanceof Uint8Array)return kT(e,t);if(e instanceof ArrayBuffer)return kT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,qS(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=lg(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=lg(e),r=Gb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(zI(r));const i=new VI(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await lT(e,o.sa,void 0),await function(e,t){const n=lg(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return sg("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await VT(e),i,r)}))}function GT(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const HT=new Map;function QT(e,t,n){if(!n)throw new hg(ug.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function $T(e,t,n,r){if(!0===t&&!0===r)throw new hg(ug.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function YT(e){if(!Og.isDocumentKey(e))throw new hg(ug.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function JT(e){if(Og.isDocumentKey(e))throw new hg(ug.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function XT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ag()}function ZT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hg(ug.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=XT(e);throw new hg(ug.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ek(e,t){if(t<=0)throw new hg(ug.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class tk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new hg(ug.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hg(ug.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$T("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GT(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hg(ug.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new hg(ug.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new hg(ug.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hg(ug.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hg(ug.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pg;switch(e.type){case"firstParty":return new vg(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hg(ug.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HT.get(e);t&&(rg("ComponentProvider","Removing Datastore"),HT.delete(e),t.terminate())}(this),Promise.resolve()}}function rk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=ZT(e,nk))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&sg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Zm.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qi(JSON.stringify({alg:"none",type:"JWT"})),qi(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new hg(ug.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zm(s)}e._authCredentials=new mg(new fg(t,n))}}class ik{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ik(this.firestore,e,this._query)}}class sk{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ok(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sk(this.firestore,e,this._key)}}class ok extends ik{constructor(e,t,n){super(e,t,aw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sk(this.firestore,null,new Og(e))}withConverter(e){return new ok(this.firestore,e,this._path)}}function ak(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ms(e),QT("collection","path",t),e instanceof nk){const n=Ng.fromString(t,...r);return JT(n),new ok(e,null,n)}{if(!(e instanceof sk||e instanceof ok))throw new hg(ug.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ng.fromString(t,...r));return JT(n),new ok(e.firestore,null,n)}}function ck(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ms(e),1===arguments.length&&(t=Eg.newId()),QT("doc","path",t),e instanceof nk){const n=Ng.fromString(t,...r);return YT(n),new sk(e,null,new Og(n))}{if(!(e instanceof sk||e instanceof ok))throw new hg(ug.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ng.fromString(t,...r));return YT(n),new sk(e.firestore,e instanceof ok?e.converter:null,new Og(n))}}function lk(e,t){return e=ms(e),t=ms(t),(e instanceof sk||e instanceof ok)&&(t instanceof sk||t instanceof ok)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uk(e,t){return e=ms(e),t=ms(t),e instanceof ik&&t instanceof ik&&e.firestore===t.firestore&&mw(e._query,t._query)&&e.converter===t.converter}class hk{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new KS(this,"async_queue_retry"),this._u=()=>{const e=BS();e&&rg("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=BS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=BS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new dg;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Yg(e))throw e;rg("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ig("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=TI.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&ag()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function dk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class fk{constructor(){this._progressObserver={},this._taskCompletionResolver=new dg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pk extends nk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new hk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||gk(this),this._firestoreClient.terminate()}}function mk(e){return e._firestoreClient||gk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function gk(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new tv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,GT(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new PT(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function yk(e,t,n){const r=new dg;return e.asyncQueue.enqueue((async()=>{try{await OT(e,n),await RT(e,t),r.resolve()}catch(e){const n=e;if(!DT(n))throw n;sg("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function vk(e){return function(e){const t=new dg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=lg(e);sI(n.remoteStore)||rg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=lg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=kI(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await VT(e),t))),t.promise}(mk(e=ZT(e,pk)))}function wk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await FT(e),n=await jT(e);return t.setNetworkEnabled(!0),function(e){const t=lg(e);return t.v_.delete(0),JS(t)}(n)}))}(mk(e=ZT(e,pk)))}function bk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await FT(e),n=await jT(e);return t.setNetworkEnabled(!1),async function(e){const t=lg(e);t.v_.add(0),await XS(t),t.x_.set("Offline")}(n)}))}(mk(e=ZT(e,pk)))}function _k(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=lg(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await UT(e),t)))}(mk(e=ZT(e,pk)),t).then((t=>t?new ik(e,null,t.query):null))}function Ek(e){if(e._initialized||e._terminated)throw new hg(ug.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Sk{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sk(Hy.fromBase64String(e))}catch(e){throw new hg(ug.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Sk(Hy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ik{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new hg(ug.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tk{constructor(e){this._methodName=e}}class kk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hg(ug.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hg(ug.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sg(this._lat,e._lat)||Sg(this._long,e._long)}}const Ck=/^__.*__$/;class xk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cb(e,this.data,this.fieldMask,t,this.fieldTransforms):new ab(e,this.data,t,this.fieldTransforms)}}class Nk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ak(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ag()}}class Pk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Pk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Jk(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Ak(this.du)&&Ck.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Ok{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||qS(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Pk({du:e,methodName:t,wu:n,path:Pg.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rk(e){const t=e._freezeSettings(),n=qS(e._databaseId);return new Ok(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dk(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Hk("Data must be an object, but it was:",o,r);const a=Wk(r,o);let c,l;if(s.merge)c=new Wy(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Qk(t,r,n);if(!o.contains(i))throw new hg(ug.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Xk(e,i)||e.push(i)}c=new Wy(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new xk(new Iv(a),c,l)}class Lk extends Tk{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lk}}function Mk(e,t,n){return new Pk({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Fk extends Tk{_toFieldTransform(e){return new Jw(e.path,new qw)}isEqual(e){return e instanceof Fk}}class Uk extends Tk{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Mk(this,e,!0),n=this.bu.map((e=>Kk(e,t))),r=new Kw(n);return new Jw(e.path,r)}isEqual(e){return e instanceof Uk&&as(this.bu,e.bu)}}class jk extends Tk{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Mk(this,e,!0),n=this.bu.map((e=>Kk(e,t))),r=new Gw(n);return new Jw(e.path,r)}isEqual(e){return e instanceof jk&&as(this.bu,e.bu)}}class Vk extends Tk{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Qw(e.serializer,Uw(e.serializer,this.Du));return new Jw(e.path,t)}isEqual(e){return e instanceof Vk&&this.Du===e.Du}}function zk(e,t,n,r){const i=e.Su(1,t,n);Hk("Data must be an object, but it was:",i,r);const s=[],o=Iv.empty();Fy(r,((e,r)=>{const a=Yk(t,e,n);r=ms(r);const c=i.fu(a);if(r instanceof Lk)s.push(a);else{const e=Kk(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Wy(s);return new Nk(o,a,i.fieldTransforms)}function Bk(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[Qk(t,r,n)],c=[i];if(s.length%2!=0)throw new hg(ug.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Qk(t,s[d])),c.push(s[d+1]);const l=[],u=Iv.empty();for(let d=a.length-1;d>=0;--d)if(!Xk(l,a[d])){const e=a[d];let t=c[d];t=ms(t);const n=o.fu(e);if(t instanceof Lk)l.push(e);else{const r=Kk(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new Wy(l);return new Nk(u,h,o.fieldTransforms)}function qk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Kk(n,e.Su(r?4:3,t))}function Kk(e,t){if(Gk(e=ms(e)))return Hk("Unsupported field value:",t,e),Wk(e,t);if(e instanceof Tk)return function(e,t){if(!Ak(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Kk(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ms(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Uw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kg.fromDate(e);return{timestampValue:qb(t.serializer,n)}}if(e instanceof kg){const n=new kg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qb(t.serializer,n)}}if(e instanceof kk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sk)return{bytesValue:Kb(t.serializer,e._byteString)};if(e instanceof sk){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Hb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(XT(e)))}(e,t)}function Wk(e,t){const n={};return Uy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fy(e,((e,r)=>{const i=Kk(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kg||e instanceof kk||e instanceof Sk||e instanceof sk||e instanceof Tk)}function Hk(e,t,n){if(!Gk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=XT(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Qk(e,t,n){if((t=ms(t))instanceof Ik)return t._internalPath;if("string"==typeof t)return Yk(e,t);throw Jk("Field path arguments must be of type string or ",e,!1,void 0,n)}const $k=new RegExp("[~\\*/\\[\\]]");function Yk(e,t,n){if(t.search($k)>=0)throw Jk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ik(...t.split("."))._internalPath}catch(R){throw Jk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jk(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new hg(ug.INVALID_ARGUMENT,a+e+c)}function Xk(e,t){return e.some((e=>e.isEqual(t)))}class Zk{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eC extends Zk{data(){return super.data()}}function tC(e,t){return"string"==typeof t?Yk(e,t):t instanceof Ik?t._internalPath:t._delegate._internalPath}function nC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hg(ug.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rC{}class iC extends rC{}function sC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof rC&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof aC)).length,n=e.filter((e=>e instanceof oC)).length;if(t>1||t>0&&n>0)throw new hg(ug.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class oC extends iC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new oC(e,t,n)}_apply(e){const t=this._parse(e);return mC(e._query,t),new ik(e.firestore,e.converter,fw(e._query,t))}_parse(e){const t=Rk(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new hg(ug.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){pC(o,s);const t=[];for(const n of o)t.push(fC(r,e,n));a={arrayValue:{values:t}}}else a=fC(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||pC(o,s),a=qk(n,t,o,"in"===s||"not-in"===s);return Rv.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class aC extends rC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aC(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Dv.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)mC(n,i),n=fw(n,i)}(e._query,t),new ik(e.firestore,e.converter,fw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cC extends iC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new hg(ug.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hg(ug.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Av(t,n)}(e._query,this._field,this._direction);return new ik(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new sw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class lC extends iC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new lC(e,t,n)}_apply(e){return new ik(e.firestore,e.converter,pw(e._query,this._limit,this._limitType))}}class uC extends iC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uC(e,t,n)}_apply(e){const t=dC(e,this.type,this._docOrFields,this._inclusive);return new ik(e.firestore,e.converter,function(e,t){return new sw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class hC extends iC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new hC(e,t,n)}_apply(e){const t=dC(e,this.type,this._docOrFields,this._inclusive);return new ik(e.firestore,e.converter,function(e,t){return new sw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function dC(e,t,n,r){if(n[0]=ms(n[0]),n[0]instanceof Zk)return function(e,t,n,r,i){if(!r)throw new hg(ug.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of uw(e))if(o.field.isKeyField())s.push(dv(t,r.key));else{const e=r.data.field(o.field);if(Xy(e))throw new hg(ug.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new hg(ug.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Cv(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Rk(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new hg(ug.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new hg(ug.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!lw(e)&&-1!==s.indexOf("/"))throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Ng.fromString(s));if(!Og.isDocumentKey(n))throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Og(n);a.push(dv(t,i))}else{const e=qk(n,r,s);a.push(e)}}return new Cv(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function fC(e,t,n){if("string"==typeof(n=ms(n))){if(""===n)throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lw(t)&&-1!==n.indexOf("/"))throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ng.fromString(n));if(!Og.isDocumentKey(r))throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return dv(e,new Og(r))}if(n instanceof sk)return dv(e,n._key);throw new hg(ug.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(XT(n),"."))}function pC(e,t){if(!Array.isArray(e)||0===e.length)throw new hg(ug.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function mC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new hg(ug.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new hg(ug.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class gC{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ag()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Fy(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new kk(Yy(e.latitude),Yy(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ev(e));default:return null}}convertTimestamp(e){const t=$y(e);return new kg(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ng.fromString(e);cg(y_(n));const r=new nv(n.get(1),n.get(3)),i=new Og(n.popFirst(5));return r.isEqual(t)||ig("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function yC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vC extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sk(this.firestore,null,t)}}class wC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bC extends Zk{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new _C(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(tC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _C extends bC{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class EC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new _C(this._firestore,this._userDataWriter,n.key,n,new wC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hg(ug.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new _C(e._firestore,e._userDataWriter,n.doc.key,n.doc,new wC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new _C(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:SC(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function SC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ag()}}function IC(e,t){return e instanceof bC&&t instanceof bC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof EC&&t instanceof EC&&e._firestore===t._firestore&&uk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class TC extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sk(this.firestore,null,t)}}function kC(e){e=ZT(e,sk);const t=ZT(e.firestore,pk),n=mk(t),r=new TC(t);return function(e,t){const n=new dg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=lg(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new hg(ug.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=kI(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await UT(e),t,n))),n.promise}(n,e._key).then((n=>new bC(t,r,e._key,n,new wC(null!==n&&n.hasLocalMutations,!0),e.converter)))}function CC(e){e=ZT(e,ik);const t=ZT(e.firestore,pk),n=mk(t),r=new TC(t);return function(e,t){const n=new dg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await vS(e,t,!0),i=new KI(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=kI(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await UT(e),t,n))),n.promise}(n,e._query).then((n=>new EC(t,r,e,n)))}function xC(e,t,n){e=ZT(e,sk);const r=ZT(e.firestore,pk),i=yC(e.converter,t,n);return OC(r,[Dk(Rk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zw.none())])}function NC(e,t,n){e=ZT(e,sk);const r=ZT(e.firestore,pk),i=Rk(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=ms(t))||t instanceof Ik?Bk(i,"updateDoc",e._key,t,n,a):zk(i,"updateDoc",e._key,t),OC(r,[s.toMutation(e._key,Zw.exists(!0))])}function AC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=ms(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||dk(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(dk(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof sk)h=ZT(e.firestore,pk),d=aw(e._key.path),u={next:t=>{n[c]&&n[c](RC(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=ZT(e,ik);h=ZT(t.firestore,pk),d=t._query;const r=new TC(h);u={next:e=>{n[c]&&n[c](new EC(h,r,t,e))},error:n[c+1],complete:n[c+2]},nC(e._query)}return function(e,t,n,r){const i=new CT(r),s=new FI(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>OI(await BT(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>RI(await BT(e),s)))}}(mk(h),d,l,u)}function PC(e,t){return function(e,t){const n=new CT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){lg(e).K_.add(t),t.next()}(await BT(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){lg(e).K_.delete(t)}(await BT(e),n)))}}(mk(e=ZT(e,pk)),dk(t)?t:{next:t})}function OC(e,t){return function(e,t){const n=new dg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=_T(e);try{const e=await function(e,t){const n=lg(e),r=kg.now(),i=t.reduce(((e,t)=>e.add(t.key)),Rw());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Iw(),c=Rw();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=sb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new cb(e.key,t,Tv(t.value.mapValue),Zw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Cw(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new jy(Sg)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await lT(r,e.changes),await dI(r.remoteStore)}catch(e){const t=kI(e,"Failed to persist write");n.reject(t)}}(await VT(e),t,n))),n.promise}(mk(e),t)}function RC(e,t,n){const r=n.docs.get(t._key),i=new TC(e);return new bC(e,i,t._key,r,new wC(n.hasPendingWrites,n.fromCache),t.converter)}const DC={maxAttempts:5};class LC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rk(e)}set(e,t,n){this._verifyNotCommitted();const r=MC(e,this._firestore),i=yC(r.converter,t,n),s=Dk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Zw.none())),this}update(e,t,n){this._verifyNotCommitted();const r=MC(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ms(t))||t instanceof Ik?Bk(this._dataReader,"WriteBatch.update",r._key,t,n,o):zk(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Zw.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=MC(e,this._firestore);return this._mutations=this._mutations.concat(new db(t._key,Zw.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hg(ug.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function MC(e,t){if((e=ms(e)).firestore!==t)throw new hg(ug.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class FC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rk(e)}get(e){const t=MC(e,this._firestore),n=new vC(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return ag();const r=e[0];if(r.isFoundDocument())return new Zk(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Zk(this._firestore,n,t._key,null,t.converter);throw ag()}))}set(e,t,n){const r=MC(e,this._firestore),i=yC(r.converter,t,n),s=Dk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=MC(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ms(t))||t instanceof Ik?Bk(this._dataReader,"Transaction.update",r._key,t,n,o):zk(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=MC(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=MC(e,this._firestore),n=new TC(this._firestore);return super.get(e).then((e=>new bC(this._firestore,n,t._key,e._document,new wC(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){eg=e}(oo),eo(new gs("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new pk(new gg(e.getProvider("auth-internal")),new bg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hg(ug.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nv(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ho(Xm,"4.4.1",e),ho(Xm,"4.4.1","esm2017")}();function UC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new hg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function jC(){if("undefined"===typeof Uint8Array)throw new hg("unimplemented","Uint8Arrays are not available in this environment.")}function VC(){if("undefined"==typeof atob)throw new hg("unimplemented","Blobs are unavailable in Firestore in this environment.")}class zC{constructor(e){this._delegate=e}static fromBase64String(e){return VC(),new zC(Sk.fromBase64String(e))}static fromUint8Array(e){return jC(),new zC(Sk.fromUint8Array(e))}toBase64(){return VC(),this._delegate.toBase64()}toUint8Array(){return jC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class qC{enableIndexedDbPersistence(e,t){return function(e,t){Ek(e=ZT(e,pk));const n=mk(e);if(n._uninitializedComponentsProvider)throw new hg(ug.FAILED_PRECONDITION,"SDK cache is already specified.");sg("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new TT;return yk(n,i,new ST(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Ek(e=ZT(e,pk));const t=mk(e);if(t._uninitializedComponentsProvider)throw new hg(ug.FAILED_PRECONDITION,"SDK cache is already specified.");sg("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new TT;return yk(t,r,new IT(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new hg(ug.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new dg;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Hg.D())return Promise.resolve();const t=e+"main";await Hg.delete(t)}(oS(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class KC{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof nv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||sg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rk(this._delegate,e,t,n)}enableNetwork(){return wk(this._delegate)}disableNetwork(){return bk(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,$T("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return vk(this._delegate)}onSnapshotsInSync(e){return PC(this._delegate,e)}get app(){if(!this._appCompat)throw new hg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ix(this,ak(this._delegate,e))}catch(t){throw YC(t,"collection()","Firestore.collection()")}}doc(e){try{return new $C(this,ck(this._delegate,e))}catch(t){throw YC(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tx(this,function(e,t){if(e=ZT(e,nk),QT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new hg(ug.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ik(e,null,function(e){return new sw(Ng.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw YC(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=ZT(e,pk);const r=Object.assign(Object.assign({},DC),n);return function(e){if(e.maxAttempts<1)throw new hg(ug.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new dg;return e.asyncQueue.enqueueAndForget((async()=>{const i=await zT(e);new AT(e.asyncQueue,i,n,t,r).ja()})),r.promise}(mk(e),(n=>t(new FC(e,n))),r)}(this._delegate,(t=>e(new GC(this,t))))}batch(){return mk(this._delegate),new HC(new LC(this._delegate,(e=>OC(this._delegate,e))))}loadBundle(e){return function(e,t){const n=mk(e=ZT(e,pk)),r=new fk;return WT(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return _k(this._delegate,e).then((e=>e?new tx(this,e):null))}}class WC extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new zC(new Sk(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $C.forKey(t,this.firestore,null)}}class GC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new WC(e)}get(e){const t=sx(e);return this._delegate.get(t).then((e=>new ZC(this._firestore,new bC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=sx(e);return n?(UC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sx(e);return this._delegate.delete(t),this}}class HC{constructor(e){this._delegate=e}set(e,t,n){const r=sx(e);return n?(UC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class QC{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new _C(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ex(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=QC.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new QC(e,new WC(e),t),r.set(t,i)),i}}QC.INSTANCES=new WeakMap;class $C{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WC(e)}static forPath(e,t,n){if(e.length%2!==0)throw new hg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new $C(t,new sk(t._delegate,n,new Og(e)))}static forKey(e,t,n){return new $C(t,new sk(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ix(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ix(this.firestore,ak(this._delegate,e))}catch(t){throw YC(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ms(e))instanceof sk&&lk(this._delegate,e)}set(e,t){t=UC("DocumentReference.set",t);try{return t?xC(this._delegate,e,t):xC(this._delegate,e)}catch(n){throw YC(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?NC(this._delegate,e):NC(this._delegate,e,t,...r)}catch(s){throw YC(s,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return OC(ZT(e.firestore,pk),[new db(e._key,Zw.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JC(t),i=XC(t,(e=>new ZC(this.firestore,new bC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return AC(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?kC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ZT(e,sk);const t=ZT(e.firestore,pk);return qT(mk(t),e._key,{source:"server"}).then((n=>RC(t,e,n)))}(this._delegate):function(e){e=ZT(e,sk);const t=ZT(e.firestore,pk);return qT(mk(t),e._key).then((n=>RC(t,e,n)))}(this._delegate),t.then((e=>new ZC(this.firestore,new bC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new $C(this.firestore,e?this._delegate.withConverter(QC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function YC(e,t,n){return e.message=e.message.replace(t,n),e}function JC(e){for(const t of e)if("object"===typeof t&&!BC(t))return t;return{}}function XC(e,t){var n,r;let i;return i=BC(e[0])?e[0]:BC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $C(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IC(this._delegate,e._delegate)}}class ex extends ZC{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||ag()}(void 0!==t),t}}class tx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WC(e)}where(e,t,n){try{return new tx(this.firestore,sC(this._delegate,function(e,t,n){const r=t,i=tC("where",e);return oC._create(i,r,n)}(e,t,n)))}catch(r){throw YC(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tx(this.firestore,sC(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=tC("orderBy",e);return cC._create(n,t)}(e,t)))}catch(n){throw YC(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tx(this.firestore,sC(this._delegate,function(e){return ek("limit",e),lC._create("limit",e,"F")}(e)))}catch(t){throw YC(t,"limit()","Query.limit()")}}limitToLast(e){try{return new tx(this.firestore,sC(this._delegate,function(e){return ek("limitToLast",e),lC._create("limitToLast",e,"L")}(e)))}catch(t){throw YC(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new tx(this.firestore,sC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uC._create("startAt",t,!0)}(...arguments)))}catch(e){throw YC(e,"startAt()","Query.startAt()")}}startAfter(){try{return new tx(this.firestore,sC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uC._create("startAfter",t,!1)}(...arguments)))}catch(e){throw YC(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new tx(this.firestore,sC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hC._create("endBefore",t,!1)}(...arguments)))}catch(e){throw YC(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new tx(this.firestore,sC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hC._create("endAt",t,!0)}(...arguments)))}catch(e){throw YC(e,"endAt()","Query.endAt()")}}isEqual(e){return uk(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?CC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ZT(e,ik);const t=ZT(e.firestore,pk),n=mk(t),r=new TC(t);return KT(n,e._query,{source:"server"}).then((n=>new EC(t,r,e,n)))}(this._delegate):function(e){e=ZT(e,ik);const t=ZT(e.firestore,pk),n=mk(t),r=new TC(t);return nC(e._query),KT(n,e._query).then((n=>new EC(t,r,e,n)))}(this._delegate),t.then((e=>new rx(this.firestore,new EC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JC(t),i=XC(t,(e=>new rx(this.firestore,new EC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return AC(this._delegate,r,i)}withConverter(e){return new tx(this.firestore,e?this._delegate.withConverter(QC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ex(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new ex(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new nx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new ex(this._firestore,n))}))}isEqual(e){return IC(this._delegate,e._delegate)}}class ix extends tx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $C(this.firestore,e):null}doc(e){try{return new $C(this.firestore,void 0===e?ck(this._delegate):ck(this._delegate,e))}catch(t){throw YC(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ZT(e.firestore,pk),r=ck(e),i=yC(e.converter,t);return OC(n,[Dk(Rk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zw.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new $C(this.firestore,e)))}isEqual(e){return lk(this._delegate,e._delegate)}withConverter(e){return new ix(this.firestore,e?this._delegate.withConverter(QC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function sx(e){return ZT(e,sk)}class ox{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Ik(...t)}static documentId(){return new ox(Pg.keyField().canonicalString())}isEqual(e){return(e=ms(e))instanceof Ik&&this._delegate._internalPath.isEqual(e._internalPath)}}class ax{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Fk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ax(e)}static delete(){const e=new Lk("deleteField");return e._methodName="FieldValue.delete",new ax(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Uk("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ax(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ax(e)}static increment(e){const t=function(e){return new Vk("increment",e)}(e);return t._methodName="FieldValue.increment",new ax(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cx={Firestore:KC,GeoPoint:kk,Timestamp:kg,Blob:zC,Transaction:GC,WriteBatch:HC,DocumentReference:$C,DocumentSnapshot:ZC,Query:tx,QueryDocumentSnapshot:ex,QuerySnapshot:rx,CollectionReference:ix,FieldPath:ox,FieldValue:ax,setLogLevel:function(e){!function(e){tg.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new gs("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},cx)))}(e,((e,t)=>new KC(e,t,new qC))),e.registerVersion("@firebase/firestore-compat","0.3.24")}(Po);Po.initializeApp({apiKey:"AIzaSyB_X7S3_q3BUxvo4y7ijuQQ5Gf8WfcuwJY",authDomain:"myflix-f41a7.firebaseapp.com",projectId:"myflix-f41a7",storageBucket:"myflix-f41a7.appspot.com",messagingSenderId:"427835202695",appId:"1:427835202695:web:c82a6a1579444f1b536c22"}).firestore();const lx=Po.auth();const ux=function(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null);return(0,qn.jsx)("div",{className:"signscreen",children:(0,qn.jsxs)("form",{children:[(0,qn.jsx)("h1",{children:"Sign In"}),(0,qn.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,qn.jsx)("input",{ref:t,placeholder:"Passwaord",type:"password"}),(0,qn.jsx)("button",{type:"submit",onClick:n=>{n.preventDefault(),lx.signInWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>alert(e.message)))},children:" Sign In "}),(0,qn.jsxs)("h4",{children:[(0,qn.jsx)("span",{className:"signup_grey",children:"New to Netflix ? "}),(0,qn.jsx)("spam",{className:"signupscreen_links",onClick:n=>{n.preventDefault(),lx.createUserWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:"sign up now."})]})]})})};const hx=function(){const[e,t]=(0,r.useState)(!1);return(0,qn.jsxs)("div",{className:"loginscreen",children:[(0,qn.jsxs)("div",{className:"loginscreen_background",children:[(0,qn.jsx)("img",{className:"loginscreen__logo",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:""}),(0,qn.jsx)("button",{onClick:()=>t(!0),className:"loginscreen_button",children:"Sign In"}),(0,qn.jsx)("div",{className:"loginscreen_gradient"})]}),(0,qn.jsx)("div",{className:"loginscreen_body",children:e?(0,qn.jsx)(ux,{}):(0,qn.jsxs)(qn.Fragment,{children:[(0,qn.jsx)("h1",{children:"Unlimated Films,TV programs and More."}),(0,qn.jsx)("h2",{children:" Watch Less , Learn More ,Live More."}),(0,qn.jsx)("h3",{children:" Ready to watch Desi Damaka the Enter your Email , or cretae a account !!!."}),(0,qn.jsx)("div",{className:"loginscreen_input",children:(0,qn.jsxs)("form",{children:[(0,qn.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,qn.jsx)("button",{onClick:()=>t(!0),className:"loginscreen_get",children:"Get Started"})]})})]})})]})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const dx=i.startTransition;l.flushSync,i.useId;function fx(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),zt((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Ut("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:jt(t)}),null,a)));let c=o.current,[l,u]=r.useState({action:c.action,location:c.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&dx?dx((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>c.listen(d)),[c,d]),r.createElement(Vn,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var px,mx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(px||(px={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(mx||(mx={}));const gx=function(){return(0,qn.jsxs)("div",{className:"plansScreens",children:[(0,qn.jsx)("h4",{children:" Premium :   299$ only"}),(0,qn.jsx)("p",{children:"4k+hdr"}),(0,qn.jsx)("button",{className:"butt1",children:"Subscribe"}),(0,qn.jsx)("h4",{children:"Basic : 199$ only"}),(0,qn.jsx)("p",{children:"720p"}),(0,qn.jsx)("button",{className:"butt2",children:"Subscribe"})]})};const yx=function(){const e=_(At);return(0,qn.jsxs)("div",{className:"profilescreen",children:[(0,qn.jsx)(Kn,{}),(0,qn.jsxs)("div",{className:"profilescreen_body",children:[(0,qn.jsx)("h1",{children:"Edit"}),(0,qn.jsxs)("div",{className:"profilescreen_info",children:[(0,qn.jsx)("img",{src:"https://avatarfiles.alphacoders.com/320/320993.jpg",alts:""}),(0,qn.jsxs)("div",{className:"profilescreen_details",children:[(0,qn.jsx)("h2",{children:e.email}),(0,qn.jsxs)("div",{className:"profilescreenplans",children:[(0,qn.jsx)("h3",{children:"Plans"}),(0,qn.jsx)(gx,{}),(0,qn.jsx)("button",{onClick:()=>lx.signOut(),className:"profilescrenn_signout",children:"Sign out"})]})]})]})]})]})};const vx=function(){const e=_(At),t=A();return(0,r.useEffect)((()=>lx.onAuthStateChanged((e=>{t(e?xt({uid:e.uid,email:e.email}):Nt())}))),[]),(0,qn.jsx)("div",{className:"app",children:(0,qn.jsx)(fx,{children:e?(0,qn.jsxs)(zn,{children:[(0,qn.jsx)(jn,{path:"/profile",element:(0,qn.jsx)(yx,{})}),(0,qn.jsx)(jn,{path:"/",element:(0,qn.jsx)(ji,{})})]}):(0,qn.jsx)(hx,{})})})},wx=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))},bx=document.getElementById("root");(0,s.s)(bx).render((0,qn.jsx)(r.StrictMode,{children:(0,qn.jsx)(k,{store:Pt,children:(0,qn.jsx)(vx,{})})})),wx()})()})();
//# sourceMappingURL=main.e011c31d.js.map